!function(){"use strict";angular.module("app",["ngRoute","ngNotify","ui.bootstrap","mobile-angular-ui","angular-loading-bar","mobile-angular-ui.gestures","app.socket","app.necesidad","app.admin","app.home","app.main","app.user"]).run(["$transform",function(e){window.$transform=e}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"scripts/home/scroll.html",reloadOnSearch:!1,controller:"HomeCtrl",controllerAs:"HomeCtrl"}).when("/busqueda",{template:"<busqueda></busqueda>"}).when("/necesidad/:id",{templateUrl:"scripts/necesidad/views/detalle.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/necesidad/:id/editar",{templateUrl:"scripts/necesidad/views/editar.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/categoria/:categoria",{templateUrl:"scripts/necesidad/views/categoria.html",reloadOnSearch:!1,controller:"CategoriaCtrl",controllerAs:"CategoriaCtrl"}).when("/perfil",{templateUrl:"scripts/users/config.html",reloadOnSearch:!1,controller:"ConfigCtrl",controllerAs:"ConfigCtrl"}).when("/usuario/:id",{template:"<user-profile></user-profile>"}).when("/contacto",{templateUrl:"scripts/shared/contacto.html"}).when("/privacidad",{templateUrl:"scripts/shared/privacidad.html"}).when("/admin",{template:"<admin-dashboard></admin-dashboard>"}).when("/admin/usuarios",{template:"<users-list></users-list>"}).when("/admin/necesidades",{template:"<necesidades-list></necesidades-list>"}).when("/admin/comentarios",{template:"<comentarios-list></comentarios-list>"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("app.admin",["app.admin.users","app.admin.necesidades","app.admin.comentarios","app.admin.dashboard","app.admin.service"])}(),function(){"use strict";angular.module("app.admin.service",[]).factory("Admin",["$http",function(e){return{dash:function(){return e.get("/api/admin/dash")},user:function(r){return e.get("/api/admin/users/"+r)},users:function(){return e.get("api/admin/users")},necesidad:function(r){return e.get("/api/admin/necesidades/"+r)},necesidades:function(){return e.get("api/admin/necesidades")}}}])}(),function(){"use strict";angular.module("app.admin.comentarios",[]).directive("comentariosList",function(){return{restrict:"E",templateUrl:"scripts/admin/comentarios.html",controller:"AdminComentariosCtrl",controllerAs:"ctrl"}}).controller("AdminComentariosCtrl",["Comentario","ngNotify","$route",function(e,r,t){var n=this;e.all().success(function(e){n.comentarios=e}).error(function(e){r.set(e,"error")}),n["delete"]=function(n){var s=confirm("¿Realmente deseas borrar este comentario?");s&&e["delete"](n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})},n.update=function(n){var s=prompt("Remplaza el texto",n.texto);n.texto=s,e.update(n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.dashboard",[]).directive("adminDashboard",function(){return{restrict:"E",templateUrl:"scripts/admin/dashboard.html",controller:"AdminDashCtrl",controllerAs:"ctrl"}}).controller("AdminDashCtrl",["Admin","ngNotify","socket",function(e,r,t){var n=this;n.logs=[],e.dash().success(function(e){n.dash=e}).error(function(e){r.set(e,"error")}),t.on("users:logs",function(e){r.set(e.log,"success"),n.logs.push(e)})}])}(),function(){"use strict";angular.module("app.admin.necesidades",[]).directive("necesidadesList",function(){return{restrict:"E",templateUrl:"scripts/admin/necesidades.html",controller:"AdminNecesidadesCtrl",controllerAs:"ctrl"}}).controller("AdminNecesidadesCtrl",["Necesidad","ngNotify","$route",function(e,r,t){var n=this;e.load().success(function(e){n.necesidades=e}).error(function(e){r.set(e,"error")}),n["delete"]=function(n){var s=confirm("¿Realmente deseas borrar esta necesidad?");s&&e["delete"](n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.users",[]).directive("usersList",function(){return{restrict:"E",templateUrl:"scripts/admin/users.html",controller:"AdminUsersCtrl",controllerAs:"ctrl"}}).controller("AdminUsersCtrl",["User","ngNotify",function(e,r){var t=this;e.all().success(function(e){t.users=e}).error(function(e){r.set(e,"error")})}])}(),function(){"use strict";angular.module("app.home",[]).controller("HomeCtrl",["Necesidad","ngNotify",function(e,r){var t=this;e.load().success(function(e){t.necesidades=e}).error(function(e){r.set(e,"error")})}])}(),function(){"use strict";angular.module("app.necesidad.busqueda",[]).directive("busqueda",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/busqueda.html"}})}(),function(){"use strict";angular.module("app.necesidad.categoria",[]).controller("CategoriaCtrl",["Necesidad","$routeParams",function(e,r){var t=this;e.categoria(r.categoria).success(function(e){t.necesidades=e.necesidades,t.categoria=e.categoria}).error(function(e){console.error(e)})}])}(),function(){"use strict";angular.module("app.necesidad.comentario",[]).directive("comentario",function(){return{restrict:"E",templateUrl:"scripts/necesidad/comentario.html",scope:{comentario:"="}}})}(),function(){"use strict";angular.module("app.comentario.service",[]).factory("Comentario",["$http",function(e){return{"delete":function(r){return e["delete"]("/api/comentarios/"+r)},util:function(r){return e.patch("/api/comentarios/"+r)},all:function(){return e.get("/api/comentarios/")},create:function(r){return e({data:r,method:"POST",url:"/api/necesidades/"+r.necesidadId+"/comentarios"})},update:function(r){return e({data:r,method:"PUT",url:"/api/comentarios/"+r.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.detalle",[]).controller("NecesidadDetalleCtrl",["Necesidad","ngNotify","$routeParams","$window","Comentario","$scope","socket",function(e,r,t,n,s,i,o){var a=this;a.necesidad={},a.Comentario={},t.id&&(o.log("Viendo una necesidad"),e.show(t.id).success(function(e){a.necesidad=e}).error(function(e){r.set(e,"error")})),a.save=function(){o.emit("users:logs",{log:"está editando una necesidad :)"}),e.update(a.necesidad).success(function(e){r.set(e,"success")}).error(function(e){r.set(e,"error")})},a.comentar=function(){a.ComentarioForm.necesidadId=a.necesidad.id,s.create(a.ComentarioForm).success(function(e){r.set(e,"success"),a.Comentario.createdAt=new Date,a.necesidad.comentarios.push(a.Comentario),a.Comentario={}}).error(function(e){r.set(e,"error")})},a["delete"]=function(){o.emit("users:logs",{log:"está eliminando una necesidad :)"});var t=confirm("Realmente deseas eliminar esta publicación?");t&&e["delete"](a.necesidad.id).success(function(e){r.set(e,"success"),n.location="#/"}).error(function(e){r.set(e,"error")})},a.util=function(e){s.util(e.id).success(function(t){e.util=!0,r.set(t,"success")}).error(function(e){r.set(e,"error")})},i.upload=function(n){console.log("Subiendo archivo");var s=new FormData;n[0]&&(s.append("file",n[0]),e.upload(s,t.id).success(function(e){r.set(e,"success"),console.log(e)}).error(function(e){console.log(e),r.set(e,"error")}))}}])}(),function(){"use strict";angular.module("app.necesidad.item",[]).directive("necesidadItem",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/item.html",scope:{necesidad:"="}}})}(),function(){"use strict";angular.module("app.necesidad",["app.necesidad.service","app.necesidad.nueva","app.necesidad.item","app.necesidad.detalle","app.necesidad.categoria","app.necesidad.comentario","app.necesidad.busqueda","app.comentario.service"]).controller("NecesidadesCtrl",["Necesidad","ngNotify",function(e,r){var t=this;e.load().success(function(e){t.necesidades=e}).error(function(e){r.set(e,"error")})}]).directive("categoria",function(){return{restrict:"E",templateUrl:"scripts/necesidad/cate.html",scope:{id:"@"}}})}(),function(){"use strict";angular.module("app.necesidad.service",[]).factory("Necesidad",["$http",function(e){return{load:function(r){return e.get("/api/necesidades")},show:function(r){return e.get("/api/necesidades/"+r)},categoria:function(r){return e.get("/api/categorias/"+r)},"delete":function(r){return e["delete"]("/api/necesidades/"+r)},create:function(r){return e({data:r,method:"POST",url:"/api/necesidades"})},upload:function(r,t){return e.post("/api/necesidades/"+t+"/upload",r,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},update:function(r){return e({data:r,method:"PUT",url:"/api/necesidades/"+r.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.nueva",[]).directive("nuevaNecesidad",["Necesidad","ngNotify","$window",function(e,r,t){return{restrict:"E",templateUrl:"scripts/necesidad/nueva.html",scope:{user:"="},controllerAs:"NuevaNecesidadCtrl",bindToController:!0,controller:"NuevaNecesidadCtrl"}}]).controller("NuevaNecesidadCtrl",["Necesidad","ngNotify","$window",function(e,r,t){var n=this;n.NecesidadForm={},n.create=function(){e.create(n.NecesidadForm).success(function(e){r.set("Necesidad agregada correctamente :)","success"),t.location="#/necesidad/"+e+"/editar"}).error(function(e){r.set(e,"error")})}}])}(),angular.module("app.directives",[]).directive("money",function(){function e(e,t,n,s){function i(e){var r=Math.pow(10,d);return Math.round(e*r)/r}function o(e){return parseFloat(e).toFixed(d)}function a(e){return s.$isEmpty(e)?"":""+e}var c,u=parseFloat(n.min||0),d=parseFloat(n.precision||2);s.$parsers.push(function(e){angular.isUndefined(e)&&(e=""),0===e.indexOf(".")&&(e="0"+e),0===e.indexOf("-")&&(u>=0?(e=null,s.$setViewValue(""),s.$render()):"-"===e&&(e=""));var t=s.$isEmpty(e);return t||r.test(e)?c=""===e?null:t?e:parseFloat(e):(s.$setViewValue(a(c)),s.$render()),s.$setValidity("number",!0),c}),s.$formatters.push(a);var l=function(e){return!s.$isEmpty(e)&&u>e?void s.$setValidity("min",!1):(s.$setValidity("min",!0),e)};if(s.$parsers.push(l),s.$formatters.push(l),n.max){var p=parseFloat(n.max),f=function(e){return!s.$isEmpty(e)&&e>p?void s.$setValidity("max",!1):(s.$setValidity("max",!0),e)};s.$parsers.push(f),s.$formatters.push(f)}d>-1&&(s.$parsers.push(function(e){return e?i(e):e}),s.$formatters.push(function(e){return e?o(e):e})),t.bind("blur",function(){var e=s.$modelValue;e&&(s.$viewValue=o(e),s.$render())})}var r=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:e}}).directive("numbersOnly",function(){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){n.$parsers.push(function(e){if(void 0===e)return"";var r=e.replace(/[^0-9+.]/g,"");return r!==e&&(n.$setViewValue(r),n.$render()),r})}}}),angular.module("app.filters",[]).filter("dinero",["$filter","$locale",function(e,r){var t=e("currency"),n=r.NUMBER_FORMATS;return function(e,r,s){0===r&&(r=-1);var i=t(e,s),o=i.indexOf(n.DECIMAL_SEP)+1,a="";return o<i.indexOf(n.CURRENCY_SYM)&&(a=" "+n.CURRENCY_SYM),i.substring(0,o+r)+a}}]),function(){"use strict";angular.module("app.main",["app.directives","app.filters"]).controller("MainController",["$rootScope","$scope","User","ngNotify","socket",function(e,r,t,n,s){var i=this;i.buscar=function(e){e.length<3||(s.emit("necesidades:buscar",e),s.on("necesidades:resultado",function(e){i.resultados=e}))},t.me().success(function(e){i.user=e,e&&(t.current=e),console.log(e),t.show(e.id).success(function(e){i.user.necesidades=e.necesidades})}).error(function(e){console.log(e)}),i.palabrasClave=function(){swal({title:"Suscribirte",text:"Escribe palabras separadas por una coma para recibir notificaciones a tu correo:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Ej: gimnasios, estéticas, computación, etc"},function(e){return e?void t.subscribe({words:e}).success(function(e){swal("Suscrito correctamente",e,"success")}).error(function(e){n.set(e,"error")}):!1})},r.userAgent=navigator.userAgent,e.$on("$routeChangeStart",function(){e.loading=!0}),e.$on("$routeChangeSuccess",function(){e.loading=!1}),r.bottomReached=function(){},r.notices=[];for(var o=0;10>o;o++)r.notices.push({icon:"envelope",message:"Notice "+(o+1)});r.deleteNotice=function(e){var t=r.notices.indexOf(e);t>-1&&r.notices.splice(t,1)}}])}(),function(){"use strict";angular.module("app.socket",[]).factory("socket",["User",function(e){var r=io();return r.log=function(t){r.emit("users:logs",{log:t,date:new Date,user:e.current})},r}])}(),function(){"use strict";angular.module("app.user.config",[]).controller("ConfigCtrl",["ngNotify","User","$scope",function(e,r,t){var n=this;n.user={},r.me().success(function(e){n.user=e}).error(function(r){e.set(r,"error")}),n.save=function(){r.update(n.user).success(function(r){e.set(r,"success")}).error(function(r){e.set(r,"error")})},t.upload=function(t){console.log("Subiendo archivo");var s=new FormData;t[0]&&(s.append("file",t[0]),r.upload(s).success(function(r){e.set("Imagen guardada correctamente","success"),n.user.picture=r}).error(function(r){console.log(r),e.set(r,"error")}))}}])}(),function(){"use strict";angular.module("app.user",["app.user.service","app.user.profile","app.user.config"]).controller("UserCtrl",["ngNotify","User","$routeParams",function(e,r,t){var n=this;console.log("Cargando"),r.show(t.id).success(function(e){n.user=e,console.log("no"),console.log(e)}).error(function(r){e.set(r,"error")})}])}(),function(){"use strict";angular.module("app.user.service",[]).factory("User",["$http",function(e){return{current:{},me:function(){return e.get("/api/users/profile")},update:function(r){return e({method:"PUT",data:r,url:"/api/users/profile"})},upload:function(r){return e.post("/api/users/upload",r,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},subscribe:function(r){return e({method:"POST",data:r,url:"/api/users/subscribe"})},show:function(r){return e.get("/api/users/"+r)},all:function(){return e.get("api/admin/users")}}}])}(),function(){"use strict";angular.module("app.user.profile",[]).directive("userProfile",function(){return{restrict:"E",templateUrl:"scripts/users/profile.html",controller:"UserCtrl",controllerAs:"ctrl"}}).controller("UserCtrl",["User","ngNotify",function(e,r){var t=this;e.all().success(function(e){t.users=e}).error(function(e){r.set(e,"error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFkbWluL2FkbWluLmNvbnRyb2xsZXIuanMiLCJhZG1pbi9hZG1pbi5zZXJ2aWNlLmpzIiwiYWRtaW4vY29tZW50YXJpb3MuZGlyZWN0aXZlLmpzIiwiYWRtaW4vZGFzaGJvYXJkLmRpcmVjdGl2ZS5qcyIsImFkbWluL25lY2VzaWRhZGVzLmRpcmVjdGl2ZS5qcyIsImFkbWluL3VzZXJzLmRpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL2J1c3F1ZWRhLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9jYXRlZ29yaWEuY29udHJvbGxlci5qcyIsIm5lY2VzaWRhZC9jb21lbnRhcmlvLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9jb21lbnRhcmlvLnNlcnZpY2UuanMiLCJuZWNlc2lkYWQvZGV0YWxsZS5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL2l0ZW0uZGlyZWN0aXZlLmpzIiwibmVjZXNpZGFkL25lY2VzaWRhZC5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL25lY2VzaWRhZC5zZXJ2aWNlLmpzIiwibmVjZXNpZGFkL251ZXZhLmNvbnRyb2xsZXIuanMiLCJzaGFyZWQvZGlyZWN0aXZlcy5qcyIsInNoYXJlZC9maWx0ZXJzLmpzIiwic2hhcmVkL21haW4uanMiLCJzaGFyZWQvc29ja2V0LmpzIiwidXNlcnMvY29uZmlnLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy9jb250cm9sbGVyLmpzIiwidXNlcnMvc2VydmljZS5qcyIsInVzZXJzL3VzZXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdHJhbnNmb3JtIiwid2luZG93IiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJyZWxvYWRPblNlYXJjaCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJmYWN0b3J5IiwiJGh0dHAiLCJkYXNoIiwiZ2V0IiwidXNlciIsImlkIiwidXNlcnMiLCJuZWNlc2lkYWQiLCJuZWNlc2lkYWRlcyIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwiQ29tZW50YXJpbyIsIm5nTm90aWZ5IiwiJHJvdXRlIiwidm0iLCJ0aGlzIiwiYWxsIiwic3VjY2VzcyIsImRhdGEiLCJjb21lbnRhcmlvcyIsImVycm9yIiwiZXJyIiwic2V0Iiwic3VyZSIsImNvbmZpcm0iLCJyZWxvYWQiLCJ1cGRhdGUiLCJjb21lbnRhcmlvIiwidGV4dG8iLCJwcm9tcHQiLCJBZG1pbiIsInNvY2tldCIsImxvZ3MiLCJvbiIsImxvZyIsInB1c2giLCJOZWNlc2lkYWQiLCJsb2FkIiwiVXNlciIsIiRyb3V0ZVBhcmFtcyIsImNhdGVnb3JpYSIsImNvbnNvbGUiLCJzY29wZSIsImRlbGV0ZSIsInV0aWwiLCJwYXRjaCIsImNyZWF0ZSIsIm1ldGhvZCIsInVybCIsIm5lY2VzaWRhZElkIiwiJHdpbmRvdyIsIiRzY29wZSIsInNob3ciLCJzYXZlIiwiZW1pdCIsImNvbWVudGFyIiwiQ29tZW50YXJpb0Zvcm0iLCJjcmVhdGVkQXQiLCJEYXRlIiwibG9jYXRpb24iLCJ1cGxvYWQiLCJmaWxlcyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJjYWxsYmFjayIsImNsYXZlIiwicG9zdCIsIndpdGhDcmVkZW50aWFscyIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJiaW5kVG9Db250cm9sbGVyIiwiTmVjZXNpZGFkRm9ybSIsImxpbmsiLCJlbCIsImF0dHJzIiwibmdNb2RlbEN0cmwiLCJyb3VuZCIsIm51bSIsImQiLCJNYXRoIiwicG93IiwicHJlY2lzaW9uIiwiZm9ybWF0UHJlY2lzaW9uIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImZvcm1hdFZpZXdWYWx1ZSIsIiRpc0VtcHR5IiwibGFzdFZhbGlkVmFsdWUiLCJtaW4iLCIkcGFyc2VycyIsImlzVW5kZWZpbmVkIiwiaW5kZXhPZiIsIiRzZXRWaWV3VmFsdWUiLCIkcmVuZGVyIiwiZW1wdHkiLCJOVU1CRVJfUkVHRVhQIiwidGVzdCIsIiRzZXRWYWxpZGl0eSIsIiRmb3JtYXR0ZXJzIiwibWluVmFsaWRhdG9yIiwibWF4IiwibWF4VmFsaWRhdG9yIiwiYmluZCIsIiRtb2RlbFZhbHVlIiwiJHZpZXdWYWx1ZSIsInJlcXVpcmUiLCJlbGVtZW50IiwibW9kZWxDdHJsIiwiaW5wdXRWYWx1ZSIsInRyYW5zZm9ybWVkSW5wdXQiLCJyZXBsYWNlIiwiZmlsdGVyIiwibG9jYWxlIiwiY3VycmVuY3lGaWx0ZXIiLCJmb3JtYXRzIiwiTlVNQkVSX0ZPUk1BVFMiLCJhbW91bnQiLCJjdXJyZW5jeVN5bWJvbCIsInNlcCIsIkRFQ0lNQUxfU0VQIiwic3ltYm9sIiwiQ1VSUkVOQ1lfU1lNIiwic3Vic3RyaW5nIiwiJHJvb3RTY29wZSIsImJ1c2NhciIsImxlbmd0aCIsInJlc3VsdGFkb3MiLCJtZSIsImN1cnJlbnQiLCJwYWxhYnJhc0NsYXZlIiwic3dhbCIsInRpdGxlIiwidGV4dCIsInR5cGUiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY2xvc2VPbkNvbmZpcm0iLCJhbmltYXRpb24iLCJpbnB1dFBsYWNlaG9sZGVyIiwic3Vic2NyaWJlIiwid29yZHMiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCIkb24iLCJsb2FkaW5nIiwiYm90dG9tUmVhY2hlZCIsIm5vdGljZXMiLCJqIiwiaWNvbiIsIm1lc3NhZ2UiLCJkZWxldGVOb3RpY2UiLCJub3RpY2UiLCJpbmRleCIsInNwbGljZSIsImlvIiwiZGF0ZSIsInBpY3R1cmUiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxPQUNBLFVBQ0EsV0FDQSxlQUNBLG9CQUNBLHNCQUNBLDZCQUNBLGFBQ0EsZ0JBQ0EsWUFDQSxXQUNBLFdBQ0EsYUFFQUMsS0FBQSxhQUFBLFNBQUFDLEdBQ0FDLE9BQUFELFdBQUFB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QUFBQyxJQUNBMEIsU0FBQVAsSUFBQSxZQUVBSSxFQUFBYyxLQUFBYixFQUFBbEMsSUFDQVksUUFBQSxTQUFBQyxHQUNBSixFQUFBVixLQUFBYyxFQUNBdUIsUUFBQVAsSUFBQSxNQUNBTyxRQUFBUCxJQUFBaEIsS0FFQUUsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLGlCQ25CQSxXQUNBLFlBQ0FwQyxTQUNBQyxPQUFBLHVCQUVBYyxRQUFBLFFBQUEsUUFBQSxTQUFBQyxHQUVBLE9BQ0FvSSxXQUNBRCxHQUFBLFdBQ0EsTUFBQW5JLEdBQUFFLElBQUEsdUJBRUF1QixPQUFBLFNBQUFSLEdBQ0EsTUFBQWpCLElBQ0E4QyxPQUFBLE1BQ0E3QixLQUFBQSxFQUNBOEIsSUFBQSx3QkFHQVksT0FBQSxTQUFBRSxHQUNBLE1BQUE3RCxHQUFBa0UsS0FBQSxvQkFBQUwsR0FDQU0saUJBQUEsRUFDQUMsU0FBQUMsZUFBQUMsUUFDQUMsaUJBQUF2RixRQUFBd0YsWUFHQXNFLFVBQUEsU0FBQTdILEdBQ0EsTUFBQWpCLElBQ0E4QyxPQUFBLE9BQ0E3QixLQUFBQSxFQUNBOEIsSUFBQSwwQkFHQUksS0FBQSxTQUFBL0MsR0FDQSxNQUFBSixHQUFBRSxJQUFBLGNBQUFFLElBRUFXLElBQUEsV0FDQSxNQUFBZixHQUFBRSxJQUFBLDJCQ3JDQSxXQUNBLFlBQ0FsQixTQUNBQyxPQUFBLHVCQUNBdUIsVUFBQSxjQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBakIsWUFBQSw2QkFDQUUsV0FBQSxXQUNBQyxhQUFBLFVBR0FELFdBQUEsWUFBQSxPQUFBLFdBQUEsU0FBQTJDLEVBQUExQixHQUVBLEdBQUFFLEdBQUFDLElBRUF1QixHQUFBdEIsTUFDQUMsUUFBQSxTQUFBQyxHQUNBSixFQUFBUixNQUFBWSxJQUVBRSxNQUFBLFNBQUFDLEdBQ0FULEVBQUFVLElBQUFELEVBQUEiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICduZ1JvdXRlJyxcbiAgICAgICduZ05vdGlmeScsXG4gICAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAgICdtb2JpbGUtYW5ndWxhci11aScsXG4gICAgICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXG4gICAgICAnbW9iaWxlLWFuZ3VsYXItdWkuZ2VzdHVyZXMnLFxuICAgICAgJ2FwcC5zb2NrZXQnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQnLFxuICAgICAgJ2FwcC5hZG1pbicsXG4gICAgICAnYXBwLmhvbWUnLFxuICAgICAgJ2FwcC5tYWluJyxcbiAgICAgICdhcHAudXNlcidcbiAgICBdKVxuICAgIC5ydW4oWyckdHJhbnNmb3JtJyxmdW5jdGlvbigkdHJhbnNmb3JtKSB7XG4gICAgICB3aW5kb3cuJHRyYW5zZm9ybSA9ICR0cmFuc2Zvcm07XG4gICAgfV0pXG4gICAgLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9ob21lL3Njcm9sbC5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonSG9tZUN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonSG9tZUN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYnVzcXVlZGEnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8YnVzcXVlZGE+PC9idXNxdWVkYT4nLCAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9uZWNlc2lkYWQvOmlkJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvZGV0YWxsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOidOZWNlc2lkYWREZXRhbGxlQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidEZXRhbGxlQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9uZWNlc2lkYWQvOmlkL2VkaXRhcicsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2VkaXRhci5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOidOZWNlc2lkYWREZXRhbGxlQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidEZXRhbGxlQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9jYXRlZ29yaWEvOmNhdGVnb3JpYScsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2NhdGVnb3JpYS5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonQ2F0ZWdvcmlhQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidDYXRlZ29yaWFDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3BlcmZpbCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvdXNlcnMvY29uZmlnLmh0bWwnLFxuICAgICAgICAgIHJlbG9hZE9uU2VhcmNoOiBmYWxzZSxcbiAgICAgICAgICBjb250cm9sbGVyOidDb25maWdDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0NvbmZpZ0N0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvdXN1YXJpby86aWQnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8dXNlci1wcm9maWxlPjwvdXNlci1wcm9maWxlPidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9jb250YWN0bycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvc2hhcmVkL2NvbnRhY3RvLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcHJpdmFjaWRhZCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvc2hhcmVkL3ByaXZhY2lkYWQuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbicsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxhZG1pbi1kYXNoYm9hcmQ+PC9hZG1pbi1kYXNoYm9hcmQ+J1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FkbWluL3VzdWFyaW9zJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPHVzZXJzLWxpc3Q+PC91c2Vycy1saXN0PidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbi9uZWNlc2lkYWRlcycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxuZWNlc2lkYWRlcy1saXN0PjwvbmVjZXNpZGFkZXMtbGlzdD4nXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWRtaW4vY29tZW50YXJpb3MnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8Y29tZW50YXJpb3MtbGlzdD48L2NvbWVudGFyaW9zLWxpc3Q+J1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgICAgfSk7XG4gICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluJyxbXG4gICAgICAnYXBwLmFkbWluLnVzZXJzJyxcbiAgICAgICdhcHAuYWRtaW4ubmVjZXNpZGFkZXMnLFxuICAgICAgJ2FwcC5hZG1pbi5jb21lbnRhcmlvcycsXG4gICAgICAnYXBwLmFkbWluLmRhc2hib2FyZCcsXG4gICAgICAnYXBwLmFkbWluLnNlcnZpY2UnXG4gICAgXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLnNlcnZpY2UnLCAgW10pXG5cbiAgICAgIC5mYWN0b3J5ICgnQWRtaW4nLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRhc2g6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hZG1pbi9kYXNoJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VyOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hZG1pbi91c2Vycy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXNlcnM6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluL3VzZXJzJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuZWNlc2lkYWQ6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FkbWluL25lY2VzaWRhZGVzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuZWNlc2lkYWRlczpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdhcGkvYWRtaW4vbmVjZXNpZGFkZXMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4uY29tZW50YXJpb3MnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnY29tZW50YXJpb3NMaXN0JyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2FkbWluL2NvbWVudGFyaW9zLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5Db21lbnRhcmlvc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ0FkbWluQ29tZW50YXJpb3NDdHJsJyxbJ0NvbWVudGFyaW8nLCduZ05vdGlmeScsJyRyb3V0ZScsZnVuY3Rpb24gKENvbWVudGFyaW8sbmdOb3RpZnksJHJvdXRlKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBDb21lbnRhcmlvLmFsbCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLmNvbWVudGFyaW9zID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZtLmRlbGV0ZSA9IGZ1bmN0aW9uIG5hbWUoaWQpIHtcblxuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnwr9SZWFsbWVudGUgZGVzZWFzIGJvcnJhciBlc3RlIGNvbWVudGFyaW8/Jyk7XG5cbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgQ29tZW50YXJpby5kZWxldGUoaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnVwZGF0ZSA9IGZ1bmN0aW9uIChjb21lbnRhcmlvKSB7XG4gICAgICAgICAgdmFyIHRleHRvID0gcHJvbXB0KCdSZW1wbGF6YSBlbCB0ZXh0bycsY29tZW50YXJpby50ZXh0bylcblxuICAgICAgICAgIGNvbWVudGFyaW8udGV4dG8gPSB0ZXh0bztcbiAgICAgICAgICBDb21lbnRhcmlvLnVwZGF0ZShjb21lbnRhcmlvKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi5kYXNoYm9hcmQnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnYWRtaW5EYXNoYm9hcmQnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vZGFzaGJvYXJkLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5EYXNoQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5EYXNoQ3RybCcsWydBZG1pbicsJ25nTm90aWZ5Jywnc29ja2V0JyxmdW5jdGlvbiAoQWRtaW4sbmdOb3RpZnksc29ja2V0KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0ubG9ncyA9IFtdO1xuXG4gICAgICAgIEFkbWluLmRhc2goKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5kYXNoID0gZGF0YTtcblxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCd1c2Vyczpsb2dzJyxmdW5jdGlvbiAoZGF0YSkgeyAgICAgICAgICBcbiAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YS5sb2csJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICB2bS5sb2dzLnB1c2goZGF0YSk7XG4gICAgICAgIH0pO1xuXG5cblxuXG5cblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi5uZWNlc2lkYWRlcycsW10pXG4gICAgICAuZGlyZWN0aXZlKCduZWNlc2lkYWRlc0xpc3QnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vbmVjZXNpZGFkZXMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidBZG1pbk5lY2VzaWRhZGVzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5OZWNlc2lkYWRlc0N0cmwnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLCckcm91dGUnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHJvdXRlKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBOZWNlc2lkYWQubG9hZCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLm5lY2VzaWRhZGVzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZtLmRlbGV0ZSA9IGZ1bmN0aW9uIG5hbWUoaWQpIHtcblxuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnwr9SZWFsbWVudGUgZGVzZWFzIGJvcnJhciBlc3RhIG5lY2VzaWRhZD8nKTtcblxuICAgICAgICAgIGlmIChzdXJlKSB7XG4gICAgICAgICAgICBOZWNlc2lkYWQuZGVsZXRlKGlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi51c2VycycsW10pXG4gICAgICAuZGlyZWN0aXZlKCd1c2Vyc0xpc3QnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vdXNlcnMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidBZG1pblVzZXJzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5Vc2Vyc0N0cmwnLFsnVXNlcicsJ25nTm90aWZ5JyxmdW5jdGlvbiAoVXNlcixuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgVXNlci5hbGwoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS51c2VycyA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5ob21lJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdIb21lQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgTmVjZXNpZGFkLmxvYWQoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHZtLm5lY2VzaWRhZGVzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCAnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuYnVzcXVlZGEnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnYnVzcXVlZGEnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2J1c3F1ZWRhLmh0bWwnICAgICAgICAgICAgXG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuY2F0ZWdvcmlhJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdDYXRlZ29yaWFDdHJsJyxbJ05lY2VzaWRhZCcsJyRyb3V0ZVBhcmFtcycsZnVuY3Rpb24gKE5lY2VzaWRhZCwkcm91dGVQYXJhbXMpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG5cblxuICAgICAgICBOZWNlc2lkYWQuY2F0ZWdvcmlhKCRyb3V0ZVBhcmFtcy5jYXRlZ29yaWEpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLm5lY2VzaWRhZGVzID0gZGF0YS5uZWNlc2lkYWRlcztcbiAgICAgICAgICAgIHZtLmNhdGVnb3JpYSA9IGRhdGEuY2F0ZWdvcmlhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuY29tZW50YXJpbycsW10pXG4gICAgICAuZGlyZWN0aXZlKCdjb21lbnRhcmlvJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC9jb21lbnRhcmlvLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgY29tZW50YXJpbzogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuY29tZW50YXJpby5zZXJ2aWNlJyxbXSlcbiAgICAgIC5mYWN0b3J5KCdDb21lbnRhcmlvJyxbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRlbGV0ZTpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvY29tZW50YXJpb3MvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHV0aWw6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucGF0Y2goJy9hcGkvY29tZW50YXJpb3MvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsbDpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NvbWVudGFyaW9zLycpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY3JlYXRlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBkYXRhICAgIDogIGRhdGEsXG4gICAgICAgICAgICAgIG1ldGhvZCAgOiAnUE9TVCcsXG4gICAgICAgICAgICAgIHVybCAgICAgOiAnL2FwaS9uZWNlc2lkYWRlcy8nICsgZGF0YS5uZWNlc2lkYWRJZCArICcvY29tZW50YXJpb3MnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRhLFxuICAgICAgICAgICAgICBtZXRob2QgIDogJ1BVVCcsXG4gICAgICAgICAgICAgIHVybCAgICAgOiAnL2FwaS9jb21lbnRhcmlvcy8nICsgZGF0YS5pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH1dKVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuZGV0YWxsZScsW10pXG4gICAgICAuY29udHJvbGxlcignTmVjZXNpZGFkRGV0YWxsZUN0cmwnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLCckcm91dGVQYXJhbXMnLCckd2luZG93JywnQ29tZW50YXJpbycsJyRzY29wZScsJ3NvY2tldCcsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSwkcm91dGVQYXJhbXMsJHdpbmRvdyxDb21lbnRhcmlvLCRzY29wZSxzb2NrZXQpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5uZWNlc2lkYWQgPSB7fTtcbiAgICAgICAgdm0uQ29tZW50YXJpbyA9IHt9O1xuXG4gICAgICAgIGlmICgkcm91dGVQYXJhbXMuaWQpIHtcbiAgICAgICAgICBzb2NrZXQubG9nKCdWaWVuZG8gdW5hIG5lY2VzaWRhZCcpO1xuICAgICAgICAgIE5lY2VzaWRhZC5zaG93KCRyb3V0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHZtLm5lY2VzaWRhZCA9IGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdm0uc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgndXNlcnM6bG9ncycse2xvZzonZXN0w6EgZWRpdGFuZG8gdW5hIG5lY2VzaWRhZCA6KSd9KVxuICAgICAgICAgIE5lY2VzaWRhZC51cGRhdGUodm0ubmVjZXNpZGFkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uY29tZW50YXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICB2bS5Db21lbnRhcmlvRm9ybS5uZWNlc2lkYWRJZCA9IHZtLm5lY2VzaWRhZC5pZDtcblxuICAgICAgICAgIENvbWVudGFyaW8uY3JlYXRlKHZtLkNvbWVudGFyaW9Gb3JtKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgdm0uQ29tZW50YXJpby5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICB2bS5uZWNlc2lkYWQuY29tZW50YXJpb3MucHVzaCh2bS5Db21lbnRhcmlvKTtcbiAgICAgICAgICAgICAgdm0uQ29tZW50YXJpbyA9IHt9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ3VzZXJzOmxvZ3MnLHtsb2c6J2VzdMOhIGVsaW1pbmFuZG8gdW5hIG5lY2VzaWRhZCA6KSd9KVxuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnUmVhbG1lbnRlIGRlc2VhcyBlbGltaW5hciBlc3RhIHB1YmxpY2FjacOzbj8nKTtcbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgTmVjZXNpZGFkLmRlbGV0ZSh2bS5uZWNlc2lkYWQuaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uID0gJyMvJztcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0udXRpbCA9IGZ1bmN0aW9uIChjb21lbnRhcmlvKSB7XG5cbiAgICAgICAgICBDb21lbnRhcmlvLnV0aWwoY29tZW50YXJpby5pZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIGNvbWVudGFyaW8udXRpbCA9IHRydWU7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS51cGxvYWQgPSBmdW5jdGlvbihmaWxlcykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWJpZW5kbyBhcmNoaXZvJyk7XG4gICAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgICBpZiAoZmlsZXNbMF0pIHtcbiAgICAgICAgICAgIGZkLmFwcGVuZChcImZpbGVcIiwgZmlsZXNbMF0pO1xuXG4gICAgICAgICAgICBOZWNlc2lkYWQudXBsb2FkKGZkLCRyb3V0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLml0ZW0nLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnbmVjZXNpZGFkSXRlbScsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvaXRlbS5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgIG5lY2VzaWRhZDogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkJyxbXG4gICAgICAnYXBwLm5lY2VzaWRhZC5zZXJ2aWNlJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLm51ZXZhJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLml0ZW0nLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuZGV0YWxsZScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5jYXRlZ29yaWEnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuY29tZW50YXJpbycsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5idXNxdWVkYScsXG4gICAgICAnYXBwLmNvbWVudGFyaW8uc2VydmljZSdcbiAgICBdKVxuICAgICAgLmNvbnRyb2xsZXIoJ05lY2VzaWRhZGVzQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgTmVjZXNpZGFkLmxvYWQoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHZtLm5lY2VzaWRhZGVzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCAnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pXG4gICAgICAuZGlyZWN0aXZlKCdjYXRlZ29yaWEnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvY2F0ZS5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgICAgaWQ6J0AnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5zZXJ2aWNlJyxbXSlcbiAgICAgIC5mYWN0b3J5KCdOZWNlc2lkYWQnLFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbG9hZDpmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbmVjZXNpZGFkZXMnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNob3c6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL25lY2VzaWRhZGVzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjYXRlZ29yaWE6ZnVuY3Rpb24gKGNsYXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NhdGVnb3JpYXMvJyArIGNsYXZlKTtcbiAgICAgICAgICB9LCAgICAgICAgICBcbiAgICAgICAgICBkZWxldGU6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL25lY2VzaWRhZGVzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjcmVhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL25lY2VzaWRhZGVzJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGxvYWQ6ZnVuY3Rpb24gKGZkLGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9uZWNlc2lkYWRlcy8nICsgaWQgKyAnL3VwbG9hZCcsIGZkLCB7XG4gICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGRhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQVVQnLFxuICAgICAgICAgICAgICB1cmwgICAgIDogJy9hcGkvbmVjZXNpZGFkZXMvJyArIGRhdGEuaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB9XSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLm51ZXZhJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ251ZXZhTmVjZXNpZGFkJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JywnJHdpbmRvdycsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSwkd2luZG93KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC9udWV2YS5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgIHVzZXI6ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJOdWV2YU5lY2VzaWRhZEN0cmxcIixcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTnVldmFOZWNlc2lkYWRDdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9XSlcbiAgICAgIC5jb250cm9sbGVyKCdOdWV2YU5lY2VzaWRhZEN0cmwnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLCckd2luZG93JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5LCR3aW5kb3dcbiAgICAgICkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLk5lY2VzaWRhZEZvcm0gPSB7fTtcblxuICAgICAgICB2bS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgTmVjZXNpZGFkLmNyZWF0ZSh2bS5OZWNlc2lkYWRGb3JtKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KCdOZWNlc2lkYWQgYWdyZWdhZGEgY29ycmVjdGFtZW50ZSA6KScsJ3N1Y2Nlc3MnKTsgJHdpbmRvdy5sb2NhdGlvbiA9ICcjL25lY2VzaWRhZC8nICsgZGF0YSArICcvZWRpdGFyJztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbXSlcbiAgLmRpcmVjdGl2ZSgnbW9uZXknLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgTlVNQkVSX1JFR0VYUCA9IC9eXFxzKihcXC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpXFxzKiQvO1xuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWwsIGF0dHJzLCBuZ01vZGVsQ3RybCkge1xuICAgICAgdmFyIG1pbiA9IHBhcnNlRmxvYXQoYXR0cnMubWluIHx8IDApO1xuICAgICAgdmFyIHByZWNpc2lvbiA9IHBhcnNlRmxvYXQoYXR0cnMucHJlY2lzaW9uIHx8IDIpO1xuICAgICAgdmFyIGxhc3RWYWxpZFZhbHVlO1xuXG4gICAgICBmdW5jdGlvbiByb3VuZChudW0pIHtcbiAgICAgICAgdmFyIGQgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogZCkgLyBkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmb3JtYXRQcmVjaXNpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpLnRvRml4ZWQocHJlY2lzaW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9ybWF0Vmlld1ZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSkgPyAnJyA6ICcnICsgdmFsdWU7XG4gICAgICB9XG5cblxuICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBsZWFkaW5nIGRlY2ltYWwgcG9pbnQsIGxpa2UgXCIuNVwiXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCcuJykgPT09IDApIHtcbiAgICAgICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWxsb3cgXCItXCIgaW5wdXRzIG9ubHkgd2hlbiBtaW4gPCAwXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCctJykgPT09IDApIHtcbiAgICAgICAgICBpZiAobWluID49IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoJycpO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICctJykge1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZW1wdHkgPSBuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSk7XG4gICAgICAgIGlmIChlbXB0eSB8fCBOVU1CRVJfUkVHRVhQLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgbGFzdFZhbGlkVmFsdWUgPSAodmFsdWUgPT09ICcnKVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogKGVtcHR5ID8gdmFsdWUgOiBwYXJzZUZsb2F0KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVuZGVyIHRoZSBsYXN0IHZhbGlkIGlucHV0IGluIHRoZSBmaWVsZFxuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoZm9ybWF0Vmlld1ZhbHVlKGxhc3RWYWxpZFZhbHVlKSk7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdudW1iZXInLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGxhc3RWYWxpZFZhbHVlO1xuICAgICAgfSk7XG4gICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZvcm1hdFZpZXdWYWx1ZSk7XG5cbiAgICAgIHZhciBtaW5WYWxpZGF0b3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoIW5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSAmJiB2YWx1ZSA8IG1pbikge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWluJywgZmFsc2UpO1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtaW4nLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKG1pblZhbGlkYXRvcik7XG4gICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKG1pblZhbGlkYXRvcik7XG5cbiAgICAgIGlmIChhdHRycy5tYXgpIHtcbiAgICAgICAgdmFyIG1heCA9IHBhcnNlRmxvYXQoYXR0cnMubWF4KTtcbiAgICAgICAgdmFyIG1heFZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSkgJiYgdmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWF4JywgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtYXgnLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChtYXhWYWxpZGF0b3IpO1xuICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKG1heFZhbGlkYXRvcik7XG4gICAgICB9XG5cbiAgICAgIC8vIFJvdW5kIG9mZlxuICAgICAgaWYgKHByZWNpc2lvbiA+IC0xKSB7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gcm91bmQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZSA/IGZvcm1hdFByZWNpc2lvbih2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGVsLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlID0gZm9ybWF0UHJlY2lzaW9uKHZhbHVlKTtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgbGluazogbGlua1xuICAgIH07XG4gIH0pLmRpcmVjdGl2ZSgnbnVtYmVyc09ubHknLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtb2RlbEN0cmwpIHtcbiAgICAgICAgbW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24gKGlucHV0VmFsdWUpIHtcbiAgICAgICAgICAvLyB0aGlzIG5leHQgaWYgaXMgbmVjZXNzYXJ5IGZvciB3aGVuIHVzaW5nIG5nLXJlcXVpcmVkIG9uIHlvdXIgaW5wdXQuXG4gICAgICAgICAgLy8gSW4gc3VjaCBjYXNlcywgd2hlbiBhIGxldHRlciBpcyB0eXBlZCBmaXJzdCwgdGhpcyBwYXJzZXIgd2lsbCBiZSBjYWxsZWRcbiAgICAgICAgICAvLyBhZ2FpbiwgYW5kIHRoZSAybmQgdGltZSwgdGhlIHZhbHVlIHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgaWYgKGlucHV0VmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgICAgICAgIHZhciB0cmFuc2Zvcm1lZElucHV0ID0gaW5wdXRWYWx1ZS5yZXBsYWNlKC9bXjAtOSsuXS9nLCAnJyk7XG4gICAgICAgICAgaWYgKHRyYW5zZm9ybWVkSW5wdXQhPT1pbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSh0cmFuc2Zvcm1lZElucHV0KTtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkSW5wdXQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJyxbXSlcbiAgLmZpbHRlcignZGluZXJvJyxcbiAgWyAnJGZpbHRlcicsICckbG9jYWxlJywgZnVuY3Rpb24oZmlsdGVyLCBsb2NhbGUpIHtcbiAgICB2YXIgY3VycmVuY3lGaWx0ZXIgPSBmaWx0ZXIoJ2N1cnJlbmN5Jyk7XG4gICAgdmFyIGZvcm1hdHMgPSBsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFtb3VudCwgbnVtLCBjdXJyZW5jeVN5bWJvbCkge1xuICAgICAgaWYgKG51bT09PTApIG51bSA9IC0xO1xuICAgICAgdmFyIHZhbHVlID0gY3VycmVuY3lGaWx0ZXIoYW1vdW50LCBjdXJyZW5jeVN5bWJvbCk7XG4gICAgICB2YXIgc2VwID0gdmFsdWUuaW5kZXhPZihmb3JtYXRzLkRFQ0lNQUxfU0VQKSsxO1xuICAgICAgdmFyIHN5bWJvbCA9ICcnO1xuICAgICAgaWYgKHNlcDx2YWx1ZS5pbmRleE9mKGZvcm1hdHMuQ1VSUkVOQ1lfU1lNKSkgc3ltYm9sID0gJyAnK2Zvcm1hdHMuQ1VSUkVOQ1lfU1lNO1xuICAgICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZygwLCBzZXArbnVtKStzeW1ib2w7XG4gICAgfTtcbiAgfSBdKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyXG4gICAgICAubW9kdWxlKCdhcHAubWFpbicsIFtcbiAgICAgICdhcHAuZGlyZWN0aXZlcycsXG4gICAgICAnYXBwLmZpbHRlcnMnXG4gICAgXSlcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLFsnJHJvb3RTY29wZScsJyRzY29wZScsJ1VzZXInLCduZ05vdGlmeScsJ3NvY2tldCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgVXNlciwgbmdOb3RpZnksc29ja2V0KXtcblxuICAgICAgdmFyIHZtID0gdGhpcztcblxuXG4gICAgICB2bS5idXNjYXIgPSBmdW5jdGlvbiAoYnVzY2FyKSB7XG4gICAgICAgIGlmIChidXNjYXIubGVuZ3RoPDMpIHtcbiAgICAgICAgICByZXR1cm4gO1xuICAgICAgICB9XG4gICAgICAgIHNvY2tldC5lbWl0KCduZWNlc2lkYWRlczpidXNjYXInLGJ1c2Nhcik7XG4gICAgICAgIHNvY2tldC5vbignbmVjZXNpZGFkZXM6cmVzdWx0YWRvJyxmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHZtLnJlc3VsdGFkb3MgPSBkYXRhO1xuICAgICAgICB9KTtcblxuICAgICAgfTtcblxuXG5cbiAgICAgIFVzZXIubWUoKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHZtLnVzZXIgPSBkYXRhO1xuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBVc2VyLmN1cnJlbnQgPSBkYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxuXG4gICAgICAgICAgVXNlci5zaG93KGRhdGEuaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICB2bS51c2VyLm5lY2VzaWRhZGVzID0gZGF0YS5uZWNlc2lkYWRlcztcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgdm0ucGFsYWJyYXNDbGF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3dhbCh7XG4gICAgICAgICAgdGl0bGU6IFwiU3VzY3JpYmlydGVcIixcbiAgICAgICAgICB0ZXh0OiBcIkVzY3JpYmUgcGFsYWJyYXMgc2VwYXJhZGFzIHBvciB1bmEgY29tYSBwYXJhIHJlY2liaXIgbm90aWZpY2FjaW9uZXMgYSB0dSBjb3JyZW86XCIsXG4gICAgICAgICAgdHlwZTogXCJpbnB1dFwiLFxuICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgIGFuaW1hdGlvbjogXCJzbGlkZS1mcm9tLXRvcFwiLFxuICAgICAgICAgIGlucHV0UGxhY2Vob2xkZXI6IFwiRWo6IGdpbW5hc2lvcywgZXN0w6l0aWNhcywgY29tcHV0YWNpw7NuLCBldGNcIlxuICAgICAgICB9LCBmdW5jdGlvbihpbnB1dFZhbHVlKXtcbiAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSkge1xuXG4gICAgICAgICAgICBVc2VyLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgIHdvcmRzOmlucHV0VmFsdWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzd2FsKCdTdXNjcml0byBjb3JyZWN0YW1lbnRlJywgZGF0YSwgXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG5cbiAgICAgIC8vIFVzZXIgYWdlbnQgZGlzcGxheWVkIGluIGhvbWUgcGFnZVxuICAgICAgJHNjb3BlLnVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cbiAgICAgIC8vIE5lZWRlZCBmb3IgdGhlIGxvYWRpbmcgc2NyZWVuXG4gICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpe1xuICAgICAgICAkcm9vdFNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgJHJvb3RTY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcblxuXG5cbiAgICAgICRzY29wZS5ib3R0b21SZWFjaGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8qIGdsb2JhbCBhbGVydDogZmFsc2U7ICovXG4gICAgICAgIC8vIGFsZXJ0KCdDb25ncmF0cyB5b3Ugc2Nyb2xsZWQgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCEnKTtcbiAgICAgIH07XG5cblxuICAgICAgLy9cbiAgICAgIC8vICdEcmFnJyBzY3JlZW5cbiAgICAgIC8vXG4gICAgICAkc2NvcGUubm90aWNlcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgJHNjb3BlLm5vdGljZXMucHVzaCh7aWNvbjogJ2VudmVsb3BlJywgbWVzc2FnZTogJ05vdGljZSAnICsgKGogKyAxKSB9KTtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLmRlbGV0ZU5vdGljZSA9IGZ1bmN0aW9uKG5vdGljZSkge1xuICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUubm90aWNlcy5pbmRleE9mKG5vdGljZSk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgJHNjb3BlLm5vdGljZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnNvY2tldCcsW10pXG4gICAgICAuZmFjdG9yeSgnc29ja2V0JyxbJ1VzZXInLGZ1bmN0aW9uIChVc2VyKSB7XG5cbiAgICAgICAgdmFyIHNvY2tldCA9IGlvKCk7XG4gICAgICAgIHNvY2tldC5sb2cgPSBmdW5jdGlvbiAodGV4dG8pIHtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgndXNlcnM6bG9ncycse1xuICAgICAgICAgICAgbG9nOnRleHRvLFxuICAgICAgICAgICAgZGF0ZTpuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXNlcjpVc2VyLmN1cnJlbnRcbiAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzb2NrZXQ7XG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVzZXIuY29uZmlnJywgW10pXG4gICAgLmNvbnRyb2xsZXIoJ0NvbmZpZ0N0cmwnLFsnbmdOb3RpZnknLCdVc2VyJywnJHNjb3BlJyxmdW5jdGlvbihuZ05vdGlmeSxVc2VyLCRzY29wZSl7XG5cbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS51c2VyID0ge307XG5cbiAgICAgIFVzZXIubWUoKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAgKGRhdGEpIHtcbiAgICAgICAgICB2bS51c2VyID0gZGF0YTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHZtLnNhdmUgPSBmdW5jdGlvbiAgKCkge1xuICAgICAgICBVc2VyLnVwZGF0ZSh2bS51c2VyKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnVwbG9hZCA9IGZ1bmN0aW9uKGZpbGVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTdWJpZW5kbyBhcmNoaXZvJyk7XG4gICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAvL1Rha2UgdGhlIGZpcnN0IHNlbGVjdGVkIGZpbGVcblxuICAgICAgICBpZiAoZmlsZXNbMF0pIHtcbiAgICAgICAgICBmZC5hcHBlbmQoXCJmaWxlXCIsIGZpbGVzWzBdKTtcblxuICAgICAgICAgIFVzZXIudXBsb2FkKGZkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KCdJbWFnZW4gZ3VhcmRhZGEgY29ycmVjdGFtZW50ZScsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgdm0udXNlci5waWN0dXJlID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cblxuICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyJywgW1xuICAgICdhcHAudXNlci5zZXJ2aWNlJyxcbiAgICAnYXBwLnVzZXIucHJvZmlsZScsXG4gICAgJ2FwcC51c2VyLmNvbmZpZycgLy8gZWRpdGFyIHBlcmZpbCBkZWwgdXN1YXJpbyB5IHN1IGNvbmZpZ3VyYWNpw7NuXG4gIF0pXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJyxbJ25nTm90aWZ5JywnVXNlcicsJyRyb3V0ZVBhcmFtcycsZnVuY3Rpb24obmdOb3RpZnksVXNlciwkcm91dGVQYXJhbXMpe1xuXG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgY29uc29sZS5sb2coJ0NhcmdhbmRvJyk7XG5cbiAgICAgIFVzZXIuc2hvdygkcm91dGVQYXJhbXMuaWQpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uICAoZGF0YSkge1xuICAgICAgICAgICAgdm0udXNlciA9IGRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbm8nKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24gIChlcnIpIHtcbiAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICB9KTtcblxuICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC51c2VyLnNlcnZpY2UnLCAgW10pXG5cbiAgICAgIC5mYWN0b3J5ICgnVXNlcicsIFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY3VycmVudDp7fSxcbiAgICAgICAgICBtZTpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzL3Byb2ZpbGUnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICAgICAgICBkYXRhOmRhdGEsXG4gICAgICAgICAgICAgIHVybDonL2FwaS91c2Vycy9wcm9maWxlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGxvYWQ6ZnVuY3Rpb24gKGZkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2Vycy91cGxvYWQnLCBmZCwge1xuICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3Vic2NyaWJlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxuICAgICAgICAgICAgICBkYXRhOmRhdGEsXG4gICAgICAgICAgICAgIHVybDonL2FwaS91c2Vycy9zdWJzY3JpYmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNob3c6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGw6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluL3VzZXJzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnVzZXIucHJvZmlsZScsW10pXG4gICAgICAuZGlyZWN0aXZlKCd1c2VyUHJvZmlsZScsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy91c2Vycy9wcm9maWxlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonVXNlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJyxbJ1VzZXInLCduZ05vdGlmeScsZnVuY3Rpb24gKFVzZXIsbmdOb3RpZnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIFVzZXIuYWxsKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0udXNlcnMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
