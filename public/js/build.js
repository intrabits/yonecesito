!function(){"use strict";angular.module("app",["ngRoute","ngNotify","ui.bootstrap","mobile-angular-ui","angular-loading-bar","mobile-angular-ui.gestures","app.socket","app.necesidad","app.admin","app.home","app.main","app.user"]).run(["$transform",function(e){window.$transform=e}]).run(["$rootScope",function(e){e.$on("$routeChangeSuccess",function(r,t,n){e.title=t.$$route.title})}]).config(["$routeProvider","$locationProvider",function(e,r){e.when("/",{templateUrl:"scripts/home/scroll.html",reloadOnSearch:!1,controller:"HomeCtrl",controllerAs:"HomeCtrl"}).when("/busqueda",{template:"<busqueda></busqueda>"}).when("/necesidad/:id",{templateUrl:"scripts/necesidad/views/detalle.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/necesidad/:id/editar",{templateUrl:"scripts/necesidad/views/editar.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/categoria/:categoria",{templateUrl:"scripts/necesidad/views/categoria.html",reloadOnSearch:!1,controller:"CategoriaCtrl",controllerAs:"CategoriaCtrl"}).when("/perfil",{templateUrl:"scripts/users/config.html",reloadOnSearch:!1,controller:"ConfigCtrl",controllerAs:"ConfigCtrl"}).when("/usuario/:id",{template:"<user-profile></user-profile>"}).when("/contacto",{templateUrl:"scripts/shared/contacto.html"}).when("/privacidad",{templateUrl:"scripts/shared/privacidad.html"}).when("/admin",{template:"<admin-dashboard></admin-dashboard>"}).when("/admin/usuarios",{template:"<users-list></users-list>"}).when("/admin/necesidades",{template:"<necesidades-list></necesidades-list>"}).when("/admin/comentarios",{template:"<comentarios-list></comentarios-list>"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("app.admin",["app.admin.users","app.admin.necesidades","app.admin.comentarios","app.admin.dashboard","app.admin.service"])}(),function(){"use strict";angular.module("app.admin.service",[]).factory("Admin",["$http",function(e){return{dash:function(){return e.get("/api/admin/dash")},user:function(r){return e.get("/api/admin/users/"+r)},users:function(){return e.get("api/admin/users")},necesidad:function(r){return e.get("/api/admin/necesidades/"+r)},necesidades:function(){return e.get("api/admin/necesidades")}}}])}(),function(){"use strict";angular.module("app.admin.comentarios",[]).directive("comentariosList",function(){return{restrict:"E",templateUrl:"scripts/admin/comentarios.html",controller:"AdminComentariosCtrl",controllerAs:"ctrl"}}).controller("AdminComentariosCtrl",["Comentario","ngNotify","$route",function(e,r,t){var n=this;e.all().success(function(e){n.comentarios=e}).error(function(e){r.set(e,"error")}),n["delete"]=function(n){var s=confirm("¿Realmente deseas borrar este comentario?");s&&e["delete"](n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})},n.update=function(n){var s=prompt("Remplaza el texto",n.texto);n.texto=s,e.update(n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.dashboard",[]).directive("adminDashboard",function(){return{restrict:"E",templateUrl:"scripts/admin/dashboard.html",controller:"AdminDashCtrl",controllerAs:"ctrl"}}).controller("AdminDashCtrl",["Admin","ngNotify","socket",function(e,r,t){var n=this;n.logs=[],e.dash().success(function(e){n.dash=e}).error(function(e){r.set(e,"error")}),t.on("users:logs",function(e){r.set(e.log,"success"),n.logs.push(e)})}])}(),function(){"use strict";angular.module("app.admin.necesidades",[]).directive("necesidadesList",function(){return{restrict:"E",templateUrl:"scripts/admin/necesidades.html",controller:"AdminNecesidadesCtrl",controllerAs:"ctrl"}}).controller("AdminNecesidadesCtrl",["Necesidad","ngNotify","$route",function(e,r,t){var n=this;e.load().success(function(e){n.necesidades=e}).error(function(e){r.set(e,"error")}),n["delete"]=function(n){var s=confirm("¿Realmente deseas borrar esta necesidad?");s&&e["delete"](n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.users",[]).directive("usersList",function(){return{restrict:"E",templateUrl:"scripts/admin/users.html",controller:"AdminUsersCtrl",controllerAs:"ctrl"}}).controller("AdminUsersCtrl",["User","ngNotify",function(e,r){var t=this;e.all().success(function(e){t.users=e}).error(function(e){r.set(e,"error")})}])}(),function(){"use strict";angular.module("app.home",[]).controller("HomeCtrl",["Necesidad","ngNotify",function(e,r){var t=this;e.load().success(function(e){t.necesidades=e}).error(function(e){r.set(e,"error")})}])}(),function(){"use strict";angular.module("app.necesidad.busqueda",[]).directive("busqueda",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/busqueda.html"}})}(),function(){"use strict";angular.module("app.necesidad.categoria",[]).controller("CategoriaCtrl",["Necesidad","$routeParams",function(e,r){var t=this;e.categoria(r.categoria).success(function(e){t.necesidades=e.necesidades,t.categoria=e.categoria}).error(function(e){console.error(e)})}])}(),function(){"use strict";angular.module("app.necesidad.comentario",[]).directive("comentario",function(){return{restrict:"E",templateUrl:"scripts/necesidad/comentario.html",scope:{comentario:"="}}})}(),function(){"use strict";angular.module("app.comentario.service",[]).factory("Comentario",["$http",function(e){return{"delete":function(r){return e["delete"]("/api/comentarios/"+r)},util:function(r){return e.patch("/api/comentarios/"+r)},all:function(){return e.get("/api/comentarios/")},create:function(r){return e({data:r,method:"POST",url:"/api/necesidades/"+r.necesidadId+"/comentarios"})},update:function(r){return e({data:r,method:"PUT",url:"/api/comentarios/"+r.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.detalle",[]).controller("NecesidadDetalleCtrl",["Necesidad","ngNotify","$routeParams","$window","Comentario","$scope","socket","$rootScope",function(e,r,t,n,s,i,o,a){var c=this;c.necesidad={},c.Comentario={},t.id&&(o.log("Viendo una necesidad"),e.show(t.id).success(function(e){c.necesidad=e,a.title=e.titulo}).error(function(e){r.set(e,"error")})),c.save=function(){o.log("editando una necesidad"),e.update(c.necesidad).success(function(e){r.set(e,"success")}).error(function(e){r.set(e,"error")})},c.comentar=function(){c.ComentarioForm.necesidadId=c.necesidad.id,o.log("comentando una necesidad"),s.create(c.ComentarioForm).success(function(e){r.set(e,"success"),c.Comentario.createdAt=new Date,c.necesidad.comentarios.push(c.Comentario),c.Comentario={}}).error(function(e){r.set(e,"error")})},c["delete"]=function(){o.log("eliminando una necesidad");var t=confirm("Realmente deseas eliminar esta publicación?");t&&e["delete"](c.necesidad.id).success(function(e){r.set(e,"success"),n.location="#/"}).error(function(e){r.set(e,"error")})},c.util=function(e){o.log('marcando un comentario como "útil"'),s.util(e.id).success(function(t){e.util=!0,r.set(t,"success")}).error(function(e){r.set(e,"error")})},i.upload=function(n){o.log("agregando foto a una necesidad");var s=new FormData;n[0]&&(s.append("file",n[0]),e.upload(s,t.id).success(function(e){r.set(e,"success"),console.log(e)}).error(function(e){console.log(e),r.set(e,"error")}))}}])}(),function(){"use strict";angular.module("app.necesidad.item",[]).directive("necesidadItem",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/item.html",scope:{necesidad:"="}}})}(),function(){"use strict";angular.module("app.necesidad",["app.necesidad.service","app.necesidad.nueva","app.necesidad.item","app.necesidad.detalle","app.necesidad.categoria","app.necesidad.comentario","app.necesidad.busqueda","app.comentario.service"]).controller("NecesidadesCtrl",["Necesidad","ngNotify",function(e,r){var t=this;e.load().success(function(e){t.necesidades=e}).error(function(e){r.set(e,"error")})}]).directive("categoria",function(){return{restrict:"E",templateUrl:"scripts/necesidad/cate.html",scope:{id:"@"}}})}(),function(){"use strict";angular.module("app.necesidad.service",[]).factory("Necesidad",["$http",function(e){return{load:function(r){return e.get("/api/necesidades")},show:function(r){return e.get("/api/necesidades/"+r)},categoria:function(r){return e.get("/api/categorias/"+r)},"delete":function(r){return e["delete"]("/api/necesidades/"+r)},create:function(r){return e({data:r,method:"POST",url:"/api/necesidades"})},upload:function(r,t){return e.post("/api/necesidades/"+t+"/upload",r,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},update:function(r){return e({data:r,method:"PUT",url:"/api/necesidades/"+r.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.nueva",[]).directive("nuevaNecesidad",["Necesidad","ngNotify","$window",function(e,r,t){return{restrict:"E",templateUrl:"scripts/necesidad/nueva.html",scope:{user:"="},controllerAs:"NuevaNecesidadCtrl",bindToController:!0,controller:"NuevaNecesidadCtrl"}}]).controller("NuevaNecesidadCtrl",["Necesidad","ngNotify","$window",function(e,r,t){var n=this;n.NecesidadForm={},n.create=function(){e.create(n.NecesidadForm).success(function(e){r.set("Necesidad agregada correctamente :)","success"),t.location="#/necesidad/"+e+"/editar"}).error(function(e){r.set(e,"error")})}}])}(),angular.module("app.directives",[]).directive("money",function(){function e(e,t,n,s){function i(e){var r=Math.pow(10,d);return Math.round(e*r)/r}function o(e){return parseFloat(e).toFixed(d)}function a(e){return s.$isEmpty(e)?"":""+e}var c,u=parseFloat(n.min||0),d=parseFloat(n.precision||2);s.$parsers.push(function(e){angular.isUndefined(e)&&(e=""),0===e.indexOf(".")&&(e="0"+e),0===e.indexOf("-")&&(u>=0?(e=null,s.$setViewValue(""),s.$render()):"-"===e&&(e=""));var t=s.$isEmpty(e);return t||r.test(e)?c=""===e?null:t?e:parseFloat(e):(s.$setViewValue(a(c)),s.$render()),s.$setValidity("number",!0),c}),s.$formatters.push(a);var l=function(e){return!s.$isEmpty(e)&&u>e?void s.$setValidity("min",!1):(s.$setValidity("min",!0),e)};if(s.$parsers.push(l),s.$formatters.push(l),n.max){var p=parseFloat(n.max),f=function(e){return!s.$isEmpty(e)&&e>p?void s.$setValidity("max",!1):(s.$setValidity("max",!0),e)};s.$parsers.push(f),s.$formatters.push(f)}d>-1&&(s.$parsers.push(function(e){return e?i(e):e}),s.$formatters.push(function(e){return e?o(e):e})),t.bind("blur",function(){var e=s.$modelValue;e&&(s.$viewValue=o(e),s.$render())})}var r=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:e}}).directive("numbersOnly",function(){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){n.$parsers.push(function(e){if(void 0===e)return"";var r=e.replace(/[^0-9+.]/g,"");return r!==e&&(n.$setViewValue(r),n.$render()),r})}}}),angular.module("app.filters",[]).filter("dinero",["$filter","$locale",function(e,r){var t=e("currency"),n=r.NUMBER_FORMATS;return function(e,r,s){0===r&&(r=-1);var i=t(e,s),o=i.indexOf(n.DECIMAL_SEP)+1,a="";return o<i.indexOf(n.CURRENCY_SYM)&&(a=" "+n.CURRENCY_SYM),i.substring(0,o+r)+a}}]),function(){"use strict";angular.module("app.main",["app.directives","app.filters"]).controller("MainController",["$rootScope","$scope","User","ngNotify","socket",function(e,r,t,n,s){var i=this;i.buscar=function(e){e.length<1||(s.emit("necesidades:buscar",e),s.on("necesidades:resultado",function(e){i.resultados=e}))},t.me().success(function(e){i.user=e,e&&(t.current=e),console.log(e),t.show(e.id).success(function(e){i.user.necesidades=e.necesidades})}).error(function(e){console.log(e)}),i.palabrasClave=function(){swal({title:"Suscribirte",text:"Escribe palabras separadas por una coma para recibir notificaciones a tu correo:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Ej: gimnasios, estéticas, computación, etc"},function(e){return e?void t.subscribe({words:e}).success(function(e){swal("Suscrito correctamente",e,"success")}).error(function(e){n.set(e,"error")}):!1})},r.userAgent=navigator.userAgent,e.$on("$routeChangeStart",function(){e.loading=!0}),e.$on("$routeChangeSuccess",function(){e.loading=!1}),r.bottomReached=function(){},r.notices=[];for(var o=0;10>o;o++)r.notices.push({icon:"envelope",message:"Notice "+(o+1)});r.deleteNotice=function(e){var t=r.notices.indexOf(e);t>-1&&r.notices.splice(t,1)}}])}(),function(){"use strict";angular.module("app.socket",[]).factory("socket",["User",function(e){var r=io();return r.log=function(t){r.emit("users:logs",{log:t,date:new Date,user:e.current})},r}])}(),function(){"use strict";angular.module("app.user.config",[]).controller("ConfigCtrl",["ngNotify","User","$scope",function(e,r,t){var n=this;n.user={},r.me().success(function(e){n.user=e}).error(function(r){e.set(r,"error")}),n.save=function(){r.update(n.user).success(function(r){e.set(r,"success")}).error(function(r){e.set(r,"error")})},t.upload=function(t){console.log("Subiendo archivo");var s=new FormData;t[0]&&(s.append("file",t[0]),r.upload(s).success(function(r){e.set("Imagen guardada correctamente","success"),n.user.picture=r}).error(function(r){console.log(r),e.set(r,"error")}))}}])}(),function(){"use strict";angular.module("app.user",["app.user.service","app.user.profile","app.user.config"]).controller("UserCtrl",["ngNotify","User","$routeParams",function(e,r,t){var n=this;console.log("Cargando"),r.show(t.id).success(function(e){n.user=e,console.log("no"),console.log(e)}).error(function(r){e.set(r,"error")})}])}(),function(){"use strict";angular.module("app.user.service",[]).factory("User",["$http",function(e){return{current:{},me:function(){return e.get("/api/users/profile")},update:function(r){return e({method:"PUT",data:r,url:"/api/users/profile"})},upload:function(r){return e.post("/api/users/upload",r,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},subscribe:function(r){return e({method:"POST",data:r,url:"/api/users/subscribe"})},show:function(r){return e.get("/api/users/"+r)},all:function(){return e.get("api/admin/users")}}}])}(),function(){"use strict";angular.module("app.user.profile",[]).directive("userProfile",function(){return{restrict:"E",templateUrl:"scripts/users/profile.html",controller:"UserCtrl",controllerAs:"ctrl"}}).controller("UserCtrl",["User","ngNotify",function(e,r){var t=this;e.all().success(function(e){t.users=e}).error(function(e){r.set(e,"error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFkbWluL2FkbWluLmNvbnRyb2xsZXIuanMiLCJhZG1pbi9hZG1pbi5zZXJ2aWNlLmpzIiwiYWRtaW4vY29tZW50YXJpb3MuZGlyZWN0aXZlLmpzIiwiYWRtaW4vZGFzaGJvYXJkLmRpcmVjdGl2ZS5qcyIsImFkbWluL25lY2VzaWRhZGVzLmRpcmVjdGl2ZS5qcyIsImFkbWluL3VzZXJzLmRpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL2J1c3F1ZWRhLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9jYXRlZ29yaWEuY29udHJvbGxlci5qcyIsIm5lY2VzaWRhZC9jb21lbnRhcmlvLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9jb21lbnRhcmlvLnNlcnZpY2UuanMiLCJuZWNlc2lkYWQvZGV0YWxsZS5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL2l0ZW0uZGlyZWN0aXZlLmpzIiwibmVjZXNpZGFkL25lY2VzaWRhZC5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL25lY2VzaWRhZC5zZXJ2aWNlLmpzIiwibmVjZXNpZGFkL251ZXZhLmNvbnRyb2xsZXIuanMiLCJzaGFyZWQvZGlyZWN0aXZlcy5qcyIsInNoYXJlZC9maWx0ZXJzLmpzIiwic2hhcmVkL21haW4uanMiLCJzaGFyZWQvc29ja2V0LmpzIiwidXNlcnMvY29uZmlnLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy9jb250cm9sbGVyLmpzIiwidXNlcnMvc2VydmljZS5qcyIsInVzZXJzL3VzZXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdHJhbnNmb3JtIiwid2luZG93IiwiJHJvb3RTY29wZSIsIiRvbiIsImV2ZW50IiwiY3VycmVudCIsInByZXZpb3VzIiwidGl0bGUiLCIkJHJvdXRlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsInJlbG9hZE9uU2VhcmNoIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkaHR0cCIsImRhc2giLCJnZXQiLCJ1c2VyIiwiaWQiLCJ1c2VycyIsIm5lY2VzaWRhZCIsIm5lY2VzaWRhZGVzIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJDb21lbnRhcmlvIiwibmdOb3RpZnkiLCIkcm91dGUiLCJ2bSIsInRoaXMiLCJhbGwiLCJzdWNjZXNzIiwiZGF0YSIsImNvbWVudGFyaW9zIiwiZXJyb3IiLCJlcnIiLCJzZXQiLCJzdXJlIiwiY29uZmlybSIsInJlbG9hZCIsInVwZGF0ZSIsImNvbWVudGFyaW8iLCJ0ZXh0byIsInByb21wdCIsIkFkbWluIiwic29ja2V0IiwibG9ncyIsIm9uIiwibG9nIiwicHVzaCIsIk5lY2VzaWRhZCIsImxvYWQiLCJVc2VyIiwiJHJvdXRlUGFyYW1zIiwiY2F0ZWdvcmlhIiwiY29uc29sZSIsInNjb3BlIiwiZGVsZXRlIiwidXRpbCIsInBhdGNoIiwiY3JlYXRlIiwibWV0aG9kIiwidXJsIiwibmVjZXNpZGFkSWQiLCIkd2luZG93IiwiJHNjb3BlIiwic2hvdyIsInRpdHVsbyIsInNhdmUiLCJjb21lbnRhciIsIkNvbWVudGFyaW9Gb3JtIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImxvY2F0aW9uIiwidXBsb2FkIiwiZmlsZXMiLCJmZCIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiY2FsbGJhY2siLCJjbGF2ZSIsInBvc3QiLCJ3aXRoQ3JlZGVudGlhbHMiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwidW5kZWZpbmVkIiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiYmluZFRvQ29udHJvbGxlciIsIk5lY2VzaWRhZEZvcm0iLCJsaW5rIiwiZWwiLCJhdHRycyIsIm5nTW9kZWxDdHJsIiwicm91bmQiLCJudW0iLCJkIiwiTWF0aCIsInBvdyIsInByZWNpc2lvbiIsImZvcm1hdFByZWNpc2lvbiIsInZhbHVlIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJmb3JtYXRWaWV3VmFsdWUiLCIkaXNFbXB0eSIsImxhc3RWYWxpZFZhbHVlIiwibWluIiwiJHBhcnNlcnMiLCJpc1VuZGVmaW5lZCIsImluZGV4T2YiLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsImVtcHR5IiwiTlVNQkVSX1JFR0VYUCIsInRlc3QiLCIkc2V0VmFsaWRpdHkiLCIkZm9ybWF0dGVycyIsIm1pblZhbGlkYXRvciIsIm1heCIsIm1heFZhbGlkYXRvciIsImJpbmQiLCIkbW9kZWxWYWx1ZSIsIiR2aWV3VmFsdWUiLCJyZXF1aXJlIiwiZWxlbWVudCIsIm1vZGVsQ3RybCIsImlucHV0VmFsdWUiLCJ0cmFuc2Zvcm1lZElucHV0IiwicmVwbGFjZSIsImZpbHRlciIsImxvY2FsZSIsImN1cnJlbmN5RmlsdGVyIiwiZm9ybWF0cyIsIk5VTUJFUl9GT1JNQVRTIiwiYW1vdW50IiwiY3VycmVuY3lTeW1ib2wiLCJzZXAiLCJERUNJTUFMX1NFUCIsInN5bWJvbCIsIkNVUlJFTkNZX1NZTSIsInN1YnN0cmluZyIsImJ1c2NhciIsImxlbmd0aCIsImVtaXQiLCJyZXN1bHRhZG9zIiwibWUiLCJwYWxhYnJhc0NsYXZlIiwic3dhbCIsInRleHQiLCJ0eXBlIiwic2hvd0NhbmNlbEJ1dHRvbiIsImNsb3NlT25Db25maXJtIiwiYW5pbWF0aW9uIiwiaW5wdXRQbGFjZWhvbGRlciIsInN1YnNjcmliZSIsIndvcmRzIiwidXNlckFnZW50IiwibmF2aWdhdG9yIiwibG9hZGluZyIsImJvdHRvbVJlYWNoZWQiLCJub3RpY2VzIiwiaiIsImljb24iLCJtZXNzYWdlIiwiZGVsZXRlTm90aWNlIiwibm90aWNlIiwiaW5kZXgiLCJzcGxpY2UiLCJpbyIsImRhdGUiLCJwaWN0dXJlIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQ0FDLE9BQUEsT0FDQSxVQUNBLFdBQ0EsZUFDQSxvQkFDQSxzQkFDQSw2QkFDQSxhQUNBLGdCQUNBLFlBQ0EsV0FDQSxXQUNBLGFBRUFDLEtBQUEsYUFBQSxTQUFBQyxHQUNBQyxPQUFBRCxXQUFBQSxLQUVBRCxLQUFBLGFBQUEsU0FBQUcsR0FFQUEsRUFBQUMsSUFBQSxzQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBSixFQUFBSyxNQUFBRixFQUFBRyxRQUFBRCxXQUlBRSxRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQ0FFLEtBQUEsS0FDQUMsWUFBQSwyQkFDQUMsZ0JBQUEsRUFDQUMsV0FBQSxXQUNBQyxhQUFBLGFBRUFKLEtBQUEsYUFDQUssU0FBQSwwQkFFQUwsS0FBQSxrQkFDQUMsWUFBQSx1Q0FDQUUsV0FBQSx1QkFDQUMsYUFBQSxnQkFFQUosS0FBQSx5QkFDQUMsWUFBQSxzQ0FDQUUsV0FBQSx1QkFDQUMsYUFBQSxnQkFFQUosS0FBQSx5QkFDQUMsWUFBQSx5Q0FDQUMsZ0JBQUEsRUFDQUMsV0FBQSxnQkFDQUMsYUFBQSxrQkFFQUosS0FBQSxXQUNBQyxZQUFBLDRCQUNBQyxnQkFBQSxFQUNBQyxXQUFBLGFBQ0FDLGFBQUEsZUFFQUosS0FBQSxnQkFDQUssU0FBQSxrQ0FFQUwsS0FBQSxhQUNBQyxZQUFBLGlDQUVBRCxLQUFBLGVBQ0FDLFlBQUEsbUNBRUFELEtBQUEsVUFDQUssU0FBQSx3Q0FFQUwsS0FBQSxtQkFDQUssU0FBQSw4QkFFQUwsS0FBQSxzQkFDQUssU0FBQSwwQ0FFQUwsS0FBQSxzQkFDQUssU0FBQSwwQ0FFQUMsV0FDQUMsV0FBQSxZQ25GQSxXQUNBLFlBQ0F0QixTQUNBQyxPQUFBLGFBQ0Esa0JBQ0Esd0JBQ0Esd0JBQ0Esc0JBQ0EseUJDUkEsV0FDQSxZQUNBRCxTQUNBQyxPQUFBLHdCQUVBc0IsUUFBQSxTQUFBLFFBQUEsU0FBQUMsR0FFQSxPQUNBQyxLQUFBLFdBQ0EsTUFBQUQsR0FBQUUsSUFBQSxvQkFFQUMsS0FBQSxTQUFBQyxHQUNBLE1BQUFKLEdBQUFFLElBQUEsb0JBQUFFLElBRUFDLE1BQUEsV0FDQSxNQUFBTCxHQUFBRSxJQUFBLG9CQUVBSSxVQUFBLFNBQUFGLEdBQ0EsTUFBQUosR0FBQUUsSUFBQSwwQkFBQUUsSUFFQUcsWUFBQSxXQUNBLE1BQUFQLEdBQUFFLElBQUEsaUNDckJBLFdBQ0EsWUFDQTFCLFNBQ0FDLE9BQUEsNEJBQ0ErQixVQUFBLGtCQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBakIsWUFBQSxpQ0FDQUUsV0FBQSx1QkFDQUMsYUFBQSxVQUdBRCxXQUFBLHdCQUFBLGFBQUEsV0FBQSxTQUFBLFNBQUFnQixFQUFBQyxFQUFBQyxHQUVBLEdBQUFDLEdBQUFDLElBRUFKLEdBQUFLLE1BQ0FDLFFBQUEsU0FBQUMsR0FDQUosRUFBQUssWUFBQUQsSUFFQUUsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLFdBR0FQLEVBQUFBLFVBQUEsU0FBQVQsR0FFQSxHQUFBa0IsR0FBQUMsUUFBQSw0Q0FFQUQsSUFDQVosRUFBQUEsVUFBQU4sR0FDQVksUUFBQSxTQUFBQyxHQUNBTixFQUFBVSxJQUFBSixFQUFBLFdBQ0FMLEVBQUFZLFdBRUFMLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxZQUtBUCxFQUFBWSxPQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsT0FBQSxvQkFBQUYsRUFBQUMsTUFFQUQsR0FBQUMsTUFBQUEsRUFDQWpCLEVBQUFlLE9BQUFDLEdBQ0FWLFFBQUEsU0FBQUMsR0FDQU4sRUFBQVUsSUFBQUosRUFBQSxXQUNBTCxFQUFBWSxXQUVBTCxNQUFBLFNBQUFDLEdBQ0FULEVBQUFVLElBQUFELEVBQUEsa0JDbERBLFdBQ0EsWUFDQTVDLFNBQ0FDLE9BQUEsMEJBQ0ErQixVQUFBLGlCQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBakIsWUFBQSwrQkFDQUUsV0FBQSxnQkFDQUMsYUFBQSxVQUdBRCxXQUFBLGlCQUFBLFFBQUEsV0FBQSxTQUFBLFNBQUFtQyxFQUFBbEIsRUFBQW1CLEdBRUEsR0FBQWpCLEdBQUFDLElBQ0FELEdBQUFrQixRQUVBRixFQUFBNUIsT0FDQWUsUUFBQSxTQUFBQyxHQUNBSixFQUFBWixLQUFBZ0IsSUFHQUUsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLFdBR0FVLEVBQUFFLEdBQUEsYUFBQSxTQUFBZixHQUNBTixFQUFBVSxJQUFBSixFQUFBZ0IsSUFBQSxXQUNBcEIsRUFBQWtCLEtBQUFHLEtBQUFqQixXQzVCQSxXQUNBLFlBQ0F6QyxTQUNBQyxPQUFBLDRCQUNBK0IsVUFBQSxrQkFBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQWpCLFlBQUEsaUNBQ0FFLFdBQUEsdUJBQ0FDLGFBQUEsVUFHQUQsV0FBQSx3QkFBQSxZQUFBLFdBQUEsU0FBQSxTQUFBeUMsRUFBQXhCLEVBQUFDLEdBRUEsR0FBQUMsR0FBQUMsSUFFQXFCLEdBQUFDLE9BQ0FwQixRQUFBLFNBQUFDLEdBQ0FKLEVBQUFOLFlBQUFVLElBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxXQUdBUCxFQUFBQSxVQUFBLFNBQUFULEdBRUEsR0FBQWtCLEdBQUFDLFFBQUEsMkNBRUFELElBQ0FhLEVBQUFBLFVBQUEvQixHQUNBWSxRQUFBLFNBQUFDLEdBQ0FOLEVBQUFVLElBQUFKLEVBQUEsV0FDQUwsRUFBQVksV0FFQUwsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLGtCQ25DQSxXQUNBLFlBQ0E1QyxTQUNBQyxPQUFBLHNCQUNBK0IsVUFBQSxZQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBakIsWUFBQSwyQkFDQUUsV0FBQSxpQkFDQUMsYUFBQSxVQUdBRCxXQUFBLGtCQUFBLE9BQUEsV0FBQSxTQUFBMkMsRUFBQTFCLEdBRUEsR0FBQUUsR0FBQUMsSUFFQXVCLEdBQUF0QixNQUNBQyxRQUFBLFNBQUFDLEdBQ0FKLEVBQUFSLE1BQUFZLElBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxpQkNyQkEsV0FDQSxZQUNBNUMsU0FDQUMsT0FBQSxlQUNBaUIsV0FBQSxZQUFBLFlBQUEsV0FBQSxTQUFBeUMsRUFBQXhCLEdBRUEsR0FBQUUsR0FBQUMsSUFFQXFCLEdBQUFDLE9BQ0FwQixRQUFBLFNBQUFDLEdBQ0FKLEVBQUFOLFlBQUFVLElBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxpQkNiQSxXQUNBLFlBQ0E1QyxTQUNBQyxPQUFBLDZCQUNBK0IsVUFBQSxXQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBakIsWUFBQSw4Q0NQQSxXQUNBLFlBQ0FoQixTQUNBQyxPQUFBLDhCQUNBaUIsV0FBQSxpQkFBQSxZQUFBLGVBQUEsU0FBQXlDLEVBQUFHLEdBRUEsR0FBQXpCLEdBQUFDLElBSUFxQixHQUFBSSxVQUFBRCxFQUFBQyxXQUNBdkIsUUFBQSxTQUFBQyxHQUNBSixFQUFBTixZQUFBVSxFQUFBVixZQUNBTSxFQUFBMEIsVUFBQXRCLEVBQUFzQixZQUVBcEIsTUFBQSxTQUFBQyxHQUNBb0IsUUFBQXJCLE1BQUFDLFdDaEJBLFdBQ0EsWUFDQTVDLFNBQ0FDLE9BQUEsK0JBQ0ErQixVQUFBLGFBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FqQixZQUFBLG9DQUNBaUQsT0FDQWYsV0FBQSxXQ1RBLFdBQ0EsWUFDQWxELFNBQ0FDLE9BQUEsNkJBQ0FzQixRQUFBLGNBQUEsUUFBQSxTQUFBQyxHQUVBLE9BQ0EwQyxTQUFBLFNBQUF0QyxHQUNBLE1BQUFKLEdBQUFBLFVBQUEsb0JBQUFJLElBRUF1QyxLQUFBLFNBQUF2QyxHQUNBLE1BQUFKLEdBQUE0QyxNQUFBLG9CQUFBeEMsSUFFQVcsSUFBQSxXQUNBLE1BQUFmLEdBQUFFLElBQUEsc0JBRUEyQyxPQUFBLFNBQUE1QixHQUNBLE1BQUFqQixJQUNBaUIsS0FBQUEsRUFDQTZCLE9BQUEsT0FDQUMsSUFBQSxvQkFBQTlCLEVBQUErQixZQUFBLGtCQUdBdkIsT0FBQSxTQUFBUixHQUNBLE1BQUFqQixJQUNBaUIsS0FBQUEsRUFDQTZCLE9BQUEsTUFDQUMsSUFBQSxvQkFBQTlCLEVBQUFiLGFDM0JBLFdBQ0EsWUFDQTVCLFNBQ0FDLE9BQUEsNEJBQ0FpQixXQUFBLHdCQUFBLFlBQUEsV0FBQSxlQUFBLFVBQUEsYUFBQSxTQUFBLFNBQUEsYUFBQSxTQUFBeUMsRUFBQXhCLEVBQUEyQixFQUFBVyxFQUFBdkMsRUFBQXdDLEVBQUFwQixFQUFBakQsR0FFQSxHQUFBZ0MsR0FBQUMsSUFDQUQsR0FBQVAsYUFDQU8sRUFBQUgsY0FHQTRCLEVBQUFsQyxLQUNBMEIsRUFBQUcsSUFBQSx3QkFDQUUsRUFBQWdCLEtBQUFiLEVBQUFsQyxJQUNBWSxRQUFBLFNBQUFDLEdBQ0FKLEVBQUFQLFVBQUFXLEVBQ0FwQyxFQUFBSyxNQUFBK0IsRUFBQW1DLFNBRUFqQyxNQUFBLFNBQUFDLEdBQ0FULEVBQUFVLElBQUFELEVBQUEsWUFJQVAsRUFBQXdDLEtBQUEsV0FDQXZCLEVBQUFHLElBQUEsMEJBQ0FFLEVBQUFWLE9BQUFaLEVBQUFQLFdBQ0FVLFFBQUEsU0FBQUMsR0FDQU4sRUFBQVUsSUFBQUosRUFBQSxhQUVBRSxNQUFBLFNBQUFDLEdBQ0FULEVBQUFVLElBQUFELEVBQUEsWUFJQVAsRUFBQXlDLFNBQUEsV0FFQXpDLEVBQUEwQyxlQUFBUCxZQUFBbkMsRUFBQVAsVUFBQUYsR0FDQTBCLEVBQUFHLElBQUEsNEJBQ0F2QixFQUFBbUMsT0FBQWhDLEVBQUEwQyxnQkFDQXZDLFFBQUEsU0FBQUMsR0FDQU4sRUFBQVUsSUFBQUosRUFBQSxXQUNBSixFQUFBSCxXQUFBOEMsVUFBQSxHQUFBQyxNQUNBNUMsRUFBQVAsVUFBQVksWUFBQWdCLEtBQUFyQixFQUFBSCxZQUNBRyxFQUFBSCxnQkFFQVMsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLFlBSUFQLEVBQUFBLFVBQUEsV0FDQWlCLEVBQUFHLElBQUEsMkJBQ0EsSUFBQVgsR0FBQUMsUUFBQSw4Q0FDQUQsSUFDQWEsRUFBQUEsVUFBQXRCLEVBQUFQLFVBQUFGLElBQ0FZLFFBQUEsU0FBQUMsR0FDQU4sRUFBQVUsSUFBQUosRUFBQSxXQUNBZ0MsRUFBQVMsU0FBQSxPQUVBdkMsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLFlBS0FQLEVBQUE4QixLQUFBLFNBQUFqQixHQUNBSSxFQUFBRyxJQUFBLHNDQUNBdkIsRUFBQWlDLEtBQUFqQixFQUFBdEIsSUFDQVksUUFBQSxTQUFBQyxHQUNBUyxFQUFBaUIsTUFBQSxFQUNBaEMsRUFBQVUsSUFBQUosRUFBQSxhQUVBRSxNQUFBLFNBQUFDLEdBQ0FULEVBQUFVLElBQUFELEVBQUEsWUFJQThCLEVBQUFTLE9BQUEsU0FBQUMsR0FDQTlCLEVBQUFHLElBQUEsaUNBQ0EsSUFBQTRCLEdBQUEsR0FBQUMsU0FFQUYsR0FBQSxLQUNBQyxFQUFBRSxPQUFBLE9BQUFILEVBQUEsSUFFQXpCLEVBQUF3QixPQUFBRSxFQUFBdkIsRUFBQWxDLElBQ0FZLFFBQUEsU0FBQUMsR0FDQU4sRUFBQVUsSUFBQUosRUFBQSxXQUNBdUIsUUFBQVAsSUFBQWhCLEtBRUFFLE1BQUEsU0FBQUMsR0FDQW9CLFFBQUFQLElBQUFiLEdBQ0FULEVBQUFVLElBQUFELEVBQUEsbUJDM0ZBLFdBQ0EsWUFDQTVDLFNBQ0FDLE9BQUEseUJBQ0ErQixVQUFBLGdCQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBakIsWUFBQSxvQ0FDQWlELE9BQ0FuQyxVQUFBLFdDVEEsV0FDQSxZQUNBOUIsU0FDQUMsT0FBQSxpQkFDQSx3QkFDQSxzQkFDQSxxQkFDQSx3QkFDQSwwQkFDQSwyQkFDQSx5QkFDQSwyQkFFQWlCLFdBQUEsbUJBQUEsWUFBQSxXQUFBLFNBQUF5QyxFQUFBeEIsR0FFQSxHQUFBRSxHQUFBQyxJQUVBcUIsR0FBQUMsT0FDQXBCLFFBQUEsU0FBQUMsR0FDQUosRUFBQU4sWUFBQVUsSUFFQUUsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLGNBSUFaLFVBQUEsWUFBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQWpCLFlBQUEsOEJBQ0FpRCxPQUNBckMsR0FBQSxXQy9CQSxXQUNBLFlBQ0E1QixTQUNBQyxPQUFBLDRCQUNBc0IsUUFBQSxhQUFBLFFBQUEsU0FBQUMsR0FFQSxPQUNBb0MsS0FBQSxTQUFBNEIsR0FDQSxNQUFBaEUsR0FBQUUsSUFBQSxxQkFFQWlELEtBQUEsU0FBQS9DLEdBQ0EsTUFBQUosR0FBQUUsSUFBQSxvQkFBQUUsSUFFQW1DLFVBQUEsU0FBQTBCLEdBQ0EsTUFBQWpFLEdBQUFFLElBQUEsbUJBQUErRCxJQUVBdkIsU0FBQSxTQUFBdEMsR0FDQSxNQUFBSixHQUFBQSxVQUFBLG9CQUFBSSxJQUVBeUMsT0FBQSxTQUFBNUIsR0FDQSxNQUFBakIsSUFDQWlCLEtBQUFBLEVBQ0E2QixPQUFBLE9BQ0FDLElBQUEsc0JBR0FZLE9BQUEsU0FBQUUsRUFBQXpELEdBQ0EsTUFBQUosR0FBQWtFLEtBQUEsb0JBQUE5RCxFQUFBLFVBQUF5RCxHQUNBTSxpQkFBQSxFQUNBQyxTQUFBQyxlQUFBQyxRQUNBQyxpQkFBQS9GLFFBQUFnRyxZQUdBL0MsT0FBQSxTQUFBUixHQUNBLE1BQUFqQixJQUNBaUIsS0FBQUEsRUFDQTZCLE9BQUEsTUFDQUMsSUFBQSxvQkFBQTlCLEVBQUFiLGFDckNBLFdBQ0EsWUFDQTVCLFNBQ0FDLE9BQUEsMEJBQ0ErQixVQUFBLGtCQUFBLFlBQUEsV0FBQSxVQUFBLFNBQUEyQixFQUFBeEIsRUFBQXNDLEdBQ0EsT0FDQXhDLFNBQUEsSUFDQWpCLFlBQUEsK0JBQ0FpRCxPQUNBdEMsS0FBQSxLQUVBUixhQUFBLHFCQUNBOEUsa0JBQUEsRUFDQS9FLFdBQUEseUJBR0FBLFdBQUEsc0JBQUEsWUFBQSxXQUFBLFVBQUEsU0FBQXlDLEVBQUF4QixFQUFBc0MsR0FHQSxHQUFBcEMsR0FBQUMsSUFDQUQsR0FBQTZELGlCQUVBN0QsRUFBQWdDLE9BQUEsV0FDQVYsRUFBQVUsT0FBQWhDLEVBQUE2RCxlQUNBMUQsUUFBQSxTQUFBQyxHQUNBTixFQUFBVSxJQUFBLHNDQUFBLFdBQUE0QixFQUFBUyxTQUFBLGVBQUF6QyxFQUFBLFlBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxrQkMzQkE1QyxRQUFBQyxPQUFBLHFCQUNBK0IsVUFBQSxRQUFBLFdBSUEsUUFBQW1FLEdBQUFsQyxFQUFBbUMsRUFBQUMsRUFBQUMsR0FLQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQUFDLEtBQUFDLElBQUEsR0FBQUMsRUFDQSxPQUFBRixNQUFBSCxNQUFBQyxFQUFBQyxHQUFBQSxFQUdBLFFBQUFJLEdBQUFDLEdBQ0EsTUFBQUMsWUFBQUQsR0FBQUUsUUFBQUosR0FHQSxRQUFBSyxHQUFBSCxHQUNBLE1BQUFSLEdBQUFZLFNBQUFKLEdBQUEsR0FBQSxHQUFBQSxFQWRBLEdBRUFLLEdBRkFDLEVBQUFMLFdBQUFWLEVBQUFlLEtBQUEsR0FDQVIsRUFBQUcsV0FBQVYsRUFBQU8sV0FBQSxFQWlCQU4sR0FBQWUsU0FBQTNELEtBQUEsU0FBQW9ELEdBQ0E5RyxRQUFBc0gsWUFBQVIsS0FDQUEsRUFBQSxJQUlBLElBQUFBLEVBQUFTLFFBQUEsT0FDQVQsRUFBQSxJQUFBQSxHQUlBLElBQUFBLEVBQUFTLFFBQUEsT0FDQUgsR0FBQSxHQUNBTixFQUFBLEtBQ0FSLEVBQUFrQixjQUFBLElBQ0FsQixFQUFBbUIsV0FDQSxNQUFBWCxJQUNBQSxFQUFBLElBSUEsSUFBQVksR0FBQXBCLEVBQUFZLFNBQUFKLEVBWUEsT0FYQVksSUFBQUMsRUFBQUMsS0FBQWQsR0FDQUssRUFBQSxLQUFBTCxFQUNBLEtBQ0FZLEVBQUFaLEVBQUFDLFdBQUFELElBR0FSLEVBQUFrQixjQUFBUCxFQUFBRSxJQUNBYixFQUFBbUIsV0FHQW5CLEVBQUF1QixhQUFBLFVBQUEsR0FDQVYsSUFFQWIsRUFBQXdCLFlBQUFwRSxLQUFBdUQsRUFFQSxJQUFBYyxHQUFBLFNBQUFqQixHQUNBLE9BQUFSLEVBQUFZLFNBQUFKLElBQUFNLEVBQUFOLE1BQ0FSLEdBQUF1QixhQUFBLE9BQUEsSUFHQXZCLEVBQUF1QixhQUFBLE9BQUEsR0FDQWYsR0FNQSxJQUhBUixFQUFBZSxTQUFBM0QsS0FBQXFFLEdBQ0F6QixFQUFBd0IsWUFBQXBFLEtBQUFxRSxHQUVBMUIsRUFBQTJCLElBQUEsQ0FDQSxHQUFBQSxHQUFBakIsV0FBQVYsRUFBQTJCLEtBQ0FDLEVBQUEsU0FBQW5CLEdBQ0EsT0FBQVIsRUFBQVksU0FBQUosSUFBQUEsRUFBQWtCLE1BQ0ExQixHQUFBdUIsYUFBQSxPQUFBLElBR0F2QixFQUFBdUIsYUFBQSxPQUFBLEdBQ0FmLEdBSUFSLEdBQUFlLFNBQUEzRCxLQUFBdUUsR0FDQTNCLEVBQUF3QixZQUFBcEUsS0FBQXVFLEdBSUFyQixFQUFBLEtBQ0FOLEVBQUFlLFNBQUEzRCxLQUFBLFNBQUFvRCxHQUNBLE1BQUFBLEdBQUFQLEVBQUFPLEdBQUFBLElBRUFSLEVBQUF3QixZQUFBcEUsS0FBQSxTQUFBb0QsR0FDQSxNQUFBQSxHQUFBRCxFQUFBQyxHQUFBQSxLQUlBVixFQUFBOEIsS0FBQSxPQUFBLFdBQ0EsR0FBQXBCLEdBQUFSLEVBQUE2QixXQUNBckIsS0FDQVIsRUFBQThCLFdBQUF2QixFQUFBQyxHQUNBUixFQUFBbUIsYUFwR0EsR0FBQUUsR0FBQSxvQ0F5R0EsUUFDQTFGLFNBQUEsSUFDQW9HLFFBQUEsVUFDQWxDLEtBQUFBLEtBRUFuRSxVQUFBLGNBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FvRyxRQUFBLFVBQ0FsQyxLQUFBLFNBQUFsQyxFQUFBcUUsRUFBQWpDLEVBQUFrQyxHQUNBQSxFQUFBbEIsU0FBQTNELEtBQUEsU0FBQThFLEdBSUEsR0FBQTFDLFNBQUEwQyxFQUFBLE1BQUEsRUFDQSxJQUFBQyxHQUFBRCxFQUFBRSxRQUFBLFlBQUEsR0FNQSxPQUxBRCxLQUFBRCxJQUNBRCxFQUFBZixjQUFBaUIsR0FDQUYsRUFBQWQsV0FHQWdCLFFDbElBekksUUFBQUMsT0FBQSxrQkFDQTBJLE9BQUEsVUFDQSxVQUFBLFVBQUEsU0FBQUEsRUFBQUMsR0FDQSxHQUFBQyxHQUFBRixFQUFBLFlBQ0FHLEVBQUFGLEVBQUFHLGNBQ0EsT0FBQSxVQUFBQyxFQUFBeEMsRUFBQXlDLEdBQ0EsSUFBQXpDLElBQUFBLEVBQUEsR0FDQSxJQUFBTSxHQUFBK0IsRUFBQUcsRUFBQUMsR0FDQUMsRUFBQXBDLEVBQUFTLFFBQUF1QixFQUFBSyxhQUFBLEVBQ0FDLEVBQUEsRUFFQSxPQURBRixHQUFBcEMsRUFBQVMsUUFBQXVCLEVBQUFPLGdCQUFBRCxFQUFBLElBQUFOLEVBQUFPLGNBQ0F2QyxFQUFBd0MsVUFBQSxFQUFBSixFQUFBMUMsR0FBQTRDLE1DWEEsV0FDQSxZQUNBcEosU0FDQUMsT0FBQSxZQUNBLGlCQUNBLGdCQUVBaUIsV0FBQSxrQkFBQSxhQUFBLFNBQUEsT0FBQSxXQUFBLFNBQUEsU0FBQWIsRUFBQXFFLEVBQUFiLEVBQUExQixFQUFBbUIsR0FFQSxHQUFBakIsR0FBQUMsSUFHQUQsR0FBQWtILE9BQUEsU0FBQUEsR0FDQUEsRUFBQUMsT0FBQSxJQUdBbEcsRUFBQW1HLEtBQUEscUJBQUFGLEdBQ0FqRyxFQUFBRSxHQUFBLHdCQUFBLFNBQUFmLEdBQ0FKLEVBQUFxSCxXQUFBakgsTUFPQW9CLEVBQUE4RixLQUNBbkgsUUFBQSxTQUFBQyxHQUNBSixFQUFBVixLQUFBYyxFQUNBQSxJQUNBb0IsRUFBQXJELFFBQUFpQyxHQUVBdUIsUUFBQVAsSUFBQWhCLEdBRUFvQixFQUFBYyxLQUFBbEMsRUFBQWIsSUFDQVksUUFBQSxTQUFBQyxHQUNBSixFQUFBVixLQUFBSSxZQUFBVSxFQUFBVixnQkFHQVksTUFBQSxTQUFBQyxHQUNBb0IsUUFBQVAsSUFBQWIsS0FJQVAsRUFBQXVILGNBQUEsV0FDQUMsTUFDQW5KLE1BQUEsY0FDQW9KLEtBQUEsbUZBQ0FDLEtBQUEsUUFDQUMsa0JBQUEsRUFDQUMsZ0JBQUEsRUFDQUMsVUFBQSxpQkFDQUMsaUJBQUEsOENBQ0EsU0FBQTNCLEdBQ0EsTUFBQUEsT0FFQTNFLEdBQUF1RyxXQUNBQyxNQUFBN0IsSUFFQWhHLFFBQUEsU0FBQUMsR0FDQW9ILEtBQUEseUJBQUFwSCxFQUFBLGFBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxZQUlBLEtBT0E4QixFQUFBNEYsVUFBQUMsVUFBQUQsVUFHQWpLLEVBQUFDLElBQUEsb0JBQUEsV0FDQUQsRUFBQW1LLFNBQUEsSUFHQW5LLEVBQUFDLElBQUEsc0JBQUEsV0FDQUQsRUFBQW1LLFNBQUEsSUFLQTlGLEVBQUErRixjQUFBLGFBU0EvRixFQUFBZ0csVUFFQSxLQUFBLEdBQUFDLEdBQUEsRUFBQSxHQUFBQSxFQUFBQSxJQUNBakcsRUFBQWdHLFFBQUFoSCxNQUFBa0gsS0FBQSxXQUFBQyxRQUFBLFdBQUFGLEVBQUEsSUFHQWpHLEdBQUFvRyxhQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQXRHLEVBQUFnRyxRQUFBbkQsUUFBQXdELEVBQ0FDLEdBQUEsSUFDQXRHLEVBQUFnRyxRQUFBTyxPQUFBRCxFQUFBLFVDeEdBLFdBQ0EsWUFDQWhMLFNBQ0FDLE9BQUEsaUJBQ0FzQixRQUFBLFVBQUEsT0FBQSxTQUFBc0MsR0FFQSxHQUFBUCxHQUFBNEgsSUFTQSxPQVJBNUgsR0FBQUcsSUFBQSxTQUFBTixHQUNBRyxFQUFBbUcsS0FBQSxjQUNBaEcsSUFBQU4sRUFDQWdJLEtBQUEsR0FBQWxHLE1BQ0F0RCxLQUFBa0MsRUFBQXJELFdBSUE4QyxRQ2ZBLFdBQ0EsWUFDQXRELFNBQUFDLE9BQUEsc0JBQ0FpQixXQUFBLGNBQUEsV0FBQSxPQUFBLFNBQUEsU0FBQWlCLEVBQUEwQixFQUFBYSxHQUVBLEdBQUFyQyxHQUFBQyxJQUNBRCxHQUFBVixRQUVBa0MsRUFBQThGLEtBQ0FuSCxRQUFBLFNBQUFDLEdBQ0FKLEVBQUFWLEtBQUFjLElBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxXQUdBUCxFQUFBd0MsS0FBQSxXQUNBaEIsRUFBQVosT0FBQVosRUFBQVYsTUFDQWEsUUFBQSxTQUFBQyxHQUNBTixFQUFBVSxJQUFBSixFQUFBLGFBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSxZQUlBOEIsRUFBQVMsT0FBQSxTQUFBQyxHQUNBcEIsUUFBQVAsSUFBQSxtQkFDQSxJQUFBNEIsR0FBQSxHQUFBQyxTQUdBRixHQUFBLEtBQ0FDLEVBQUFFLE9BQUEsT0FBQUgsRUFBQSxJQUVBdkIsRUFBQXNCLE9BQUFFLEdBQ0E3QyxRQUFBLFNBQUFDLEdBQ0FOLEVBQUFVLElBQUEsZ0NBQUEsV0FDQVIsRUFBQVYsS0FBQXlKLFFBQUEzSSxJQUVBRSxNQUFBLFNBQUFDLEdBQ0FvQixRQUFBUCxJQUFBYixHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLG1CQ3pDQSxXQUNBLFlBQ0E1QyxTQUFBQyxPQUFBLFlBQ0EsbUJBQ0EsbUJBQ0Esb0JBRUFpQixXQUFBLFlBQUEsV0FBQSxPQUFBLGVBQUEsU0FBQWlCLEVBQUEwQixFQUFBQyxHQUVBLEdBQUF6QixHQUFBQyxJQUNBMEIsU0FBQVAsSUFBQSxZQUVBSSxFQUFBYyxLQUFBYixFQUFBbEMsSUFDQVksUUFBQSxTQUFBQyxHQUNBSixFQUFBVixLQUFBYyxFQUNBdUIsUUFBQVAsSUFBQSxNQUNBTyxRQUFBUCxJQUFBaEIsS0FFQUUsTUFBQSxTQUFBQyxHQUNBVCxFQUFBVSxJQUFBRCxFQUFBLGlCQ25CQSxXQUNBLFlBQ0E1QyxTQUNBQyxPQUFBLHVCQUVBc0IsUUFBQSxRQUFBLFFBQUEsU0FBQUMsR0FFQSxPQUNBaEIsV0FDQW1KLEdBQUEsV0FDQSxNQUFBbkksR0FBQUUsSUFBQSx1QkFFQXVCLE9BQUEsU0FBQVIsR0FDQSxNQUFBakIsSUFDQThDLE9BQUEsTUFDQTdCLEtBQUFBLEVBQ0E4QixJQUFBLHdCQUdBWSxPQUFBLFNBQUFFLEdBQ0EsTUFBQTdELEdBQUFrRSxLQUFBLG9CQUFBTCxHQUNBTSxpQkFBQSxFQUNBQyxTQUFBQyxlQUFBQyxRQUNBQyxpQkFBQS9GLFFBQUFnRyxZQUdBb0UsVUFBQSxTQUFBM0gsR0FDQSxNQUFBakIsSUFDQThDLE9BQUEsT0FDQTdCLEtBQUFBLEVBQ0E4QixJQUFBLDBCQUdBSSxLQUFBLFNBQUEvQyxHQUNBLE1BQUFKLEdBQUFFLElBQUEsY0FBQUUsSUFFQVcsSUFBQSxXQUNBLE1BQUFmLEdBQUFFLElBQUEsMkJDckNBLFdBQ0EsWUFDQTFCLFNBQ0FDLE9BQUEsdUJBQ0ErQixVQUFBLGNBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FqQixZQUFBLDZCQUNBRSxXQUFBLFdBQ0FDLGFBQUEsVUFHQUQsV0FBQSxZQUFBLE9BQUEsV0FBQSxTQUFBMkMsRUFBQTFCLEdBRUEsR0FBQUUsR0FBQUMsSUFFQXVCLEdBQUF0QixNQUNBQyxRQUFBLFNBQUFDLEdBQ0FKLEVBQUFSLE1BQUFZLElBRUFFLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJywgW1xuICAgICAgJ25nUm91dGUnLFxuICAgICAgJ25nTm90aWZ5JyxcbiAgICAgICd1aS5ib290c3RyYXAnLFxuICAgICAgJ21vYmlsZS1hbmd1bGFyLXVpJyxcbiAgICAgICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgICAgICdtb2JpbGUtYW5ndWxhci11aS5nZXN0dXJlcycsXG4gICAgICAnYXBwLnNvY2tldCcsXG4gICAgICAnYXBwLm5lY2VzaWRhZCcsXG4gICAgICAnYXBwLmFkbWluJyxcbiAgICAgICdhcHAuaG9tZScsXG4gICAgICAnYXBwLm1haW4nLFxuICAgICAgJ2FwcC51c2VyJ1xuICAgIF0pXG4gICAgLnJ1bihbJyR0cmFuc2Zvcm0nLGZ1bmN0aW9uKCR0cmFuc2Zvcm0pIHtcbiAgICAgIHdpbmRvdy4kdHJhbnNmb3JtID0gJHRyYW5zZm9ybTtcbiAgICB9XSlcbiAgICAucnVuKFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRyb290U2NvcGUpIHtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnQsIHByZXZpb3VzKSB7XG4gICAgICAgICRyb290U2NvcGUudGl0bGUgPSBjdXJyZW50LiQkcm91dGUudGl0bGU7XG4gICAgICB9KTtcblxuICAgIH1dKVxuICAgIC5jb25maWcoWyckcm91dGVQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJyxmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9ob21lL3Njcm9sbC5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonSG9tZUN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonSG9tZUN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYnVzcXVlZGEnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8YnVzcXVlZGE+PC9idXNxdWVkYT4nLFxuICAgICAgICB9KVxuICAgICAgICAud2hlbignL25lY2VzaWRhZC86aWQnLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC92aWV3cy9kZXRhbGxlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6J05lY2VzaWRhZERldGFsbGVDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0RldGFsbGVDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL25lY2VzaWRhZC86aWQvZWRpdGFyJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvZWRpdGFyLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6J05lY2VzaWRhZERldGFsbGVDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0RldGFsbGVDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2NhdGVnb3JpYS86Y2F0ZWdvcmlhJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvY2F0ZWdvcmlhLmh0bWwnLFxuICAgICAgICAgIHJlbG9hZE9uU2VhcmNoOiBmYWxzZSxcbiAgICAgICAgICBjb250cm9sbGVyOidDYXRlZ29yaWFDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0NhdGVnb3JpYUN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcGVyZmlsJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy91c2Vycy9jb25maWcuaHRtbCcsXG4gICAgICAgICAgcmVsb2FkT25TZWFyY2g6IGZhbHNlLFxuICAgICAgICAgIGNvbnRyb2xsZXI6J0NvbmZpZ0N0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonQ29uZmlnQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy91c3VhcmlvLzppZCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzx1c2VyLXByb2ZpbGU+PC91c2VyLXByb2ZpbGU+J1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2NvbnRhY3RvJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9zaGFyZWQvY29udGFjdG8uaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9wcml2YWNpZGFkJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9zaGFyZWQvcHJpdmFjaWRhZC5odG1sJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FkbWluJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPGFkbWluLWRhc2hib2FyZD48L2FkbWluLWRhc2hib2FyZD4nXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWRtaW4vdXN1YXJpb3MnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8dXNlcnMtbGlzdD48L3VzZXJzLWxpc3Q+J1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FkbWluL25lY2VzaWRhZGVzJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPG5lY2VzaWRhZGVzLWxpc3Q+PC9uZWNlc2lkYWRlcy1saXN0PidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbi9jb21lbnRhcmlvcycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxjb21lbnRhcmlvcy1saXN0PjwvY29tZW50YXJpb3MtbGlzdD4nXG4gICAgICAgIH0pXG4gICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbiAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4nLFtcbiAgICAgICdhcHAuYWRtaW4udXNlcnMnLFxuICAgICAgJ2FwcC5hZG1pbi5uZWNlc2lkYWRlcycsXG4gICAgICAnYXBwLmFkbWluLmNvbWVudGFyaW9zJyxcbiAgICAgICdhcHAuYWRtaW4uZGFzaGJvYXJkJyxcbiAgICAgICdhcHAuYWRtaW4uc2VydmljZSdcbiAgICBdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4uc2VydmljZScsICBbXSlcblxuICAgICAgLmZhY3RvcnkgKCdBZG1pbicsIFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGFzaDpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FkbWluL2Rhc2gnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVzZXI6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FkbWluL3VzZXJzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VyczpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdhcGkvYWRtaW4vdXNlcnMnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5lY2VzaWRhZDpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYWRtaW4vbmVjZXNpZGFkZXMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5lY2VzaWRhZGVzOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9hZG1pbi9uZWNlc2lkYWRlcycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi5jb21lbnRhcmlvcycsW10pXG4gICAgICAuZGlyZWN0aXZlKCdjb21lbnRhcmlvc0xpc3QnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vY29tZW50YXJpb3MuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidBZG1pbkNvbWVudGFyaW9zQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5Db21lbnRhcmlvc0N0cmwnLFsnQ29tZW50YXJpbycsJ25nTm90aWZ5JywnJHJvdXRlJyxmdW5jdGlvbiAoQ29tZW50YXJpbyxuZ05vdGlmeSwkcm91dGUpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIENvbWVudGFyaW8uYWxsKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0uY29tZW50YXJpb3MgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdm0uZGVsZXRlID0gZnVuY3Rpb24gbmFtZShpZCkge1xuXG4gICAgICAgICAgdmFyIHN1cmUgPSBjb25maXJtKCfCv1JlYWxtZW50ZSBkZXNlYXMgYm9ycmFyIGVzdGUgY29tZW50YXJpbz8nKTtcblxuICAgICAgICAgIGlmIChzdXJlKSB7XG4gICAgICAgICAgICBDb21lbnRhcmlvLmRlbGV0ZShpZClcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0udXBkYXRlID0gZnVuY3Rpb24gKGNvbWVudGFyaW8pIHtcbiAgICAgICAgICB2YXIgdGV4dG8gPSBwcm9tcHQoJ1JlbXBsYXphIGVsIHRleHRvJyxjb21lbnRhcmlvLnRleHRvKVxuXG4gICAgICAgICAgY29tZW50YXJpby50ZXh0byA9IHRleHRvO1xuICAgICAgICAgIENvbWVudGFyaW8udXBkYXRlKGNvbWVudGFyaW8pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLmRhc2hib2FyZCcsW10pXG4gICAgICAuZGlyZWN0aXZlKCdhZG1pbkRhc2hib2FyZCcsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9hZG1pbi9kYXNoYm9hcmQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidBZG1pbkRhc2hDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczonY3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdBZG1pbkRhc2hDdHJsJyxbJ0FkbWluJywnbmdOb3RpZnknLCdzb2NrZXQnLGZ1bmN0aW9uIChBZG1pbixuZ05vdGlmeSxzb2NrZXQpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5sb2dzID0gW107XG5cbiAgICAgICAgQWRtaW4uZGFzaCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLmRhc2ggPSBkYXRhO1xuXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBzb2NrZXQub24oJ3VzZXJzOmxvZ3MnLGZ1bmN0aW9uIChkYXRhKSB7ICAgICAgICAgIFxuICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLmxvZywnc3VjY2VzcycpO1xuICAgICAgICAgIHZtLmxvZ3MucHVzaChkYXRhKTtcbiAgICAgICAgfSk7XG5cblxuXG5cblxuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLm5lY2VzaWRhZGVzJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ25lY2VzaWRhZGVzTGlzdCcsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9hZG1pbi9uZWNlc2lkYWRlcy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J0FkbWluTmVjZXNpZGFkZXNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczonY3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdBZG1pbk5lY2VzaWRhZGVzQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyRyb3V0ZScsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSwkcm91dGUpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIE5lY2VzaWRhZC5sb2FkKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdm0uZGVsZXRlID0gZnVuY3Rpb24gbmFtZShpZCkge1xuXG4gICAgICAgICAgdmFyIHN1cmUgPSBjb25maXJtKCfCv1JlYWxtZW50ZSBkZXNlYXMgYm9ycmFyIGVzdGEgbmVjZXNpZGFkPycpO1xuXG4gICAgICAgICAgaWYgKHN1cmUpIHtcbiAgICAgICAgICAgIE5lY2VzaWRhZC5kZWxldGUoaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLnVzZXJzJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ3VzZXJzTGlzdCcsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9hZG1pbi91c2Vycy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J0FkbWluVXNlcnNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczonY3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdBZG1pblVzZXJzQ3RybCcsWydVc2VyJywnbmdOb3RpZnknLGZ1bmN0aW9uIChVc2VyLG5nTm90aWZ5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBVc2VyLmFsbCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLnVzZXJzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmhvbWUnLFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBOZWNlc2lkYWQubG9hZCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsICdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5idXNxdWVkYScsW10pXG4gICAgICAuZGlyZWN0aXZlKCdidXNxdWVkYScsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvYnVzcXVlZGEuaHRtbCcgICAgICAgICAgICBcbiAgICAgICAgICB9O1xuICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5jYXRlZ29yaWEnLFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ0NhdGVnb3JpYUN0cmwnLFsnTmVjZXNpZGFkJywnJHJvdXRlUGFyYW1zJyxmdW5jdGlvbiAoTmVjZXNpZGFkLCRyb3V0ZVBhcmFtcykge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cblxuXG4gICAgICAgIE5lY2VzaWRhZC5jYXRlZ29yaWEoJHJvdXRlUGFyYW1zLmNhdGVnb3JpYSlcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhLm5lY2VzaWRhZGVzO1xuICAgICAgICAgICAgdm0uY2F0ZWdvcmlhID0gZGF0YS5jYXRlZ29yaWE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5jb21lbnRhcmlvJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ2NvbWVudGFyaW8nLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL2NvbWVudGFyaW8uaHRtbCcsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICBjb21lbnRhcmlvOiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5jb21lbnRhcmlvLnNlcnZpY2UnLFtdKVxuICAgICAgLmZhY3RvcnkoJ0NvbWVudGFyaW8nLFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGVsZXRlOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9jb21lbnRhcmlvcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXRpbDpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wYXRjaCgnL2FwaS9jb21lbnRhcmlvcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tZW50YXJpb3MvJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjcmVhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL25lY2VzaWRhZGVzLycgKyBkYXRhLm5lY2VzaWRhZElkICsgJy9jb21lbnRhcmlvcydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBkYXRhICAgIDogIGRhdGEsXG4gICAgICAgICAgICAgIG1ldGhvZCAgOiAnUFVUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL2NvbWVudGFyaW9zLycgKyBkYXRhLmlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfV0pXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5kZXRhbGxlJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdOZWNlc2lkYWREZXRhbGxlQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyRyb3V0ZVBhcmFtcycsJyR3aW5kb3cnLCdDb21lbnRhcmlvJywnJHNjb3BlJywnc29ja2V0JywnJHJvb3RTY29wZScsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSwkcm91dGVQYXJhbXMsJHdpbmRvdyxDb21lbnRhcmlvLCRzY29wZSxzb2NrZXQsJHJvb3RTY29wZSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLm5lY2VzaWRhZCA9IHt9O1xuICAgICAgICB2bS5Db21lbnRhcmlvID0ge307XG5cblxuICAgICAgICBpZiAoJHJvdXRlUGFyYW1zLmlkKSB7XG4gICAgICAgICAgc29ja2V0LmxvZygnVmllbmRvIHVuYSBuZWNlc2lkYWQnKTtcbiAgICAgICAgICBOZWNlc2lkYWQuc2hvdygkcm91dGVQYXJhbXMuaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICB2bS5uZWNlc2lkYWQgPSBkYXRhO1xuICAgICAgICAgICAgICAkcm9vdFNjb3BlLnRpdGxlID0gZGF0YS50aXR1bG87XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdm0uc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzb2NrZXQubG9nKCdlZGl0YW5kbyB1bmEgbmVjZXNpZGFkJyk7XG4gICAgICAgICAgTmVjZXNpZGFkLnVwZGF0ZSh2bS5uZWNlc2lkYWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5jb21lbnRhciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgIHZtLkNvbWVudGFyaW9Gb3JtLm5lY2VzaWRhZElkID0gdm0ubmVjZXNpZGFkLmlkO1xuICAgICAgICAgIHNvY2tldC5sb2coJ2NvbWVudGFuZG8gdW5hIG5lY2VzaWRhZCcpO1xuICAgICAgICAgIENvbWVudGFyaW8uY3JlYXRlKHZtLkNvbWVudGFyaW9Gb3JtKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgdm0uQ29tZW50YXJpby5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICB2bS5uZWNlc2lkYWQuY29tZW50YXJpb3MucHVzaCh2bS5Db21lbnRhcmlvKTtcbiAgICAgICAgICAgICAgdm0uQ29tZW50YXJpbyA9IHt9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc29ja2V0LmxvZygnZWxpbWluYW5kbyB1bmEgbmVjZXNpZGFkJyk7XG4gICAgICAgICAgdmFyIHN1cmUgPSBjb25maXJtKCdSZWFsbWVudGUgZGVzZWFzIGVsaW1pbmFyIGVzdGEgcHVibGljYWNpw7NuPycpO1xuICAgICAgICAgIGlmIChzdXJlKSB7XG4gICAgICAgICAgICBOZWNlc2lkYWQuZGVsZXRlKHZtLm5lY2VzaWRhZC5pZClcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24gPSAnIy8nO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2bS51dGlsID0gZnVuY3Rpb24gKGNvbWVudGFyaW8pIHtcbiAgICAgICAgICBzb2NrZXQubG9nKCdtYXJjYW5kbyB1biBjb21lbnRhcmlvIGNvbW8gXCLDunRpbFwiJyk7XG4gICAgICAgICAgQ29tZW50YXJpby51dGlsKGNvbWVudGFyaW8uaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBjb21lbnRhcmlvLnV0aWwgPSB0cnVlO1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudXBsb2FkID0gZnVuY3Rpb24oZmlsZXMpIHtcbiAgICAgICAgICBzb2NrZXQubG9nKCdhZ3JlZ2FuZG8gZm90byBhIHVuYSBuZWNlc2lkYWQnKTtcbiAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgICAgICAgIGlmIChmaWxlc1swXSkge1xuICAgICAgICAgICAgZmQuYXBwZW5kKFwiZmlsZVwiLCBmaWxlc1swXSk7XG5cbiAgICAgICAgICAgIE5lY2VzaWRhZC51cGxvYWQoZmQsJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuaXRlbScsW10pXG4gICAgICAuZGlyZWN0aXZlKCduZWNlc2lkYWRJdGVtJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC92aWV3cy9pdGVtLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgbmVjZXNpZGFkOiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQnLFtcbiAgICAgICdhcHAubmVjZXNpZGFkLnNlcnZpY2UnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQubnVldmEnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuaXRlbScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5kZXRhbGxlJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLmNhdGVnb3JpYScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5jb21lbnRhcmlvJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLmJ1c3F1ZWRhJyxcbiAgICAgICdhcHAuY29tZW50YXJpby5zZXJ2aWNlJ1xuICAgIF0pXG4gICAgICAuY29udHJvbGxlcignTmVjZXNpZGFkZXNDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBOZWNlc2lkYWQubG9hZCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsICdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSlcbiAgICAgIC5kaXJlY3RpdmUoJ2NhdGVnb3JpYScsZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC9jYXRlLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6e1xuICAgICAgICAgICAgICBpZDonQCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLnNlcnZpY2UnLFtdKVxuICAgICAgLmZhY3RvcnkoJ05lY2VzaWRhZCcsWyckaHR0cCcsZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsb2FkOmZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9uZWNlc2lkYWRlcycpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2hvdzpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbmVjZXNpZGFkZXMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNhdGVnb3JpYTpmdW5jdGlvbiAoY2xhdmUpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2F0ZWdvcmlhcy8nICsgY2xhdmUpO1xuICAgICAgICAgIH0sICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZTpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvbmVjZXNpZGFkZXMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyZWF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRhLFxuICAgICAgICAgICAgICBtZXRob2QgIDogJ1BPU1QnLFxuICAgICAgICAgICAgICB1cmwgICAgIDogJy9hcGkvbmVjZXNpZGFkZXMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwbG9hZDpmdW5jdGlvbiAoZmQsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL25lY2VzaWRhZGVzLycgKyBpZCArICcvdXBsb2FkJywgZmQsIHtcbiAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRhLFxuICAgICAgICAgICAgICBtZXRob2QgIDogJ1BVVCcsXG4gICAgICAgICAgICAgIHVybCAgICAgOiAnL2FwaS9uZWNlc2lkYWRlcy8nICsgZGF0YS5pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH1dKVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQubnVldmEnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnbnVldmFOZWNlc2lkYWQnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLCckd2luZG93JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5LCR3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL251ZXZhLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgdXNlcjogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcIk51ZXZhTmVjZXNpZGFkQ3RybFwiLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOdWV2YU5lY2VzaWRhZEN0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH1dKVxuICAgICAgLmNvbnRyb2xsZXIoJ051ZXZhTmVjZXNpZGFkQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyR3aW5kb3cnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHdpbmRvd1xuICAgICAgKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uTmVjZXNpZGFkRm9ybSA9IHt9O1xuXG4gICAgICAgIHZtLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBOZWNlc2lkYWQuY3JlYXRlKHZtLk5lY2VzaWRhZEZvcm0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoJ05lY2VzaWRhZCBhZ3JlZ2FkYSBjb3JyZWN0YW1lbnRlIDopJywnc3VjY2VzcycpOyAkd2luZG93LmxvY2F0aW9uID0gJyMvbmVjZXNpZGFkLycgKyBkYXRhICsgJy9lZGl0YXInO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcbmFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycsIFtdKVxuICAuZGlyZWN0aXZlKCdtb25leScsIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBOVU1CRVJfUkVHRVhQID0gL15cXHMqKFxcLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSlcXHMqJC87XG5cbiAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbCwgYXR0cnMsIG5nTW9kZWxDdHJsKSB7XG4gICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChhdHRycy5taW4gfHwgMCk7XG4gICAgICB2YXIgcHJlY2lzaW9uID0gcGFyc2VGbG9hdChhdHRycy5wcmVjaXNpb24gfHwgMik7XG4gICAgICB2YXIgbGFzdFZhbGlkVmFsdWU7XG5cbiAgICAgIGZ1bmN0aW9uIHJvdW5kKG51bSkge1xuICAgICAgICB2YXIgZCA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiBkKSAvIGQ7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZvcm1hdFByZWNpc2lvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkudG9GaXhlZChwcmVjaXNpb24pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmb3JtYXRWaWV3VmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSA/ICcnIDogJycgKyB2YWx1ZTtcbiAgICAgIH1cblxuXG4gICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIGxlYWRpbmcgZGVjaW1hbCBwb2ludCwgbGlrZSBcIi41XCJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJy4nKSA9PT0gMCkge1xuICAgICAgICAgIHZhbHVlID0gJzAnICsgdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbGxvdyBcIi1cIiBpbnB1dHMgb25seSB3aGVuIG1pbiA8IDBcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJy0nKSA9PT0gMCkge1xuICAgICAgICAgIGlmIChtaW4gPj0gMCkge1xuICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSgnJyk7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJy0nKSB7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlbXB0eSA9IG5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKTtcbiAgICAgICAgaWYgKGVtcHR5IHx8IE5VTUJFUl9SRUdFWFAudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICBsYXN0VmFsaWRWYWx1ZSA9ICh2YWx1ZSA9PT0gJycpXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiAoZW1wdHkgPyB2YWx1ZSA6IHBhcnNlRmxvYXQodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZW5kZXIgdGhlIGxhc3QgdmFsaWQgaW5wdXQgaW4gdGhlIGZpZWxkXG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShmb3JtYXRWaWV3VmFsdWUobGFzdFZhbGlkVmFsdWUpKTtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ251bWJlcicsIHRydWUpO1xuICAgICAgICByZXR1cm4gbGFzdFZhbGlkVmFsdWU7XG4gICAgICB9KTtcbiAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2goZm9ybWF0Vmlld1ZhbHVlKTtcblxuICAgICAgdmFyIG1pblZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICghbmdNb2RlbEN0cmwuJGlzRW1wdHkodmFsdWUpICYmIHZhbHVlIDwgbWluKSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtaW4nLCBmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ21pbicsIHRydWUpO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2gobWluVmFsaWRhdG9yKTtcbiAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2gobWluVmFsaWRhdG9yKTtcblxuICAgICAgaWYgKGF0dHJzLm1heCkge1xuICAgICAgICB2YXIgbWF4ID0gcGFyc2VGbG9hdChhdHRycy5tYXgpO1xuICAgICAgICB2YXIgbWF4VmFsaWRhdG9yID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIW5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSAmJiB2YWx1ZSA+IG1heCkge1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtYXgnLCBmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ21heCcsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKG1heFZhbGlkYXRvcik7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2gobWF4VmFsaWRhdG9yKTtcbiAgICAgIH1cblxuICAgICAgLy8gUm91bmQgb2ZmXG4gICAgICBpZiAocHJlY2lzaW9uID4gLTEpIHtcbiAgICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUgPyByb3VuZCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gZm9ybWF0UHJlY2lzaW9uKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZWwuYmluZCgnYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbmdNb2RlbEN0cmwuJG1vZGVsVmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPSBmb3JtYXRQcmVjaXNpb24odmFsdWUpO1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICBsaW5rOiBsaW5rXG4gICAgfTtcbiAgfSkuZGlyZWN0aXZlKCdudW1iZXJzT25seScsIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG1vZGVsQ3RybCkge1xuICAgICAgICBtb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbiAoaW5wdXRWYWx1ZSkge1xuICAgICAgICAgIC8vIHRoaXMgbmV4dCBpZiBpcyBuZWNlc3NhcnkgZm9yIHdoZW4gdXNpbmcgbmctcmVxdWlyZWQgb24geW91ciBpbnB1dC5cbiAgICAgICAgICAvLyBJbiBzdWNoIGNhc2VzLCB3aGVuIGEgbGV0dGVyIGlzIHR5cGVkIGZpcnN0LCB0aGlzIHBhcnNlciB3aWxsIGJlIGNhbGxlZFxuICAgICAgICAgIC8vIGFnYWluLCBhbmQgdGhlIDJuZCB0aW1lLCB0aGUgdmFsdWUgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJyc7XG4gICAgICAgICAgdmFyIHRyYW5zZm9ybWVkSW5wdXQgPSBpbnB1dFZhbHVlLnJlcGxhY2UoL1teMC05Ky5dL2csICcnKTtcbiAgICAgICAgICBpZiAodHJhbnNmb3JtZWRJbnB1dCE9PWlucHV0VmFsdWUpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHRyYW5zZm9ybWVkSW5wdXQpO1xuICAgICAgICAgICAgbW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRJbnB1dDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnLFtdKVxuICAuZmlsdGVyKCdkaW5lcm8nLFxuICBbICckZmlsdGVyJywgJyRsb2NhbGUnLCBmdW5jdGlvbihmaWx0ZXIsIGxvY2FsZSkge1xuICAgIHZhciBjdXJyZW5jeUZpbHRlciA9IGZpbHRlcignY3VycmVuY3knKTtcbiAgICB2YXIgZm9ybWF0cyA9IGxvY2FsZS5OVU1CRVJfRk9STUFUUztcbiAgICByZXR1cm4gZnVuY3Rpb24oYW1vdW50LCBudW0sIGN1cnJlbmN5U3ltYm9sKSB7XG4gICAgICBpZiAobnVtPT09MCkgbnVtID0gLTE7XG4gICAgICB2YXIgdmFsdWUgPSBjdXJyZW5jeUZpbHRlcihhbW91bnQsIGN1cnJlbmN5U3ltYm9sKTtcbiAgICAgIHZhciBzZXAgPSB2YWx1ZS5pbmRleE9mKGZvcm1hdHMuREVDSU1BTF9TRVApKzE7XG4gICAgICB2YXIgc3ltYm9sID0gJyc7XG4gICAgICBpZiAoc2VwPHZhbHVlLmluZGV4T2YoZm9ybWF0cy5DVVJSRU5DWV9TWU0pKSBzeW1ib2wgPSAnICcrZm9ybWF0cy5DVVJSRU5DWV9TWU07XG4gICAgICByZXR1cm4gdmFsdWUuc3Vic3RyaW5nKDAsIHNlcCtudW0pK3N5bWJvbDtcbiAgICB9O1xuICB9IF0pO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAgIGFuZ3VsYXJcbiAgICAgIC5tb2R1bGUoJ2FwcC5tYWluJywgW1xuICAgICAgJ2FwcC5kaXJlY3RpdmVzJyxcbiAgICAgICdhcHAuZmlsdGVycydcbiAgICBdKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsWyckcm9vdFNjb3BlJywnJHNjb3BlJywnVXNlcicsJ25nTm90aWZ5Jywnc29ja2V0JywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBVc2VyLCBuZ05vdGlmeSxzb2NrZXQpe1xuXG4gICAgICB2YXIgdm0gPSB0aGlzO1xuXG5cbiAgICAgIHZtLmJ1c2NhciA9IGZ1bmN0aW9uIChidXNjYXIpIHtcbiAgICAgICAgaWYgKGJ1c2Nhci5sZW5ndGg8MSkge1xuICAgICAgICAgIHJldHVybiA7XG4gICAgICAgIH1cbiAgICAgICAgc29ja2V0LmVtaXQoJ25lY2VzaWRhZGVzOmJ1c2NhcicsYnVzY2FyKTtcbiAgICAgICAgc29ja2V0Lm9uKCduZWNlc2lkYWRlczpyZXN1bHRhZG8nLGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdm0ucmVzdWx0YWRvcyA9IGRhdGE7ICAgICAgICAgIFxuICAgICAgICB9KTtcblxuICAgICAgfTtcblxuXG5cbiAgICAgIFVzZXIubWUoKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHZtLnVzZXIgPSBkYXRhO1xuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBVc2VyLmN1cnJlbnQgPSBkYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxuXG4gICAgICAgICAgVXNlci5zaG93KGRhdGEuaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICB2bS51c2VyLm5lY2VzaWRhZGVzID0gZGF0YS5uZWNlc2lkYWRlcztcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgdm0ucGFsYWJyYXNDbGF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3dhbCh7XG4gICAgICAgICAgdGl0bGU6IFwiU3VzY3JpYmlydGVcIixcbiAgICAgICAgICB0ZXh0OiBcIkVzY3JpYmUgcGFsYWJyYXMgc2VwYXJhZGFzIHBvciB1bmEgY29tYSBwYXJhIHJlY2liaXIgbm90aWZpY2FjaW9uZXMgYSB0dSBjb3JyZW86XCIsXG4gICAgICAgICAgdHlwZTogXCJpbnB1dFwiLFxuICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXG4gICAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgIGFuaW1hdGlvbjogXCJzbGlkZS1mcm9tLXRvcFwiLFxuICAgICAgICAgIGlucHV0UGxhY2Vob2xkZXI6IFwiRWo6IGdpbW5hc2lvcywgZXN0w6l0aWNhcywgY29tcHV0YWNpw7NuLCBldGNcIlxuICAgICAgICB9LCBmdW5jdGlvbihpbnB1dFZhbHVlKXtcbiAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSkge1xuXG4gICAgICAgICAgICBVc2VyLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgIHdvcmRzOmlucHV0VmFsdWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzd2FsKCdTdXNjcml0byBjb3JyZWN0YW1lbnRlJywgZGF0YSwgXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG5cbiAgICAgIC8vIFVzZXIgYWdlbnQgZGlzcGxheWVkIGluIGhvbWUgcGFnZVxuICAgICAgJHNjb3BlLnVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cbiAgICAgIC8vIE5lZWRlZCBmb3IgdGhlIGxvYWRpbmcgc2NyZWVuXG4gICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpe1xuICAgICAgICAkcm9vdFNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgJHJvb3RTY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcblxuXG5cbiAgICAgICRzY29wZS5ib3R0b21SZWFjaGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8qIGdsb2JhbCBhbGVydDogZmFsc2U7ICovXG4gICAgICAgIC8vIGFsZXJ0KCdDb25ncmF0cyB5b3Ugc2Nyb2xsZWQgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCEnKTtcbiAgICAgIH07XG5cblxuICAgICAgLy9cbiAgICAgIC8vICdEcmFnJyBzY3JlZW5cbiAgICAgIC8vXG4gICAgICAkc2NvcGUubm90aWNlcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgJHNjb3BlLm5vdGljZXMucHVzaCh7aWNvbjogJ2VudmVsb3BlJywgbWVzc2FnZTogJ05vdGljZSAnICsgKGogKyAxKSB9KTtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLmRlbGV0ZU5vdGljZSA9IGZ1bmN0aW9uKG5vdGljZSkge1xuICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUubm90aWNlcy5pbmRleE9mKG5vdGljZSk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgJHNjb3BlLm5vdGljZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnNvY2tldCcsW10pXG4gICAgICAuZmFjdG9yeSgnc29ja2V0JyxbJ1VzZXInLGZ1bmN0aW9uIChVc2VyKSB7XG5cbiAgICAgICAgdmFyIHNvY2tldCA9IGlvKCk7XG4gICAgICAgIHNvY2tldC5sb2cgPSBmdW5jdGlvbiAodGV4dG8pIHtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgndXNlcnM6bG9ncycse1xuICAgICAgICAgICAgbG9nOnRleHRvLFxuICAgICAgICAgICAgZGF0ZTpuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXNlcjpVc2VyLmN1cnJlbnRcbiAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzb2NrZXQ7XG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVzZXIuY29uZmlnJywgW10pXG4gICAgLmNvbnRyb2xsZXIoJ0NvbmZpZ0N0cmwnLFsnbmdOb3RpZnknLCdVc2VyJywnJHNjb3BlJyxmdW5jdGlvbihuZ05vdGlmeSxVc2VyLCRzY29wZSl7XG5cbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS51c2VyID0ge307XG5cbiAgICAgIFVzZXIubWUoKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAgKGRhdGEpIHtcbiAgICAgICAgICB2bS51c2VyID0gZGF0YTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHZtLnNhdmUgPSBmdW5jdGlvbiAgKCkge1xuICAgICAgICBVc2VyLnVwZGF0ZSh2bS51c2VyKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnVwbG9hZCA9IGZ1bmN0aW9uKGZpbGVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTdWJpZW5kbyBhcmNoaXZvJyk7XG4gICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAvL1Rha2UgdGhlIGZpcnN0IHNlbGVjdGVkIGZpbGVcblxuICAgICAgICBpZiAoZmlsZXNbMF0pIHtcbiAgICAgICAgICBmZC5hcHBlbmQoXCJmaWxlXCIsIGZpbGVzWzBdKTtcblxuICAgICAgICAgIFVzZXIudXBsb2FkKGZkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KCdJbWFnZW4gZ3VhcmRhZGEgY29ycmVjdGFtZW50ZScsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgdm0udXNlci5waWN0dXJlID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cblxuICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyJywgW1xuICAgICdhcHAudXNlci5zZXJ2aWNlJyxcbiAgICAnYXBwLnVzZXIucHJvZmlsZScsXG4gICAgJ2FwcC51c2VyLmNvbmZpZycgLy8gZWRpdGFyIHBlcmZpbCBkZWwgdXN1YXJpbyB5IHN1IGNvbmZpZ3VyYWNpw7NuXG4gIF0pXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJyxbJ25nTm90aWZ5JywnVXNlcicsJyRyb3V0ZVBhcmFtcycsZnVuY3Rpb24obmdOb3RpZnksVXNlciwkcm91dGVQYXJhbXMpe1xuXG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgY29uc29sZS5sb2coJ0NhcmdhbmRvJyk7XG5cbiAgICAgIFVzZXIuc2hvdygkcm91dGVQYXJhbXMuaWQpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uICAoZGF0YSkge1xuICAgICAgICAgICAgdm0udXNlciA9IGRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbm8nKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24gIChlcnIpIHtcbiAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICB9KTtcblxuICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC51c2VyLnNlcnZpY2UnLCAgW10pXG5cbiAgICAgIC5mYWN0b3J5ICgnVXNlcicsIFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY3VycmVudDp7fSxcbiAgICAgICAgICBtZTpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzL3Byb2ZpbGUnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICAgICAgICBkYXRhOmRhdGEsXG4gICAgICAgICAgICAgIHVybDonL2FwaS91c2Vycy9wcm9maWxlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGxvYWQ6ZnVuY3Rpb24gKGZkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2Vycy91cGxvYWQnLCBmZCwge1xuICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3Vic2NyaWJlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxuICAgICAgICAgICAgICBkYXRhOmRhdGEsXG4gICAgICAgICAgICAgIHVybDonL2FwaS91c2Vycy9zdWJzY3JpYmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNob3c6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGw6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluL3VzZXJzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnVzZXIucHJvZmlsZScsW10pXG4gICAgICAuZGlyZWN0aXZlKCd1c2VyUHJvZmlsZScsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy91c2Vycy9wcm9maWxlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonVXNlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJyxbJ1VzZXInLCduZ05vdGlmeScsZnVuY3Rpb24gKFVzZXIsbmdOb3RpZnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIFVzZXIuYWxsKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0udXNlcnMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
