!function(){"use strict";angular.module("app",["ngRoute","ngNotify","ui.bootstrap","mobile-angular-ui","angular-loading-bar","mobile-angular-ui.gestures","app.socket","app.necesidad","app.admin","app.home","app.main","app.user"]).run(["$transform",function(e){window.$transform=e}]).run(["$rootScope",function(e){e.$on("$routeChangeSuccess",function(e,t,r){})}]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"scripts/home/scroll.html",reloadOnSearch:!1,controller:"HomeCtrl",controllerAs:"HomeCtrl"}).when("/busqueda",{template:"<busqueda></busqueda>"}).when("/necesidad/:id",{templateUrl:"scripts/necesidad/views/detalle.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/necesidad/:id/comentario/:comentarioId",{templateUrl:"scripts/necesidad/views/detalle.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/necesidad/:id/editar",{templateUrl:"scripts/necesidad/views/editar.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/categoria/:categoria",{templateUrl:"scripts/necesidad/views/categoria.html",reloadOnSearch:!1,controller:"CategoriaCtrl",controllerAs:"CategoriaCtrl"}).when("/perfil",{title:"Configuración de la cuenta",templateUrl:"scripts/users/config.html",reloadOnSearch:!1,controller:"ConfigCtrl",controllerAs:"ConfigCtrl"}).when("/usuario/:id",{template:"<user-profile></user-profile>"}).when("/contacto",{templateUrl:"scripts/shared/contacto.html"}).when("/privacidad",{templateUrl:"scripts/shared/privacidad.html"}).when("/admin",{template:"<admin-dashboard></admin-dashboard>"}).when("/admin/usuarios",{template:"<users-list></users-list>"}).when("/admin/necesidades",{template:"<necesidades-list></necesidades-list>"}).when("/admin/comentarios",{template:"<comentarios-list></comentarios-list>"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("app.admin",["app.admin.users","app.admin.necesidades","app.admin.comentarios","app.admin.dashboard","app.admin.service"])}(),function(){"use strict";angular.module("app.admin.service",[]).factory("Admin",["$http",function(e){return{dash:function(){return e.get("/api/admin/dash")},user:function(t){return e.get("/api/admin/users/"+t)},users:function(){return e.get("api/admin/users")},necesidad:function(t){return e.get("/api/admin/necesidades/"+t)},necesidades:function(){return e.get("api/admin/necesidades")}}}])}(),function(){"use strict";angular.module("app.admin.comentarios",[]).directive("comentariosList",function(){return{restrict:"E",templateUrl:"scripts/admin/comentarios.html",controller:"AdminComentariosCtrl",controllerAs:"ctrl"}}).controller("AdminComentariosCtrl",["Comentario","ngNotify","$route",function(e,t,r){var n=this;e.all().success(function(e){n.comentarios=e}).error(function(e){t.set(e,"error")}),n["delete"]=function(n){var o=confirm("¿Realmente deseas borrar este comentario?");o&&e["delete"](n).success(function(e){t.set(e,"success"),r.reload()}).error(function(e){t.set(e,"error")})},n.update=function(n){var o=prompt("Remplaza el texto",n.texto);n.texto=o,e.update(n).success(function(e){t.set(e,"success"),r.reload()}).error(function(e){t.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.dashboard",[]).directive("adminDashboard",function(){return{restrict:"E",templateUrl:"scripts/admin/dashboard.html",controller:"AdminDashCtrl",controllerAs:"ctrl"}}).controller("AdminDashCtrl",["Admin","ngNotify","socket",function(e,t,r){var n=this;n.logs=[],e.dash().success(function(e){n.dash=e}).error(function(e){t.set(e,"error")}),r.on("users:logs",function(e){t.set(e.log,"success"),n.logs.push(e)})}])}(),function(){"use strict";angular.module("app.admin.necesidades",[]).directive("necesidadesList",function(){return{restrict:"E",templateUrl:"scripts/admin/necesidades.html",controller:"AdminNecesidadesCtrl",controllerAs:"ctrl"}}).controller("AdminNecesidadesCtrl",["Necesidad","ngNotify","$route",function(e,t,r){var n=this;e.load().success(function(e){n.necesidades=e}).error(function(e){t.set(e,"error")}),n["delete"]=function(n){var o=confirm("¿Realmente deseas borrar esta necesidad?");o&&e["delete"](n).success(function(e){t.set(e,"success"),r.reload()}).error(function(e){t.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.users",[]).directive("usersList",function(){return{restrict:"E",templateUrl:"scripts/admin/users.html",controller:"AdminUsersCtrl",controllerAs:"ctrl"}}).controller("AdminUsersCtrl",["User","ngNotify",function(e,t){var r=this;e.all().success(function(e){r.users=e}).error(function(e){t.set(e,"error")}),r.ban=function(r){var n="banned"===r.type?"permitir":"bloquear",o=confirm("Realmente quieres "+n+" el acceso a "+r.name+"?");o&&e.ban(r.id).success(function(e){"banned"===r.type?r.type="usuario":r.type="banned",t.set(e,"success")}).error(function(e){t.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.home",[]).controller("HomeCtrl",["Necesidad","ngNotify",function(e,t){var r=this;e.load().success(function(e){r.necesidades=e}).error(function(e){t.set(e,"error")})}])}(),function(){"use strict";angular.module("app.necesidad.busqueda",[]).directive("busqueda",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/busqueda.html"}})}(),function(){"use strict";angular.module("app.necesidad.categoria",[]).controller("CategoriaCtrl",["Necesidad","$routeParams",function(e,t){var r=this;e.categoria(t.categoria).success(function(e){r.necesidades=e.necesidades,r.categoria=e.categoria}).error(function(e){console.error(e)})}])}(),function(){"use strict";angular.module("app.necesidad.comentario",[]).directive("comentario",function(){return{restrict:"E",templateUrl:"scripts/necesidad/comentario.html",scope:{comentario:"=",externo:"="}}})}(),function(){"use strict";angular.module("app.comentario.service",[]).factory("Comentario",["$http",function(e){return{"delete":function(t){return e["delete"]("/api/comentarios/"+t)},util:function(t){return e.patch("/api/comentarios/"+t)},all:function(){return e.get("/api/comentarios/")},create:function(t){return e({data:t,method:"POST",url:"/api/necesidades/"+t.necesidadId+"/comentarios"})},update:function(t){return e({data:t,method:"PUT",url:"/api/comentarios/"+t.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.detalle",[]).controller("NecesidadDetalleCtrl",["Necesidad","ngNotify","$routeParams","$window","Comentario","$scope","socket","$rootScope","$location","$anchorScroll",function(e,t,r,n,o,s,i,a,c,u){var d=this;d.necesidad={},d.Comentario={},i.log("Viendo una necesidad"),e.show(r.id).success(function(e){d.necesidad=e,a.title=e.titulo,r.comentarioId&&(c.hash("comentario-"+r.comentarioId),u(),d.comentarioId=r.comentarioId)}).error(function(e){t.set(e,"error")}),d.save=function(){i.log("editando una necesidad"),e.update(d.necesidad).success(function(e){t.set(e,"success")}).error(function(e){t.set(e,"error")})},d.comentar=function(){d.ComentarioForm.necesidadId=d.necesidad.id,i.log("comentando una necesidad"),o.create(d.ComentarioForm).success(function(e){t.set("Comentario agregado","success"),console.log(e),d.necesidad.comentarios.push(e),d.ComentarioForm=null,d.ComentarioForm={}}).error(function(e){t.set(e,"error")})},d["delete"]=function(){i.log("eliminando una necesidad");var r=confirm("Realmente deseas eliminar esta publicación?");r&&e["delete"](d.necesidad.id).success(function(e){t.set(e,"success"),n.location="#/"}).error(function(e){t.set(e,"error")})},d.deleteComentario=function(e){var r=confirm("Realmente deseas eliminar este comentario?");r&&o["delete"](e).success(function(r){t.set(r,"success");var n=document.getElementById("comentario-"+e);angular.element(n).remove()}).error(function(e){t.set(e,"error")})},d.util=function(e){i.log('marcando un comentario como "útil"'),o.util(e.id).success(function(r){e.util=!0,t.set(r,"success")}).error(function(e){t.set(e,"error")})},s.upload=function(n){i.log("agregando foto a una necesidad");var o=new FormData;n[0]&&(o.append("file",n[0]),e.upload(o,r.id).success(function(e){t.set(e,"success")}).error(function(e){t.set(e,"error")}))}}])}(),function(){"use strict";angular.module("app.necesidad.item",[]).directive("necesidadItem",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/item.html",scope:{necesidad:"="}}})}(),function(){"use strict";angular.module("app.necesidad",["app.necesidad.service","app.necesidad.nueva","app.necesidad.item","app.necesidad.detalle","app.necesidad.categoria","app.necesidad.comentario","app.necesidad.busqueda","app.comentario.service"]).controller("NecesidadesCtrl",["Necesidad","ngNotify",function(e,t){var r=this;e.load().success(function(e){r.necesidades=e}).error(function(e){t.set(e,"error")})}]).directive("categoria",function(){return{restrict:"E",templateUrl:"scripts/necesidad/cate.html",scope:{id:"@"}}})}(),function(){"use strict";angular.module("app.necesidad.service",[]).factory("Necesidad",["$http",function(e){return{load:function(t){return e.get("/api/necesidades")},show:function(t){return e.get("/api/necesidades/"+t)},categoria:function(t){return e.get("/api/categorias/"+t)},"delete":function(t){return e["delete"]("/api/necesidades/"+t)},create:function(t){return e({data:t,method:"POST",url:"/api/necesidades"})},upload:function(t,r){return e.post("/api/necesidades/"+r+"/upload",t,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},update:function(t){return e({data:t,method:"PUT",url:"/api/necesidades/"+t.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.nueva",[]).directive("nuevaNecesidad",["Necesidad","ngNotify","$window",function(e,t,r){return{restrict:"E",templateUrl:"scripts/necesidad/nueva.html",scope:{user:"="},controllerAs:"NuevaNecesidadCtrl",bindToController:!0,controller:"NuevaNecesidadCtrl"}}]).controller("NuevaNecesidadCtrl",["Necesidad","ngNotify","$window",function(e,t,r){var n=this;n.NecesidadForm={},n.create=function(){e.create(n.NecesidadForm).success(function(e){t.set("Necesidad agregada correctamente :)","success"),r.location="#/necesidad/"+e+"/editar"}).error(function(e){t.set(e,"error")})}}])}(),angular.module("app.directives",[]).directive("money",function(){function e(e,r,n,o){function s(e){var t=Math.pow(10,d);return Math.round(e*t)/t}function i(e){return parseFloat(e).toFixed(d)}function a(e){return o.$isEmpty(e)?"":""+e}var c,u=parseFloat(n.min||0),d=parseFloat(n.precision||2);o.$parsers.push(function(e){angular.isUndefined(e)&&(e=""),0===e.indexOf(".")&&(e="0"+e),0===e.indexOf("-")&&(u>=0?(e=null,o.$setViewValue(""),o.$render()):"-"===e&&(e=""));var r=o.$isEmpty(e);return r||t.test(e)?c=""===e?null:r?e:parseFloat(e):(o.$setViewValue(a(c)),o.$render()),o.$setValidity("number",!0),c}),o.$formatters.push(a);var l=function(e){return!o.$isEmpty(e)&&u>e?void o.$setValidity("min",!1):(o.$setValidity("min",!0),e)};if(o.$parsers.push(l),o.$formatters.push(l),n.max){var p=parseFloat(n.max),m=function(e){return!o.$isEmpty(e)&&e>p?void o.$setValidity("max",!1):(o.$setValidity("max",!0),e)};o.$parsers.push(m),o.$formatters.push(m)}d>-1&&(o.$parsers.push(function(e){return e?s(e):e}),o.$formatters.push(function(e){return e?i(e):e})),r.bind("blur",function(){var e=o.$modelValue;e&&(o.$viewValue=i(e),o.$render())})}var t=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:e}}).directive("numbersOnly",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){n.$parsers.push(function(e){if(void 0===e)return"";var t=e.replace(/[^0-9+.]/g,"");return t!==e&&(n.$setViewValue(t),n.$render()),t})}}}),angular.module("app.filters",[]).filter("dinero",["$filter","$locale",function(e,t){var r=e("currency"),n=t.NUMBER_FORMATS;return function(e,t,o){0===t&&(t=-1);var s=r(e,o),i=s.indexOf(n.DECIMAL_SEP)+1,a="";return i<s.indexOf(n.CURRENCY_SYM)&&(a=" "+n.CURRENCY_SYM),s.substring(0,i+t)+a}}]),function(){"use strict";angular.module("app.main",["app.directives","app.filters"]).controller("MainController",["$rootScope","$scope","User","ngNotify","socket",function(e,t,r,n,o){var s=this;s.buscar=function(e){e.length<1||(o.emit("necesidades:buscar",e),o.on("necesidades:resultado",function(e){s.resultados=e}))},s.login=function(){var e='<a href="/auth/facebook" class="btn btn-primary form-control">Facebook</a>';e+='<a href="/auth/facebook" class="btn btn-info form-control">Twitter</a>',e+='<a href="/auth/facebook" class="btn btn-danger form-control">Google</a>',swal({title:"Iniciar sesión",text:e,html:!0})},r.me().success(function(e){return s.user=e,e?(r.current=e,r.show(e.id).success(function(e){return s.user.necesidades=e.necesidades,o.emit("necesidades:notificaciones",r.current),o.on("necesidades:notificaciones",function(e){s.user.unread=e,console.log("Notiicaciones encontradas: ",e.length)}),e})):void 0}).success(function(e){console.log("tres"),console.log(e)}).error(function(e){console.log(e)}),s.palabrasClave=function(){swal({title:"Suscribirte",text:"Escribe palabras separadas por una coma para recibir notificaciones a tu correo:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Ej: gimnasios, estéticas, computación, etc"},function(e){return e?void r.subscribe({words:e}).success(function(e){swal("Suscrito correctamente",e,"success")}).error(function(e){n.set(e,"error")}):!1})},t.userAgent=navigator.userAgent,e.$on("$routeChangeStart",function(){e.loading=!0}),e.$on("$routeChangeSuccess",function(){e.loading=!1}),t.bottomReached=function(){},t.notices=[];for(var i=0;10>i;i++)t.notices.push({icon:"envelope",message:"Notice "+(i+1)});t.deleteNotice=function(e){var r=t.notices.indexOf(e);r>-1&&t.notices.splice(r,1)}}])}(),function(){"use strict";angular.module("app.socket",[]).factory("socket",["User",function(e){var t=io();return t.log=function(r){t.emit("users:logs",{log:r,date:new Date,user:e.current})},t}])}(),function(){"use strict";angular.module("app.user.config",[]).controller("ConfigCtrl",["ngNotify","User","$scope",function(e,t,r){var n=this;n.user={},t.me().success(function(e){n.user=e}).error(function(t){e.set(t,"error")}),n.save=function(){t.update(n.user).success(function(t){e.set(t,"success")}).error(function(t){e.set(t,"error")})},r.upload=function(r){console.log("Subiendo archivo");var o=new FormData;r[0]&&(o.append("file",r[0]),t.upload(o).success(function(t){e.set("Imagen guardada correctamente","success"),n.user.picture=t}).error(function(t){console.log(t),e.set(t,"error")}))}}])}(),function(){"use strict";angular.module("app.user",["app.user.service","app.user.profile","app.user.config"])}(),function(){"use strict";angular.module("app.user.service",[]).factory("User",["$http",function(e){return{current:{},me:function(){return e.get("/api/users/profile")},update:function(t){return e({method:"PUT",data:t,url:"/api/users/profile"})},upload:function(t){return e.post("/api/users/upload",t,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},subscribe:function(t){return e({method:"POST",data:t,url:"/api/users/subscribe"})},show:function(t){return e.get("/api/users/"+t)},ban:function(t){return e["delete"]("/api/users/"+t)},all:function(){return e.get("api/admin/users")}}}])}(),function(){"use strict";angular.module("app.user.profile",[]).directive("userProfile",function(){return{restrict:"E",templateUrl:"scripts/users/profile.html",controller:"UserCtrl",controllerAs:"ctrl"}}).controller("UserCtrl",["User","ngNotify","$routeParams",function(e,t,r){var n=this;e.show(r.id).success(function(e){n.user=e,n.user.aceptadas=_.where(e.comentarios,{util:1}),n.user.reputacion=10*e.necesidades.length+e.comentarios.length+20*n.user.aceptadas.length,n.user.visitas=_.sum(e.necesidades,"visitas")}).error(function(e){t.set(e,"error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFkbWluL2FkbWluLmNvbnRyb2xsZXIuanMiLCJhZG1pbi9hZG1pbi5zZXJ2aWNlLmpzIiwiYWRtaW4vY29tZW50YXJpb3MuZGlyZWN0aXZlLmpzIiwiYWRtaW4vZGFzaGJvYXJkLmRpcmVjdGl2ZS5qcyIsImFkbWluL25lY2VzaWRhZGVzLmRpcmVjdGl2ZS5qcyIsImFkbWluL3VzZXJzLmRpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL2J1c3F1ZWRhLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9jYXRlZ29yaWEuY29udHJvbGxlci5qcyIsIm5lY2VzaWRhZC9jb21lbnRhcmlvLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9jb21lbnRhcmlvLnNlcnZpY2UuanMiLCJuZWNlc2lkYWQvZGV0YWxsZS5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL2l0ZW0uZGlyZWN0aXZlLmpzIiwibmVjZXNpZGFkL25lY2VzaWRhZC5jb250cm9sbGVyLmpzIiwibmVjZXNpZGFkL25lY2VzaWRhZC5zZXJ2aWNlLmpzIiwibmVjZXNpZGFkL251ZXZhLmNvbnRyb2xsZXIuanMiLCJzaGFyZWQvZGlyZWN0aXZlcy5qcyIsInNoYXJlZC9maWx0ZXJzLmpzIiwic2hhcmVkL21haW4uanMiLCJzaGFyZWQvc29ja2V0LmpzIiwidXNlcnMvY29uZmlnLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy9jb250cm9sbGVyLmpzIiwidXNlcnMvc2VydmljZS5qcyIsInVzZXJzL3VzZXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdHJhbnNmb3JtIiwid2luZG93IiwiJHJvb3RTY29wZSIsIiRvbiIsImV2ZW50IiwiY3VycmVudCIsInByZXZpb3VzIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsInJlbG9hZE9uU2VhcmNoIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlIiwidGl0bGUiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmFjdG9yeSIsIiRodHRwIiwiZGFzaCIsImdldCIsInVzZXIiLCJpZCIsInVzZXJzIiwibmVjZXNpZGFkIiwibmVjZXNpZGFkZXMiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsIkNvbWVudGFyaW8iLCJuZ05vdGlmeSIsIiRyb3V0ZSIsInZtIiwidGhpcyIsImFsbCIsInN1Y2Nlc3MiLCJkYXRhIiwiY29tZW50YXJpb3MiLCJlcnJvciIsImVyciIsInNldCIsInN1cmUiLCJjb25maXJtIiwicmVsb2FkIiwidXBkYXRlIiwiY29tZW50YXJpbyIsInRleHRvIiwicHJvbXB0IiwiQWRtaW4iLCJzb2NrZXQiLCJsb2dzIiwib24iLCJsb2ciLCJwdXNoIiwiTmVjZXNpZGFkIiwibG9hZCIsIlVzZXIiLCJiYW4iLCJwYWxhYnJhIiwidHlwZSIsIm5hbWUiLCIkcm91dGVQYXJhbXMiLCJjYXRlZ29yaWEiLCJjb25zb2xlIiwic2NvcGUiLCJleHRlcm5vIiwiZGVsZXRlIiwidXRpbCIsInBhdGNoIiwiY3JlYXRlIiwibWV0aG9kIiwidXJsIiwibmVjZXNpZGFkSWQiLCIkd2luZG93IiwiJHNjb3BlIiwiJGxvY2F0aW9uIiwiJGFuY2hvclNjcm9sbCIsInNob3ciLCJ0aXR1bG8iLCJjb21lbnRhcmlvSWQiLCJoYXNoIiwic2F2ZSIsImNvbWVudGFyIiwiQ29tZW50YXJpb0Zvcm0iLCJsb2NhdGlvbiIsImRlbGV0ZUNvbWVudGFyaW8iLCJjb21lbnREaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZWxlbWVudCIsInJlbW92ZSIsInVwbG9hZCIsImZpbGVzIiwiZmQiLCJGb3JtRGF0YSIsImFwcGVuZCIsImNhbGxiYWNrIiwiY2xhdmUiLCJwb3N0Iiwid2l0aENyZWRlbnRpYWxzIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInRyYW5zZm9ybVJlcXVlc3QiLCJpZGVudGl0eSIsImJpbmRUb0NvbnRyb2xsZXIiLCJOZWNlc2lkYWRGb3JtIiwibGluayIsImVsIiwiYXR0cnMiLCJuZ01vZGVsQ3RybCIsInJvdW5kIiwibnVtIiwiZCIsIk1hdGgiLCJwb3ciLCJwcmVjaXNpb24iLCJmb3JtYXRQcmVjaXNpb24iLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwiZm9ybWF0Vmlld1ZhbHVlIiwiJGlzRW1wdHkiLCJsYXN0VmFsaWRWYWx1ZSIsIm1pbiIsIiRwYXJzZXJzIiwiaXNVbmRlZmluZWQiLCJpbmRleE9mIiwiJHNldFZpZXdWYWx1ZSIsIiRyZW5kZXIiLCJlbXB0eSIsIk5VTUJFUl9SRUdFWFAiLCJ0ZXN0IiwiJHNldFZhbGlkaXR5IiwiJGZvcm1hdHRlcnMiLCJtaW5WYWxpZGF0b3IiLCJtYXgiLCJtYXhWYWxpZGF0b3IiLCJiaW5kIiwiJG1vZGVsVmFsdWUiLCIkdmlld1ZhbHVlIiwicmVxdWlyZSIsIm1vZGVsQ3RybCIsImlucHV0VmFsdWUiLCJ0cmFuc2Zvcm1lZElucHV0IiwicmVwbGFjZSIsImZpbHRlciIsImxvY2FsZSIsImN1cnJlbmN5RmlsdGVyIiwiZm9ybWF0cyIsIk5VTUJFUl9GT1JNQVRTIiwiYW1vdW50IiwiY3VycmVuY3lTeW1ib2wiLCJzZXAiLCJERUNJTUFMX1NFUCIsInN5bWJvbCIsIkNVUlJFTkNZX1NZTSIsInN1YnN0cmluZyIsImJ1c2NhciIsImxlbmd0aCIsImVtaXQiLCJyZXN1bHRhZG9zIiwibG9naW4iLCJodG1sIiwic3dhbCIsInRleHQiLCJtZSIsInVucmVhZCIsInBhbGFicmFzQ2xhdmUiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY2xvc2VPbkNvbmZpcm0iLCJhbmltYXRpb24iLCJpbnB1dFBsYWNlaG9sZGVyIiwic3Vic2NyaWJlIiwid29yZHMiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJsb2FkaW5nIiwiYm90dG9tUmVhY2hlZCIsIm5vdGljZXMiLCJqIiwiaWNvbiIsIm1lc3NhZ2UiLCJkZWxldGVOb3RpY2UiLCJub3RpY2UiLCJpbmRleCIsInNwbGljZSIsImlvIiwiZGF0ZSIsIkRhdGUiLCJwaWN0dXJlIiwiYWNlcHRhZGFzIiwiXyIsIndoZXJlIiwicmVwdXRhY2lvbiIsInZpc2l0YXMiLCJzdW0iXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxPQUNBLFVBQ0EsV0FDQSxlQUNBLG9CQUNBLHNCQUNBLDZCQUNBLGFBQ0EsZ0JBQ0EsWUFDQSxXQUNBLFdBQ0EsYUFFQUMsS0FBQSxhQUFBLFNBQUFDLEdBQ0FDLE9BQUFELFdBQUFBLEtBRUFELEtBQUEsYUFBQSxTQUFBRyxHQUVBQSxFQUFBQyxJQUFBLHNCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLFNBU0FDLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxLQUNBQyxZQUFBLDJCQUNBQyxnQkFBQSxFQUNBQyxXQUFBLFdBQ0FDLGFBQUEsYUFFQUosS0FBQSxhQUNBSyxTQUFBLDBCQUVBTCxLQUFBLGtCQUNBQyxZQUFBLHVDQUNBRSxXQUFBLHVCQUNBQyxhQUFBLGdCQUVBSixLQUFBLDJDQUNBQyxZQUFBLHVDQUNBRSxXQUFBLHVCQUNBQyxhQUFBLGdCQUVBSixLQUFBLHlCQUNBQyxZQUFBLHNDQUNBRSxXQUFBLHVCQUNBQyxhQUFBLGdCQUVBSixLQUFBLHlCQUNBQyxZQUFBLHlDQUNBQyxnQkFBQSxFQUNBQyxXQUFBLGdCQUNBQyxhQUFBLGtCQUVBSixLQUFBLFdBQ0FNLE1BQUEsNkJBQ0FMLFlBQUEsNEJBQ0FDLGdCQUFBLEVBQ0FDLFdBQUEsYUFDQUMsYUFBQSxlQUVBSixLQUFBLGdCQUNBSyxTQUFBLGtDQUVBTCxLQUFBLGFBQ0FDLFlBQUEsaUNBRUFELEtBQUEsZUFDQUMsWUFBQSxtQ0FFQUQsS0FBQSxVQUNBSyxTQUFBLHdDQUVBTCxLQUFBLG1CQUNBSyxTQUFBLDhCQUVBTCxLQUFBLHNCQUNBSyxTQUFBLDBDQUVBTCxLQUFBLHNCQUNBSyxTQUFBLDBDQUVBRSxXQUNBQyxX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QSxXQUNBQyxhQUFBLFVBR0FELFdBQUEsWUFBQSxPQUFBLFdBQUEsZUFBQSxTQUFBNEMsRUFBQTFCLEVBQUErQixHQUNBLEdBQUE3QixHQUFBQyxJQUVBdUIsR0FBQXFCLEtBQUFoQixFQUFBdEMsSUFDQVksUUFBQSxTQUFBQyxHQUNBSixFQUFBVixLQUFBYyxFQUNBSixFQUFBVixLQUFBeUssVUFBQUMsRUFBQUMsTUFBQTdKLEVBQUFDLGFBQUE4QixLQUFBLElBQ0FuQyxFQUFBVixLQUFBNEssV0FBQSxHQUFBOUosRUFBQVYsWUFBQXFJLE9BQUEzSCxFQUFBQyxZQUFBMEgsT0FBQSxHQUFBL0gsRUFBQVYsS0FBQXlLLFVBQUFoQyxPQUVBL0gsRUFBQVYsS0FBQTZLLFFBQUFILEVBQUFJLElBQUFoSyxFQUFBVixZQUFBLGFBRUFZLE1BQUEsU0FBQUMsR0FDQVQsRUFBQVUsSUFBQUQsRUFBQSIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJywgW1xuICAgICAgJ25nUm91dGUnLFxuICAgICAgJ25nTm90aWZ5JyxcbiAgICAgICd1aS5ib290c3RyYXAnLFxuICAgICAgJ21vYmlsZS1hbmd1bGFyLXVpJyxcbiAgICAgICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgICAgICdtb2JpbGUtYW5ndWxhci11aS5nZXN0dXJlcycsXG4gICAgICAnYXBwLnNvY2tldCcsXG4gICAgICAnYXBwLm5lY2VzaWRhZCcsXG4gICAgICAnYXBwLmFkbWluJyxcbiAgICAgICdhcHAuaG9tZScsXG4gICAgICAnYXBwLm1haW4nLFxuICAgICAgJ2FwcC51c2VyJ1xuICAgIF0pXG4gICAgLnJ1bihbJyR0cmFuc2Zvcm0nLGZ1bmN0aW9uKCR0cmFuc2Zvcm0pIHtcbiAgICAgIHdpbmRvdy4kdHJhbnNmb3JtID0gJHRyYW5zZm9ybTtcbiAgICB9XSlcbiAgICAucnVuKFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRyb290U2NvcGUpIHtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoZXZlbnQsIGN1cnJlbnQsIHByZXZpb3VzKSB7XG5cbiAgICAgICAgLy8gaWYgKGN1cnJlbnQuJCRyb3V0ZSAmJiBjdXJyZW50KSB7XG4gICAgICAgIC8vICAgJHJvb3RTY29wZS50aXRsZSA9IGN1cnJlbnQuJCRyb3V0ZS50aXRsZTtcbiAgICAgICAgLy8gfVxuXG4gICAgICB9KTtcblxuICAgIH1dKVxuICAgIC5jb25maWcoWyckcm91dGVQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJyxmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9ob21lL3Njcm9sbC5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonSG9tZUN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonSG9tZUN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYnVzcXVlZGEnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8YnVzcXVlZGE+PC9idXNxdWVkYT4nLFxuICAgICAgICB9KVxuICAgICAgICAud2hlbignL25lY2VzaWRhZC86aWQnLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC92aWV3cy9kZXRhbGxlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6J05lY2VzaWRhZERldGFsbGVDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0RldGFsbGVDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL25lY2VzaWRhZC86aWQvY29tZW50YXJpby86Y29tZW50YXJpb0lkJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvZGV0YWxsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOidOZWNlc2lkYWREZXRhbGxlQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidEZXRhbGxlQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9uZWNlc2lkYWQvOmlkL2VkaXRhcicsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2VkaXRhci5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOidOZWNlc2lkYWREZXRhbGxlQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidEZXRhbGxlQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9jYXRlZ29yaWEvOmNhdGVnb3JpYScsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2NhdGVnb3JpYS5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonQ2F0ZWdvcmlhQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidDYXRlZ29yaWFDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3BlcmZpbCcsIHtcbiAgICAgICAgICB0aXRsZTonQ29uZmlndXJhY2nDs24gZGUgbGEgY3VlbnRhJyxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvdXNlcnMvY29uZmlnLmh0bWwnLFxuICAgICAgICAgIHJlbG9hZE9uU2VhcmNoOiBmYWxzZSxcbiAgICAgICAgICBjb250cm9sbGVyOidDb25maWdDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0NvbmZpZ0N0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvdXN1YXJpby86aWQnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8dXNlci1wcm9maWxlPjwvdXNlci1wcm9maWxlPidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9jb250YWN0bycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvc2hhcmVkL2NvbnRhY3RvLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcHJpdmFjaWRhZCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvc2hhcmVkL3ByaXZhY2lkYWQuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbicsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxhZG1pbi1kYXNoYm9hcmQ+PC9hZG1pbi1kYXNoYm9hcmQ+J1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FkbWluL3VzdWFyaW9zJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPHVzZXJzLWxpc3Q+PC91c2Vycy1saXN0PidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbi9uZWNlc2lkYWRlcycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxuZWNlc2lkYWRlcy1saXN0PjwvbmVjZXNpZGFkZXMtbGlzdD4nXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWRtaW4vY29tZW50YXJpb3MnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8Y29tZW50YXJpb3MtbGlzdD48L2NvbWVudGFyaW9zLWxpc3Q+J1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluJyxbXG4gICAgICAnYXBwLmFkbWluLnVzZXJzJyxcbiAgICAgICdhcHAuYWRtaW4ubmVjZXNpZGFkZXMnLFxuICAgICAgJ2FwcC5hZG1pbi5jb21lbnRhcmlvcycsXG4gICAgICAnYXBwLmFkbWluLmRhc2hib2FyZCcsXG4gICAgICAnYXBwLmFkbWluLnNlcnZpY2UnXG4gICAgXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLnNlcnZpY2UnLCAgW10pXG5cbiAgICAgIC5mYWN0b3J5ICgnQWRtaW4nLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRhc2g6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hZG1pbi9kYXNoJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VyOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hZG1pbi91c2Vycy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXNlcnM6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluL3VzZXJzJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuZWNlc2lkYWQ6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FkbWluL25lY2VzaWRhZGVzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuZWNlc2lkYWRlczpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdhcGkvYWRtaW4vbmVjZXNpZGFkZXMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4uY29tZW50YXJpb3MnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnY29tZW50YXJpb3NMaXN0JyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2FkbWluL2NvbWVudGFyaW9zLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5Db21lbnRhcmlvc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ0FkbWluQ29tZW50YXJpb3NDdHJsJyxbJ0NvbWVudGFyaW8nLCduZ05vdGlmeScsJyRyb3V0ZScsZnVuY3Rpb24gKENvbWVudGFyaW8sbmdOb3RpZnksJHJvdXRlKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBDb21lbnRhcmlvLmFsbCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLmNvbWVudGFyaW9zID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZtLmRlbGV0ZSA9IGZ1bmN0aW9uIG5hbWUoaWQpIHtcblxuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnwr9SZWFsbWVudGUgZGVzZWFzIGJvcnJhciBlc3RlIGNvbWVudGFyaW8/Jyk7XG5cbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgQ29tZW50YXJpby5kZWxldGUoaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnVwZGF0ZSA9IGZ1bmN0aW9uIChjb21lbnRhcmlvKSB7XG4gICAgICAgICAgdmFyIHRleHRvID0gcHJvbXB0KCdSZW1wbGF6YSBlbCB0ZXh0bycsY29tZW50YXJpby50ZXh0bylcblxuICAgICAgICAgIGNvbWVudGFyaW8udGV4dG8gPSB0ZXh0bztcbiAgICAgICAgICBDb21lbnRhcmlvLnVwZGF0ZShjb21lbnRhcmlvKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi5kYXNoYm9hcmQnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnYWRtaW5EYXNoYm9hcmQnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vZGFzaGJvYXJkLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5EYXNoQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5EYXNoQ3RybCcsWydBZG1pbicsJ25nTm90aWZ5Jywnc29ja2V0JyxmdW5jdGlvbiAoQWRtaW4sbmdOb3RpZnksc29ja2V0KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0ubG9ncyA9IFtdO1xuXG4gICAgICAgIEFkbWluLmRhc2goKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5kYXNoID0gZGF0YTtcblxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCd1c2Vyczpsb2dzJyxmdW5jdGlvbiAoZGF0YSkgeyAgICAgICAgICBcbiAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YS5sb2csJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICB2bS5sb2dzLnB1c2goZGF0YSk7XG4gICAgICAgIH0pO1xuXG5cblxuXG5cblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi5uZWNlc2lkYWRlcycsW10pXG4gICAgICAuZGlyZWN0aXZlKCduZWNlc2lkYWRlc0xpc3QnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vbmVjZXNpZGFkZXMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidBZG1pbk5lY2VzaWRhZGVzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5OZWNlc2lkYWRlc0N0cmwnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLCckcm91dGUnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHJvdXRlKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBOZWNlc2lkYWQubG9hZCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLm5lY2VzaWRhZGVzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZtLmRlbGV0ZSA9IGZ1bmN0aW9uIG5hbWUoaWQpIHtcblxuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnwr9SZWFsbWVudGUgZGVzZWFzIGJvcnJhciBlc3RhIG5lY2VzaWRhZD8nKTtcblxuICAgICAgICAgIGlmIChzdXJlKSB7XG4gICAgICAgICAgICBOZWNlc2lkYWQuZGVsZXRlKGlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi51c2VycycsW10pXG4gICAgICAuZGlyZWN0aXZlKCd1c2Vyc0xpc3QnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vdXNlcnMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidBZG1pblVzZXJzQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5Vc2Vyc0N0cmwnLFsnVXNlcicsJ25nTm90aWZ5JyxmdW5jdGlvbiAoVXNlcixuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgVXNlci5hbGwoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS51c2VycyA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuXG4gICAgICAgIHZtLmJhbiA9IGZ1bmN0aW9uICh1c2VyKSB7XG5cbiAgICAgICAgICB2YXIgcGFsYWJyYSA9IHVzZXIudHlwZT09PSdiYW5uZWQnPydwZXJtaXRpcic6J2Jsb3F1ZWFyJztcblxuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnUmVhbG1lbnRlIHF1aWVyZXMgJyArIHBhbGFicmEgKyAnIGVsIGFjY2VzbyBhICcgKyB1c2VyLm5hbWUgKyAnPycpO1xuICAgICAgICAgIGlmIChzdXJlKSB7XG4gICAgICAgICAgICBVc2VyLmJhbih1c2VyLmlkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgaWYgKHVzZXIudHlwZSA9PT0gJ2Jhbm5lZCcpIHtcbiAgICAgICAgICAgICAgICB1c2VyLnR5cGUgPSAndXN1YXJpbyc7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdXNlci50eXBlID0gJ2Jhbm5lZCc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmhvbWUnLFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBOZWNlc2lkYWQubG9hZCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsICdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5idXNxdWVkYScsW10pXG4gICAgICAuZGlyZWN0aXZlKCdidXNxdWVkYScsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvYnVzcXVlZGEuaHRtbCcgICAgICAgICAgICBcbiAgICAgICAgICB9O1xuICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5jYXRlZ29yaWEnLFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ0NhdGVnb3JpYUN0cmwnLFsnTmVjZXNpZGFkJywnJHJvdXRlUGFyYW1zJyxmdW5jdGlvbiAoTmVjZXNpZGFkLCRyb3V0ZVBhcmFtcykge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cblxuXG4gICAgICAgIE5lY2VzaWRhZC5jYXRlZ29yaWEoJHJvdXRlUGFyYW1zLmNhdGVnb3JpYSlcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhLm5lY2VzaWRhZGVzO1xuICAgICAgICAgICAgdm0uY2F0ZWdvcmlhID0gZGF0YS5jYXRlZ29yaWE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5jb21lbnRhcmlvJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ2NvbWVudGFyaW8nLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL2NvbWVudGFyaW8uaHRtbCcsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICBjb21lbnRhcmlvOiAnPScsXG4gICAgICAgICAgICAgIC8vIHBvbmVtb3MgdHJ1ZSBjdWFuZG8gZXN0YW1vcyB2aWVuZG8gZXN0ZSBjb21lbnRhcmlvIGRlc2RlIHVuIGx1Z2FyIHF1ZSBubyBzZWEgbGEgbmVjZXNpZGFkIGNvbW8gdGFsLCBwb3IgZWplbXBsbyBlbCBwZXJmaWwgZGUgdW4gdXN1YXJpb1xuICAgICAgICAgICAgICBleHRlcm5vOiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5jb21lbnRhcmlvLnNlcnZpY2UnLFtdKVxuICAgICAgLmZhY3RvcnkoJ0NvbWVudGFyaW8nLFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGVsZXRlOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9jb21lbnRhcmlvcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXRpbDpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wYXRjaCgnL2FwaS9jb21lbnRhcmlvcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tZW50YXJpb3MvJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjcmVhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL25lY2VzaWRhZGVzLycgKyBkYXRhLm5lY2VzaWRhZElkICsgJy9jb21lbnRhcmlvcydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBkYXRhICAgIDogIGRhdGEsXG4gICAgICAgICAgICAgIG1ldGhvZCAgOiAnUFVUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL2NvbWVudGFyaW9zLycgKyBkYXRhLmlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfV0pXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5kZXRhbGxlJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdOZWNlc2lkYWREZXRhbGxlQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyRyb3V0ZVBhcmFtcycsJyR3aW5kb3cnLCdDb21lbnRhcmlvJywnJHNjb3BlJywnc29ja2V0JywnJHJvb3RTY29wZScsJyRsb2NhdGlvbicsJyRhbmNob3JTY3JvbGwnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHJvdXRlUGFyYW1zLCR3aW5kb3csQ29tZW50YXJpbywkc2NvcGUsc29ja2V0LCRyb290U2NvcGUsJGxvY2F0aW9uLCRhbmNob3JTY3JvbGwpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5uZWNlc2lkYWQgPSB7fTtcbiAgICAgICAgdm0uQ29tZW50YXJpbyA9IHt9O1xuXG5cbiAgICAgICAgc29ja2V0LmxvZygnVmllbmRvIHVuYSBuZWNlc2lkYWQnKTtcbiAgICAgICAgTmVjZXNpZGFkLnNob3coJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5uZWNlc2lkYWQgPSBkYXRhO1xuICAgICAgICAgICAgJHJvb3RTY29wZS50aXRsZSA9IGRhdGEudGl0dWxvO1xuICAgICAgICAgICAgaWYgKCRyb3V0ZVBhcmFtcy5jb21lbnRhcmlvSWQpIHtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2NvbWVudGFyaW8tJyArICRyb3V0ZVBhcmFtcy5jb21lbnRhcmlvSWQpO1xuICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICAgIHZtLmNvbWVudGFyaW9JZCA9ICRyb3V0ZVBhcmFtcy5jb21lbnRhcmlvSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuXG4gICAgICAgIHZtLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc29ja2V0LmxvZygnZWRpdGFuZG8gdW5hIG5lY2VzaWRhZCcpO1xuICAgICAgICAgIE5lY2VzaWRhZC51cGRhdGUodm0ubmVjZXNpZGFkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uY29tZW50YXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICB2bS5Db21lbnRhcmlvRm9ybS5uZWNlc2lkYWRJZCA9IHZtLm5lY2VzaWRhZC5pZDtcbiAgICAgICAgICBzb2NrZXQubG9nKCdjb21lbnRhbmRvIHVuYSBuZWNlc2lkYWQnKTtcbiAgICAgICAgICBDb21lbnRhcmlvLmNyZWF0ZSh2bS5Db21lbnRhcmlvRm9ybSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldCgnQ29tZW50YXJpbyBhZ3JlZ2FkbycsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgICAgICAgICAgdm0ubmVjZXNpZGFkLmNvbWVudGFyaW9zLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgIHZtLkNvbWVudGFyaW9Gb3JtID0gbnVsbFxuICAgICAgICAgICAgICB2bS5Db21lbnRhcmlvRm9ybSA9IHt9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc29ja2V0LmxvZygnZWxpbWluYW5kbyB1bmEgbmVjZXNpZGFkJyk7XG4gICAgICAgICAgdmFyIHN1cmUgPSBjb25maXJtKCdSZWFsbWVudGUgZGVzZWFzIGVsaW1pbmFyIGVzdGEgcHVibGljYWNpw7NuPycpO1xuICAgICAgICAgIGlmIChzdXJlKSB7XG4gICAgICAgICAgICBOZWNlc2lkYWQuZGVsZXRlKHZtLm5lY2VzaWRhZC5pZClcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24gPSAnIy8nO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2bS5kZWxldGVDb21lbnRhcmlvID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgdmFyIHN1cmUgPSBjb25maXJtKCdSZWFsbWVudGUgZGVzZWFzIGVsaW1pbmFyIGVzdGUgY29tZW50YXJpbz8nKTtcbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgQ29tZW50YXJpby5kZWxldGUoaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29tZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbWVudGFyaW8tJyArIGlkKTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoY29tZW50RGl2KS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0udXRpbCA9IGZ1bmN0aW9uIChjb21lbnRhcmlvKSB7XG4gICAgICAgICAgc29ja2V0LmxvZygnbWFyY2FuZG8gdW4gY29tZW50YXJpbyBjb21vIFwiw7p0aWxcIicpO1xuICAgICAgICAgIENvbWVudGFyaW8udXRpbChjb21lbnRhcmlvLmlkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgY29tZW50YXJpby51dGlsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnVwbG9hZCA9IGZ1bmN0aW9uKGZpbGVzKSB7XG4gICAgICAgICAgc29ja2V0LmxvZygnYWdyZWdhbmRvIGZvdG8gYSB1bmEgbmVjZXNpZGFkJyk7XG4gICAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgaWYgKGZpbGVzWzBdKSB7XG4gICAgICAgICAgICBmZC5hcHBlbmQoXCJmaWxlXCIsIGZpbGVzWzBdKTtcbiAgICAgICAgICAgIE5lY2VzaWRhZC51cGxvYWQoZmQsJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLml0ZW0nLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnbmVjZXNpZGFkSXRlbScsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvaXRlbS5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgIG5lY2VzaWRhZDogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkJyxbXG4gICAgICAnYXBwLm5lY2VzaWRhZC5zZXJ2aWNlJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLm51ZXZhJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLml0ZW0nLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuZGV0YWxsZScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5jYXRlZ29yaWEnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuY29tZW50YXJpbycsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5idXNxdWVkYScsXG4gICAgICAnYXBwLmNvbWVudGFyaW8uc2VydmljZSdcbiAgICBdKVxuICAgICAgLmNvbnRyb2xsZXIoJ05lY2VzaWRhZGVzQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgTmVjZXNpZGFkLmxvYWQoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHZtLm5lY2VzaWRhZGVzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCAnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pXG4gICAgICAuZGlyZWN0aXZlKCdjYXRlZ29yaWEnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvY2F0ZS5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgICAgaWQ6J0AnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5zZXJ2aWNlJyxbXSlcbiAgICAgIC5mYWN0b3J5KCdOZWNlc2lkYWQnLFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbG9hZDpmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbmVjZXNpZGFkZXMnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNob3c6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL25lY2VzaWRhZGVzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjYXRlZ29yaWE6ZnVuY3Rpb24gKGNsYXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NhdGVnb3JpYXMvJyArIGNsYXZlKTtcbiAgICAgICAgICB9LCAgICAgICAgICBcbiAgICAgICAgICBkZWxldGU6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL25lY2VzaWRhZGVzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjcmVhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL25lY2VzaWRhZGVzJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGxvYWQ6ZnVuY3Rpb24gKGZkLGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9uZWNlc2lkYWRlcy8nICsgaWQgKyAnL3VwbG9hZCcsIGZkLCB7XG4gICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGRhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQVVQnLFxuICAgICAgICAgICAgICB1cmwgICAgIDogJy9hcGkvbmVjZXNpZGFkZXMvJyArIGRhdGEuaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB9XSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLm51ZXZhJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ251ZXZhTmVjZXNpZGFkJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JywnJHdpbmRvdycsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSwkd2luZG93KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC9udWV2YS5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgIHVzZXI6ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJOdWV2YU5lY2VzaWRhZEN0cmxcIixcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTnVldmFOZWNlc2lkYWRDdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9XSlcbiAgICAgIC5jb250cm9sbGVyKCdOdWV2YU5lY2VzaWRhZEN0cmwnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLCckd2luZG93JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5LCR3aW5kb3dcbiAgICAgICkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLk5lY2VzaWRhZEZvcm0gPSB7fTtcblxuICAgICAgICB2bS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgTmVjZXNpZGFkLmNyZWF0ZSh2bS5OZWNlc2lkYWRGb3JtKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KCdOZWNlc2lkYWQgYWdyZWdhZGEgY29ycmVjdGFtZW50ZSA6KScsJ3N1Y2Nlc3MnKTsgJHdpbmRvdy5sb2NhdGlvbiA9ICcjL25lY2VzaWRhZC8nICsgZGF0YSArICcvZWRpdGFyJztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbXSlcbiAgLmRpcmVjdGl2ZSgnbW9uZXknLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgTlVNQkVSX1JFR0VYUCA9IC9eXFxzKihcXC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpXFxzKiQvO1xuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWwsIGF0dHJzLCBuZ01vZGVsQ3RybCkge1xuICAgICAgdmFyIG1pbiA9IHBhcnNlRmxvYXQoYXR0cnMubWluIHx8IDApO1xuICAgICAgdmFyIHByZWNpc2lvbiA9IHBhcnNlRmxvYXQoYXR0cnMucHJlY2lzaW9uIHx8IDIpO1xuICAgICAgdmFyIGxhc3RWYWxpZFZhbHVlO1xuXG4gICAgICBmdW5jdGlvbiByb3VuZChudW0pIHtcbiAgICAgICAgdmFyIGQgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogZCkgLyBkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmb3JtYXRQcmVjaXNpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpLnRvRml4ZWQocHJlY2lzaW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9ybWF0Vmlld1ZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSkgPyAnJyA6ICcnICsgdmFsdWU7XG4gICAgICB9XG5cblxuICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBsZWFkaW5nIGRlY2ltYWwgcG9pbnQsIGxpa2UgXCIuNVwiXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCcuJykgPT09IDApIHtcbiAgICAgICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWxsb3cgXCItXCIgaW5wdXRzIG9ubHkgd2hlbiBtaW4gPCAwXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCctJykgPT09IDApIHtcbiAgICAgICAgICBpZiAobWluID49IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoJycpO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICctJykge1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZW1wdHkgPSBuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSk7XG4gICAgICAgIGlmIChlbXB0eSB8fCBOVU1CRVJfUkVHRVhQLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgbGFzdFZhbGlkVmFsdWUgPSAodmFsdWUgPT09ICcnKVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogKGVtcHR5ID8gdmFsdWUgOiBwYXJzZUZsb2F0KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVuZGVyIHRoZSBsYXN0IHZhbGlkIGlucHV0IGluIHRoZSBmaWVsZFxuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoZm9ybWF0Vmlld1ZhbHVlKGxhc3RWYWxpZFZhbHVlKSk7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdudW1iZXInLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGxhc3RWYWxpZFZhbHVlO1xuICAgICAgfSk7XG4gICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZvcm1hdFZpZXdWYWx1ZSk7XG5cbiAgICAgIHZhciBtaW5WYWxpZGF0b3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoIW5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSAmJiB2YWx1ZSA8IG1pbikge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWluJywgZmFsc2UpO1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtaW4nLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKG1pblZhbGlkYXRvcik7XG4gICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKG1pblZhbGlkYXRvcik7XG5cbiAgICAgIGlmIChhdHRycy5tYXgpIHtcbiAgICAgICAgdmFyIG1heCA9IHBhcnNlRmxvYXQoYXR0cnMubWF4KTtcbiAgICAgICAgdmFyIG1heFZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSkgJiYgdmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWF4JywgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtYXgnLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChtYXhWYWxpZGF0b3IpO1xuICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKG1heFZhbGlkYXRvcik7XG4gICAgICB9XG5cbiAgICAgIC8vIFJvdW5kIG9mZlxuICAgICAgaWYgKHByZWNpc2lvbiA+IC0xKSB7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gcm91bmQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZSA/IGZvcm1hdFByZWNpc2lvbih2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGVsLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlID0gZm9ybWF0UHJlY2lzaW9uKHZhbHVlKTtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgbGluazogbGlua1xuICAgIH07XG4gIH0pLmRpcmVjdGl2ZSgnbnVtYmVyc09ubHknLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtb2RlbEN0cmwpIHtcbiAgICAgICAgbW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24gKGlucHV0VmFsdWUpIHtcbiAgICAgICAgICAvLyB0aGlzIG5leHQgaWYgaXMgbmVjZXNzYXJ5IGZvciB3aGVuIHVzaW5nIG5nLXJlcXVpcmVkIG9uIHlvdXIgaW5wdXQuXG4gICAgICAgICAgLy8gSW4gc3VjaCBjYXNlcywgd2hlbiBhIGxldHRlciBpcyB0eXBlZCBmaXJzdCwgdGhpcyBwYXJzZXIgd2lsbCBiZSBjYWxsZWRcbiAgICAgICAgICAvLyBhZ2FpbiwgYW5kIHRoZSAybmQgdGltZSwgdGhlIHZhbHVlIHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgaWYgKGlucHV0VmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgICAgICAgIHZhciB0cmFuc2Zvcm1lZElucHV0ID0gaW5wdXRWYWx1ZS5yZXBsYWNlKC9bXjAtOSsuXS9nLCAnJyk7XG4gICAgICAgICAgaWYgKHRyYW5zZm9ybWVkSW5wdXQhPT1pbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSh0cmFuc2Zvcm1lZElucHV0KTtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkSW5wdXQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJyxbXSlcbiAgLmZpbHRlcignZGluZXJvJyxcbiAgWyAnJGZpbHRlcicsICckbG9jYWxlJywgZnVuY3Rpb24oZmlsdGVyLCBsb2NhbGUpIHtcbiAgICB2YXIgY3VycmVuY3lGaWx0ZXIgPSBmaWx0ZXIoJ2N1cnJlbmN5Jyk7XG4gICAgdmFyIGZvcm1hdHMgPSBsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFtb3VudCwgbnVtLCBjdXJyZW5jeVN5bWJvbCkge1xuICAgICAgaWYgKG51bT09PTApIG51bSA9IC0xO1xuICAgICAgdmFyIHZhbHVlID0gY3VycmVuY3lGaWx0ZXIoYW1vdW50LCBjdXJyZW5jeVN5bWJvbCk7XG4gICAgICB2YXIgc2VwID0gdmFsdWUuaW5kZXhPZihmb3JtYXRzLkRFQ0lNQUxfU0VQKSsxO1xuICAgICAgdmFyIHN5bWJvbCA9ICcnO1xuICAgICAgaWYgKHNlcDx2YWx1ZS5pbmRleE9mKGZvcm1hdHMuQ1VSUkVOQ1lfU1lNKSkgc3ltYm9sID0gJyAnK2Zvcm1hdHMuQ1VSUkVOQ1lfU1lNO1xuICAgICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZygwLCBzZXArbnVtKStzeW1ib2w7XG4gICAgfTtcbiAgfSBdKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyXG4gICAgICAubW9kdWxlKCdhcHAubWFpbicsIFtcbiAgICAgICdhcHAuZGlyZWN0aXZlcycsXG4gICAgICAnYXBwLmZpbHRlcnMnXG4gICAgXSlcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLFsnJHJvb3RTY29wZScsJyRzY29wZScsJ1VzZXInLCduZ05vdGlmeScsJ3NvY2tldCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgVXNlciwgbmdOb3RpZnksc29ja2V0KXtcblxuICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgLy8gY2FqYSBkZSB0ZXh0byBwYXJhIGhhY2VyIGLDunNxdWVkYXMgcXVlIGVzdMOhIGVuIGVsIG1lbsO6IHN1cGVyaW9yXG4gICAgICB2bS5idXNjYXIgPSBmdW5jdGlvbiAoYnVzY2FyKSB7XG4gICAgICAgIGlmIChidXNjYXIubGVuZ3RoPDEpIHtcbiAgICAgICAgICByZXR1cm4gO1xuICAgICAgICB9XG4gICAgICAgIHNvY2tldC5lbWl0KCduZWNlc2lkYWRlczpidXNjYXInLGJ1c2Nhcik7XG4gICAgICAgIHNvY2tldC5vbignbmVjZXNpZGFkZXM6cmVzdWx0YWRvJyxmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHZtLnJlc3VsdGFkb3MgPSBkYXRhO1xuICAgICAgICB9KTtcblxuICAgICAgfTtcblxuICAgICAgdm0ubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBodG1sID0gJzxhIGhyZWY9XCIvYXV0aC9mYWNlYm9va1wiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGZvcm0tY29udHJvbFwiPkZhY2Vib29rPC9hPic7XG4gICAgICAgIGh0bWwgKz0gJzxhIGhyZWY9XCIvYXV0aC9mYWNlYm9va1wiIGNsYXNzPVwiYnRuIGJ0bi1pbmZvIGZvcm0tY29udHJvbFwiPlR3aXR0ZXI8L2E+J1xuICAgICAgICBodG1sICs9ICc8YSBocmVmPVwiL2F1dGgvZmFjZWJvb2tcIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyIGZvcm0tY29udHJvbFwiPkdvb2dsZTwvYT4nXG4gICAgICAgIHN3YWwoe1xuICAgICAgICAgIHRpdGxlOidJbmljaWFyIHNlc2nDs24nLFxuICAgICAgICAgIHRleHQ6aHRtbCxcbiAgICAgICAgICBodG1sOnRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cblxuICAgICAgVXNlci5tZSgpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdm0udXNlciA9IGRhdGE7XG4gICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIFVzZXIuY3VycmVudCA9IGRhdGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIFVzZXIuc2hvdyhkYXRhLmlkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0udXNlci5uZWNlc2lkYWRlcyA9IGRhdGEubmVjZXNpZGFkZXM7XG4gICAgICAgICAgICAgIHNvY2tldC5lbWl0KCduZWNlc2lkYWRlczpub3RpZmljYWNpb25lcycsVXNlci5jdXJyZW50KTtcbiAgICAgICAgICAgICAgc29ja2V0Lm9uKCduZWNlc2lkYWRlczpub3RpZmljYWNpb25lcycsZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS51c2VyLnVucmVhZCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vdGlpY2FjaW9uZXMgZW5jb250cmFkYXM6ICcsZGF0YS5sZW5ndGgpXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCd0cmVzJylcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuXG4gICAgICB2bS5wYWxhYnJhc0NsYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2FsKHtcbiAgICAgICAgICB0aXRsZTogXCJTdXNjcmliaXJ0ZVwiLFxuICAgICAgICAgIHRleHQ6IFwiRXNjcmliZSBwYWxhYnJhcyBzZXBhcmFkYXMgcG9yIHVuYSBjb21hIHBhcmEgcmVjaWJpciBub3RpZmljYWNpb25lcyBhIHR1IGNvcnJlbzpcIixcbiAgICAgICAgICB0eXBlOiBcImlucHV0XCIsXG4gICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgYW5pbWF0aW9uOiBcInNsaWRlLWZyb20tdG9wXCIsXG4gICAgICAgICAgaW5wdXRQbGFjZWhvbGRlcjogXCJFajogZ2ltbmFzaW9zLCBlc3TDqXRpY2FzLCBjb21wdXRhY2nDs24sIGV0Y1wiXG4gICAgICAgIH0sIGZ1bmN0aW9uKGlucHV0VmFsdWUpe1xuICAgICAgICAgIGlmIChpbnB1dFZhbHVlKSB7XG5cbiAgICAgICAgICAgIFVzZXIuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgd29yZHM6aW5wdXRWYWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHN3YWwoJ1N1c2NyaXRvIGNvcnJlY3RhbWVudGUnLCBkYXRhLCBcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cblxuICAgICAgLy8gVXNlciBhZ2VudCBkaXNwbGF5ZWQgaW4gaG9tZSBwYWdlXG4gICAgICAkc2NvcGUudXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICAgICAgLy8gTmVlZGVkIGZvciB0aGUgbG9hZGluZyBzY3JlZW5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICRyb290U2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICB9KTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpe1xuICAgICAgICAkcm9vdFNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuXG5cblxuICAgICAgJHNjb3BlLmJvdHRvbVJlYWNoZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLyogZ2xvYmFsIGFsZXJ0OiBmYWxzZTsgKi9cbiAgICAgICAgLy8gYWxlcnQoJ0NvbmdyYXRzIHlvdSBzY3JvbGxlZCB0byB0aGUgZW5kIG9mIHRoZSBsaXN0IScpO1xuICAgICAgfTtcblxuXG4gICAgICAvL1xuICAgICAgLy8gJ0RyYWcnIHNjcmVlblxuICAgICAgLy9cbiAgICAgICRzY29wZS5ub3RpY2VzID0gW107XG5cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICAkc2NvcGUubm90aWNlcy5wdXNoKHtpY29uOiAnZW52ZWxvcGUnLCBtZXNzYWdlOiAnTm90aWNlICcgKyAoaiArIDEpIH0pO1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuZGVsZXRlTm90aWNlID0gZnVuY3Rpb24obm90aWNlKSB7XG4gICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5ub3RpY2VzLmluZGV4T2Yobm90aWNlKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAkc2NvcGUubm90aWNlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuc29ja2V0JyxbXSlcbiAgICAgIC5mYWN0b3J5KCdzb2NrZXQnLFsnVXNlcicsZnVuY3Rpb24gKFVzZXIpIHtcblxuICAgICAgICB2YXIgc29ja2V0ID0gaW8oKTtcbiAgICAgICAgc29ja2V0LmxvZyA9IGZ1bmN0aW9uICh0ZXh0bykge1xuICAgICAgICAgIHNvY2tldC5lbWl0KCd1c2Vyczpsb2dzJyx7XG4gICAgICAgICAgICBsb2c6dGV4dG8sXG4gICAgICAgICAgICBkYXRlOm5ldyBEYXRlKCksXG4gICAgICAgICAgICB1c2VyOlVzZXIuY3VycmVudFxuICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNvY2tldDtcbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAudXNlci5jb25maWcnLCBbXSlcbiAgICAuY29udHJvbGxlcignQ29uZmlnQ3RybCcsWyduZ05vdGlmeScsJ1VzZXInLCckc2NvcGUnLGZ1bmN0aW9uKG5nTm90aWZ5LFVzZXIsJHNjb3BlKXtcblxuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLnVzZXIgPSB7fTtcblxuICAgICAgVXNlci5tZSgpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uICAoZGF0YSkge1xuICAgICAgICAgIHZtLnVzZXIgPSBkYXRhO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24gIChlcnIpIHtcbiAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICB9KTtcblxuICAgICAgdm0uc2F2ZSA9IGZ1bmN0aW9uICAoKSB7XG4gICAgICAgIFVzZXIudXBkYXRlKHZtLnVzZXIpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUudXBsb2FkID0gZnVuY3Rpb24oZmlsZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N1YmllbmRvIGFyY2hpdm8nKTtcbiAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIC8vVGFrZSB0aGUgZmlyc3Qgc2VsZWN0ZWQgZmlsZVxuXG4gICAgICAgIGlmIChmaWxlc1swXSkge1xuICAgICAgICAgIGZkLmFwcGVuZChcImZpbGVcIiwgZmlsZXNbMF0pO1xuXG4gICAgICAgICAgVXNlci51cGxvYWQoZmQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoJ0ltYWdlbiBndWFyZGFkYSBjb3JyZWN0YW1lbnRlJywnc3VjY2VzcycpO1xuICAgICAgICAgICAgICB2bS51c2VyLnBpY3R1cmUgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuXG4gICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVzZXInLCBbXG4gICAgJ2FwcC51c2VyLnNlcnZpY2UnLFxuICAgICdhcHAudXNlci5wcm9maWxlJyxcbiAgICAvLyAnYXBwLnVzZXIubm90aWZpY2FjaW9uZXMnLFxuICAgICdhcHAudXNlci5jb25maWcnIC8vIGVkaXRhciBwZXJmaWwgZGVsIHVzdWFyaW8geSBzdSBjb25maWd1cmFjacOzblxuICBdKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC51c2VyLnNlcnZpY2UnLCAgW10pXG5cbiAgICAgIC5mYWN0b3J5ICgnVXNlcicsIFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY3VycmVudDp7fSxcbiAgICAgICAgICBtZTpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzL3Byb2ZpbGUnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICAgICAgICBkYXRhOmRhdGEsXG4gICAgICAgICAgICAgIHVybDonL2FwaS91c2Vycy9wcm9maWxlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGxvYWQ6ZnVuY3Rpb24gKGZkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2Vycy91cGxvYWQnLCBmZCwge1xuICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3Vic2NyaWJlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxuICAgICAgICAgICAgICBkYXRhOmRhdGEsXG4gICAgICAgICAgICAgIHVybDonL2FwaS91c2Vycy9zdWJzY3JpYmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNob3c6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBiYW46ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL3VzZXJzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGw6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluL3VzZXJzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnVzZXIucHJvZmlsZScsW10pXG4gICAgICAuZGlyZWN0aXZlKCd1c2VyUHJvZmlsZScsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy91c2Vycy9wcm9maWxlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonVXNlckN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJyxbJ1VzZXInLCduZ05vdGlmeScsJyRyb3V0ZVBhcmFtcycsZnVuY3Rpb24gKFVzZXIsbmdOb3RpZnksJHJvdXRlUGFyYW1zKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgVXNlci5zaG93KCRyb3V0ZVBhcmFtcy5pZClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAgKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGE7XG4gICAgICAgICAgICAgIHZtLnVzZXIuYWNlcHRhZGFzID0gXy53aGVyZShkYXRhLmNvbWVudGFyaW9zLHt1dGlsOjF9KTtcbiAgICAgICAgICAgICAgdm0udXNlci5yZXB1dGFjaW9uID0gKGRhdGEubmVjZXNpZGFkZXMubGVuZ3RoICogMTApICsgZGF0YS5jb21lbnRhcmlvcy5sZW5ndGggKyAodm0udXNlci5hY2VwdGFkYXMubGVuZ3RoICogMjApO1xuXG4gICAgICAgICAgICAgIHZtLnVzZXIudmlzaXRhcyA9IF8uc3VtKGRhdGEubmVjZXNpZGFkZXMsJ3Zpc2l0YXMnKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAgKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pO1xufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
