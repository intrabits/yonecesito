!function(){"use strict";angular.module("app",["ngCookies","ngResource","ngSanitize","ngRoute","ngNotify","ngMaterial","ngFileUpload","ui","ui.bootstrap","angular-loading-bar","datatables","app.main","app.archivos","app.document","app.tags","app.users","restangular"]).config(["$routeProvider",function(t){t.when("/",{templateUrl:"scripts/home/home.html",controller:"DashCtrl"}).when("/documento/:id",{templateUrl:"scripts/documents/guardar.html",controller:"SubirCtrl"}).when("/documentos/subir",{templateUrl:"scripts/documents/subir.html",controller:"SubirCtrl"}).when("/documentos",{templateUrl:"scripts/documents/index.html",controller:"DocumentsCtrl",controllerAs:"docs"}).when("/documentos/capturar",{templateUrl:"scripts/documents/capturar.html",controller:"DashCtrl"}).when("/documento/:id",{templateUrl:"scripts/documents/show.html",controller:"DocumentCtrl"}).when("/documento/:id",{templateUrl:"scripts/documents/show.html",controller:"DocumentCtrl"}).when("/documento/:id/edit",{templateUrl:"scripts/documents/edit.html",controller:"DocumentEditCtrl",controllerAs:"DocumentCtrl"}).when("/etiquetas",{templateUrl:"scripts/tags/index.html",controller:"TagsCtrl",controllerAs:"TagsCtrl"}).when("/etiqueta/:tag",{templateUrl:"scripts/tags/tag.html",controller:"TagCtrl",controllerAs:"TagCtrl"}).when("/configuracion",{templateUrl:"scripts/users/index.html",controller:"UserCtrl"}).when("/archivos",{templateUrl:"scripts/archivos/index.html",controller:"ArchivosCtrl"}).otherwise({redirectTo:"/"})}])}(),angular.module("app.archivos",["archivo.model"]).controller("ArchivosCtrl",["$scope","$route","Archivo","$window",function(t,e,o,n){o.all(function(e,o){e?swal("Error",e,"error"):t.archivos=o}),t.saveArchivo=function(){console.log("Guardando"),o.create(t.FormArchivo,function(e,o){e?swal("Error",e,"error"):t.registros.push(t.FormArchivo)})},t.deleteArchivo=function(e){var r=confirm("¿Realmente deseas eliminar este Archivo?");r&&o["delete"](t.Archivo_id,function(t,e){t?swal("Error",t,"error"):n.location="#/Archivos"})}}]),angular.module("archivo.model",["ngRoute"]).factory("Archivo",["$http",function(t){return{create:function(e,o){t({data:e,method:"POST",url:"/api/archivos/"}).success(function(t){o(null,t)}).error(function(t){o(t,null)})},update:function(e,o,n){t({data:o,method:"PUT",url:"/api/seguros/"+e}).success(function(t){n(null,t)}).error(function(t){n(t,null)})},detail:function(e,o){t.get("/api/seguros/"+e).success(function(t){o(null,t)}).error(function(t){o(t)})},"delete":function(e,o){t["delete"]("/api/seguros/"+e).success(function(t){o(null,t)}).error(function(t){o(t)})},all:function(e){t.get("/api/archivos/").success(function(t){e(null,t)}).error(function(t){e(t)})},find:function(e,o){t.get("/api/archivos/?ref="+e).success(function(t){o(null,t)}).error(function(t){o(t)})},departamentos:function(e){t.get("/api/departamentos/").success(function(t){e(null,t)}).error(function(t){e(t)})},ramos:function(e){t.get("/api/ramos/").success(function(t){e(null,t)}).error(function(t){e(t)})}}}]),function(){"use strict";angular.module("app.document",["app.document.service","app.document.detail","app.document.directives","app.document.upload","app.document.search"]).controller("DocumentsCtrl",["$scope","Document",function(t,e){var o=this;e.list().then(function(t){o.documents=t})["catch"](function(t){console.log(t)})}])}(),function(){"use strict";angular.module("app.document.directives",[]).directive("document",function(){return{restrict:"A",require:"ngModel",templateUrl:"scripts/documents/directive.html"}})}(),function(){"use strict";angular.module("app.document.service",["restangular"]).factory("Document",["$http","Restangular",function(t,e){return{list:function(){return e.all("api/documents").getList()},upload:function(e){return t.post("/api/documents/",e,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},show:function(e){return t.get("/api/documents/"+e)},update:function(e){return t({method:"PUT",url:"/api/documents/"+e.id,data:e})},search:function(e){return t({method:"POST",url:"/api/documents/search",data:e})},ocr:function(e){return t.get("/api/documents/"+e+"/ocr")}}}])}(),function(){"use strict";angular.module("app.document.detail",[]).controller("DocumentEditCtrl",["Document","$routeParams","ngNotify",function(t,e,o){var n=this;n.chips=["hola","bartola"],console.log("Editar documento"),t.show(e.id).success(function(o){n.document=o,console.log(o),n.chips=o.tags,n.tags=o.ocr.split(" "),o.ocr.length<1&&(console.log("Procesando (OCR)"),t.ocr(e.id).success(function(t){n.document.ocr=t,n.tags=t.split(" ")}))}).error(function(t){console.log(t),alert(t)}),n.addTag=function(t){_.includes(n.chips,t)||n.chips.push(t)},n.editDocument=function(){console.log("Editando documento"),n.document.tags=n.chips,t.update(n.document).success(function(t){o.set(t,"success")})["catch"](function(t){o.set(t,"error")})}}]).controller("DocumentCtrl",["$scope","Document","$routeParams",function(t,e,o){e.show(o.id).success(function(e){t.document=e}).error(function(t){console.log(t),alert(t)})}])}(),function(){"use strict";angular.module("app.document.search",[]).controller("DocumentSearchCtrl",["Document","$window","ngNotify","$scope",function(t,e,o,n){var r=this;r.string="",r.encontrados=[],r.search=function(){console.log("Buscando documentos (OCR)");var e=r.string.toString();t.search({string:e}).success(function(t){console.log(t),r.encontrados=t,n.encontrados=t,$("#BusquedaOCR").html(""),r.encontrados.map(function(t){console.log("Insertado LI"),$("#BusquedaOCR").append('<li><a href="#/documento/'+t.id+'"> '+t.name+"</a></li>")}),n.toggleRight()}).error(function(t){o.set(t,"error")})},r.searchTag=function(){e.location="#/etiqueta/"+r.string}}])}(),function(){"use strict";angular.module("app.document.upload",[]).controller("SubirCtrl",["$scope","Upload","$mdDialog",function(t,e,o){console.log("Subir archivo"),t.progress=!1,t.upload=function(e){console.log("Subiendo"),t.progress=!0,n(t.files,e)};var n=function(n,r){if(n&&n.length)for(var c=0;c<n.length;c++){console.log("Archivo "+c);var s=n[c];console.log(s),e.upload({url:"/api/documents/",file:n,fileName:"file"}).progress(function(e){t.progress||(t.progress=!0);var o=parseInt(100*e.loaded/e.total);console.log("progress: "+o+"% "+e.config.file.name)}).success(function(e,n,c,s){t.progress=!1,o.show(o.alert().parent(angular.element(document.body)).title("Text Scanned from Mulkiya").content(e).ariaLabel("Alert Dialog").ok("Got it!").targetEvent(r)),console.log("file "+s.file.name+"uploaded. Response: "+e)}).error(function(e){t.progress=!1,o.show(o.alert().parent(angular.element(document.body)).title("Text Scanned from Mulkiya").content(e).ariaLabel("Alert Dialog").ok("Got it!").targetEvent(r))})}}}])}(),angular.module("app.directives",[]).directive("money",function(){function t(t,o,n,r){function c(t){var e=Math.pow(10,l);return Math.round(t*e)/e}function s(t){return parseFloat(t).toFixed(l)}function i(t){return r.$isEmpty(t)?"":""+t}var u,a=parseFloat(n.min||0),l=parseFloat(n.precision||2);r.$parsers.push(function(t){angular.isUndefined(t)&&(t=""),0===t.indexOf(".")&&(t="0"+t),0===t.indexOf("-")&&(a>=0?(t=null,r.$setViewValue(""),r.$render()):"-"===t&&(t=""));var o=r.$isEmpty(t);return o||e.test(t)?u=""===t?null:o?t:parseFloat(t):(r.$setViewValue(i(u)),r.$render()),r.$setValidity("number",!0),u}),r.$formatters.push(i);var d=function(t){return!r.$isEmpty(t)&&a>t?void r.$setValidity("min",!1):(r.$setValidity("min",!0),t)};if(r.$parsers.push(d),r.$formatters.push(d),n.max){var p=parseFloat(n.max),f=function(t){return!r.$isEmpty(t)&&t>p?void r.$setValidity("max",!1):(r.$setValidity("max",!0),t)};r.$parsers.push(f),r.$formatters.push(f)}l>-1&&(r.$parsers.push(function(t){return t?c(t):t}),r.$formatters.push(function(t){return t?s(t):t})),o.bind("blur",function(){var t=r.$modelValue;t&&(r.$viewValue=s(t),r.$render())})}var e=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:t}}).directive("numbersOnly",function(){return{restrict:"A",require:"ngModel",link:function(t,e,o,n){n.$parsers.push(function(t){if(void 0===t)return"";var e=t.replace(/[^0-9+.]/g,"");return e!=t&&(n.$setViewValue(e),n.$render()),e})}}}),angular.module("app.filters",[]).filter("dinero",["$filter","$locale",function(t,e){var o=t("currency"),n=e.NUMBER_FORMATS;return function(t,e,r){0===e&&(e=-1);var c=o(t,r),s=c.indexOf(n.DECIMAL_SEP)+1,i="";return s<c.indexOf(n.CURRENCY_SYM)&&(i=" "+n.CURRENCY_SYM),c.substring(0,s+e)+i}}]),function(){"use strict";angular.module("app.main",["app.directives","app.filters"]).controller("AppCtrl",["$scope","$http","User","$window","$timeout","$mdSidenav","$mdUtil","$log","Document",function(t,e,o,n,r,c,s,i,u){function a(t){var e=s.debounce(function(){c(t).toggle().then(function(){i.debug("toggle "+t+" is done")})},300);return e}o.one("profile").get().then(function(e){t.user=e})["catch"](function(t){console.log(t.data)}),t.subir=function(e){console.log("Subiendo archivo");var o=new FormData;e[0]?(o.append("file",e[0]),u.upload(o).success(function(t){console.log("Subido correctamente"),console.log(t),n.location="#/documento/"+t+"/edit"}).error(function(t){console.log(t)}),t.demo.isOpen=!1):console.log("No se seleccionó ningún archivo")},t.toggleLeft=a("left"),t.toggleRight=a("right"),t.demo={isOpen:!1,selectedDirection:"up",selectedMode:"md-fling"}}]).controller("DashCtrl",["$scope",function(t){}]).controller("LeftCtrl",["$scope","$timeout","$mdSidenav","$log",function(t,e,o,n){t.close=function(){o("left").close().then(function(){n.debug("close LEFT is done")})}}]).controller("RightCtrl",["$scope","$timeout","$mdSidenav","$log",function(t,e,o,n){t.close=function(){o("right").close().then(function(){n.debug("close RIGHT is done")})}}])}(),function(){"use strict";angular.module("app.tags.tag",[]).controller("TagCtrl",["Tag","ngNotify","$routeParams",function(t,e,o){var n=this;n.tag=o.tag,console.log("Cargando documentos de la etiqueta "+o.tag),t.find(o.tag).success(function(t){n.documents=t}).error(function(t){e.set(t,"error")})}])}(),function(){"use strict";angular.module("app.tags",["app.tags.service","app.tags.tag"]).controller("TagsCtrl",["Tag","ngNotify",function(t,e){var o=this;o.selectTags={},t.list().success(function(t){o.tags=t}).error(function(t){e.set(t,"error")}),o.busarDocumentos=function(){console.log(o.selectTags);var n=[];_.each(o.selectTags,function(t,e){t===!0&&n.push(e)}),console.log(n),t.search(n).success(function(t){o.documents=t,console.log(t.length)}).error(function(t){e.set(t,"error")})}}])}(),function(){"use strict";angular.module("app.tags.service",[]).factory("Tag",["$http",function(t){return{list:function(){return t.get("/api/tags/")},find:function(e){return t.get("/api/tags/"+e)},search:function(e){return t({method:"POST",url:"/api/tags/",data:e})}}}])}(),function(){"use strict";angular.module("app.users",["app.users.service"]).controller("UserCtrl",["$scope","User",function(t,e){e.one("profile").get().then(function(e){t.FormUser=e})["catch"](function(t){alert(t.data)}),t.updateProfile=function(){t.FormUser.put()["catch"](function(t){alert(t.data)})}}])}(),function(){"use strict";angular.module("app.users.service",["restangular"]).factory("User",["Restangular",function(t){return{all:t.all("api/users"),one:function(e){return t.one("api/users",e)}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFyY2hpdm9zL2NvbnRyb2xsZXIuanMiLCJhcmNoaXZvcy9zZXJ2aWNlLmpzIiwiZG9jdW1lbnRzL2RvY3VtZW50LmNvbnRyb2xsZXIuanMiLCJkb2N1bWVudHMvZG9jdW1lbnQuZGlyZWN0aXZlLmpzIiwiZG9jdW1lbnRzL2RvY3VtZW50LnNlcnZpY2UuanMiLCJkb2N1bWVudHMvZWRpdC5jb250cm9sbGVyLmpzIiwiZG9jdW1lbnRzL3NlYXJjaC5jb250cm9sbGVyLmpzIiwiZG9jdW1lbnRzL3VwbG9hZC5jb250cm9sbGVyLmpzIiwic2hhcmVkL2RpcmVjdGl2ZXMuanMiLCJzaGFyZWQvZmlsdGVycy5qcyIsInNoYXJlZC9tYWluLmpzIiwidGFncy90YWcuY29udHJvbGxlci5qcyIsInRhZ3MvdGFncy5jb250cm9sbGVyLmpzIiwidGFncy90YWdzLnNlcnZpY2UuanMiLCJ1c2Vycy9jb250cm9sbGVyLmpzIiwidXNlcnMvc2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsIiRzY29wZSIsIiRyb3V0ZSIsIkFyY2hpdm8iLCIkd2luZG93IiwiYWxsIiwiZXJyIiwiZGF0YSIsInN3YWwiLCJhcmNoaXZvcyIsInNhdmVBcmNoaXZvIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZSIsIkZvcm1BcmNoaXZvIiwicmVnaXN0cm9zIiwicHVzaCIsImRlbGV0ZUFyY2hpdm8iLCJpZCIsInNpIiwiY29uZmlybSIsIkFyY2hpdm9faWQiLCJsb2NhdGlvbiIsImZhY3RvcnkiLCIkaHR0cCIsImRhdG9zIiwiY2FsbGJhY2siLCJtZXRob2QiLCJ1cmwiLCJzdWNjZXNzIiwiZXJyb3IiLCJ1cGRhdGUiLCJkZXRhaWwiLCJnZXQiLCJkZWxldGUiLCJmaW5kIiwidWlkIiwiZGVwYXJ0YW1lbnRvcyIsInJhbW9zIiwiRG9jdW1lbnQiLCJ2bSIsInRoaXMiLCJsaXN0IiwidGhlbiIsImRvY3VtZW50cyIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVxdWlyZSIsIlJlc3Rhbmd1bGFyIiwiZ2V0TGlzdCIsInVwbG9hZCIsImZkIiwicG9zdCIsIndpdGhDcmVkZW50aWFscyIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJzaG93Iiwic2VhcmNoIiwib2NyIiwiJHJvdXRlUGFyYW1zIiwibmdOb3RpZnkiLCJjaGlwcyIsImRvY3VtZW50IiwidGFncyIsInNwbGl0IiwibGVuZ3RoIiwiYWxlcnQiLCJhZGRUYWciLCJ0YWciLCJfIiwiaW5jbHVkZXMiLCJlZGl0RG9jdW1lbnQiLCJzZXQiLCJzdHJpbmciLCJlbmNvbnRyYWRvcyIsInN0ciIsInRvU3RyaW5nIiwiJCIsImh0bWwiLCJtYXAiLCJkIiwiYXBwZW5kIiwibmFtZSIsInRvZ2dsZVJpZ2h0Iiwic2VhcmNoVGFnIiwiVXBsb2FkIiwiJG1kRGlhbG9nIiwicHJvZ3Jlc3MiLCJldmVudCIsImZpbGVzIiwiaSIsImZpbGUiLCJmaWxlTmFtZSIsImV2dCIsInByb2dyZXNzUGVyY2VudGFnZSIsInBhcnNlSW50IiwibG9hZGVkIiwidG90YWwiLCJzdGF0dXMiLCJwYXJlbnQiLCJlbGVtZW50IiwiYm9keSIsInRpdGxlIiwiY29udGVudCIsImFyaWFMYWJlbCIsIm9rIiwidGFyZ2V0RXZlbnQiLCJsaW5rIiwic2NvcGUiLCJlbCIsImF0dHJzIiwibmdNb2RlbEN0cmwiLCJyb3VuZCIsIm51bSIsIk1hdGgiLCJwb3ciLCJwcmVjaXNpb24iLCJmb3JtYXRQcmVjaXNpb24iLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwiZm9ybWF0Vmlld1ZhbHVlIiwiJGlzRW1wdHkiLCJsYXN0VmFsaWRWYWx1ZSIsIm1pbiIsIiRwYXJzZXJzIiwiaXNVbmRlZmluZWQiLCJpbmRleE9mIiwiJHNldFZpZXdWYWx1ZSIsIiRyZW5kZXIiLCJlbXB0eSIsIk5VTUJFUl9SRUdFWFAiLCJ0ZXN0IiwiJHNldFZhbGlkaXR5IiwiJGZvcm1hdHRlcnMiLCJtaW5WYWxpZGF0b3IiLCJtYXgiLCJtYXhWYWxpZGF0b3IiLCJiaW5kIiwiJG1vZGVsVmFsdWUiLCIkdmlld1ZhbHVlIiwibW9kZWxDdHJsIiwiaW5wdXRWYWx1ZSIsInRyYW5zZm9ybWVkSW5wdXQiLCJyZXBsYWNlIiwiZmlsdGVyIiwibG9jYWxlIiwiY3VycmVuY3lGaWx0ZXIiLCJmb3JtYXRzIiwiTlVNQkVSX0ZPUk1BVFMiLCJhbW91bnQiLCJjdXJyZW5jeVN5bWJvbCIsInNlcCIsIkRFQ0lNQUxfU0VQIiwic3ltYm9sIiwiQ1VSUkVOQ1lfU1lNIiwic3Vic3RyaW5nIiwiVXNlciIsIiR0aW1lb3V0IiwiJG1kU2lkZW5hdiIsIiRtZFV0aWwiLCIkbG9nIiwiYnVpbGRUb2dnbGVyIiwibmF2SUQiLCJkZWJvdW5jZUZuIiwiZGVib3VuY2UiLCJ0b2dnbGUiLCJkZWJ1ZyIsIm9uZSIsInVzZXIiLCJzdWJpciIsIkZvcm1EYXRhIiwiZGVtbyIsImlzT3BlbiIsInRvZ2dsZUxlZnQiLCJzZWxlY3RlZERpcmVjdGlvbiIsInNlbGVjdGVkTW9kZSIsImNsb3NlIiwiVGFnIiwic2VsZWN0VGFncyIsImJ1c2FyRG9jdW1lbnRvcyIsInNUYWdzIiwiZWFjaCIsInQiLCJrIiwiRm9ybVVzZXIiLCJ1cGRhdGVQcm9maWxlIiwicHV0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQ0FDLE9BQUEsT0FDQSxZQUNBLGFBQ0EsYUFDQSxVQUNBLFdBQ0EsYUFDQSxlQUNBLEtBQUEsZUFDQSxzQkFDQSxhQUNBLFdBQ0EsZUFDQSxlQUNBLFdBQ0EsWUFDQSxnQkFFQUMsUUFBQSxpQkFBQSxTQUFBQyxHQUNBQSxFQUNBQyxLQUFBLEtBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsYUFFQUYsS0FBQSxrQkFDQUMsWUFBQSxpQ0FD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S0FBQSxTQUFBakIsR0FDQSxNQUFBTSxHQUFBUyxJQUFBLGFBQUFmLElBRUEwQyxPQUFBLFNBQUFyRCxHQUNBLE1BQUFpQixJQUNBRyxPQUFBLE9BQ0FDLElBQUEsYUFDQXJCLEtBQUFBLFlDakJBLFdBQ0EsWUFDQWhCLFNBQUFDLE9BQUEsYUFBQSxzQkFDQUssV0FBQSxZQUFBLFNBQUEsT0FBQSxTQUFBSSxFQUFBK0osR0FFQUEsRUFBQVcsSUFBQSxXQUFBMUksTUFDQVUsS0FBQSxTQUFBcEMsR0FDQU4sRUFBQTJMLFNBQUFyTCxJQUZBeUosU0FJQSxTQUFBMUosR0FDQStELE1BQUEvRCxFQUFBQyxRQUdBTixFQUFBNEwsY0FBQSxXQUNBNUwsRUFBQTJMLFNBQUFFLE1BQUE3TCxTQUNBLFNBQUFLLEdBQ0ErRCxNQUFBL0QsRUFBQUMsZUNoQkEsV0FDQSxZQUNBaEIsU0FDQUMsT0FBQSxxQkFBQSxnQkFFQStCLFFBQUEsUUFBQSxjQUFBLFNBQUF5QixHQUVBLE9BQ0EzQyxJQUFBMkMsRUFBQTNDLElBQUEsYUFDQXNLLElBQUEsU0FBQXpKLEdBQ0EsTUFBQThCLEdBQUEySCxJQUFBLFlBQUF6SiIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJywgW1xuICAgICAgJ25nQ29va2llcycsXG4gICAgICAnbmdSZXNvdXJjZScsXG4gICAgICAnbmdTYW5pdGl6ZScsXG4gICAgICAnbmdSb3V0ZScsXG4gICAgICAnbmdOb3RpZnknLFxuICAgICAgJ25nTWF0ZXJpYWwnLFxuICAgICAgJ25nRmlsZVVwbG9hZCcsXG4gICAgICAndWknLCd1aS5ib290c3RyYXAnLFxuICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxuICAgICAgJ2RhdGF0YWJsZXMnLFxuICAgICAgJ2FwcC5tYWluJyxcbiAgICAgICdhcHAuYXJjaGl2b3MnLFxuICAgICAgJ2FwcC5kb2N1bWVudCcsXG4gICAgICAnYXBwLnRhZ3MnLFxuICAgICAgJ2FwcC51c2VycycsXG4gICAgICAncmVzdGFuZ3VsYXInXG4gICAgXSlcbiAgICAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgLndoZW4oJy8nLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2hvbWUvaG9tZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnRGFzaEN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvZG9jdW1lbnRvLzppZCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvZG9jdW1lbnRzL2d1YXJkYXIuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1N1YmlyQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9kb2N1bWVudG9zL3N1YmlyJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9kb2N1bWVudHMvc3ViaXIuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1N1YmlyQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9kb2N1bWVudG9zJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9kb2N1bWVudHMvaW5kZXguaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0RvY3VtZW50c0N0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonZG9jcydcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9kb2N1bWVudG9zL2NhcHR1cmFyJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9kb2N1bWVudHMvY2FwdHVyYXIuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2RvY3VtZW50by86aWQnLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2RvY3VtZW50cy9zaG93Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdEb2N1bWVudEN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvZG9jdW1lbnRvLzppZCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvZG9jdW1lbnRzL3Nob3cuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0RvY3VtZW50Q3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9kb2N1bWVudG8vOmlkL2VkaXQnLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2RvY3VtZW50cy9lZGl0Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdEb2N1bWVudEVkaXRDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICdEb2N1bWVudEN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvZXRpcXVldGFzJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy90YWdzL2luZGV4Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdUYWdzQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOiAnVGFnc0N0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvZXRpcXVldGEvOnRhZycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvdGFncy90YWcuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1RhZ0N0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ1RhZ0N0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvY29uZmlndXJhY2lvbicsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvdXNlcnMvaW5kZXguaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FyY2hpdm9zJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9hcmNoaXZvcy9pbmRleC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnQXJjaGl2b3NDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgICAgfSk7XG4gICAgfV0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcbmFuZ3VsYXIubW9kdWxlKCdhcHAuYXJjaGl2b3MnLCBbJ2FyY2hpdm8ubW9kZWwnXSlcbiAgLmNvbnRyb2xsZXIoJ0FyY2hpdm9zQ3RybCcsWyckc2NvcGUnLCckcm91dGUnLCdBcmNoaXZvJywnJHdpbmRvdycsZnVuY3Rpb24oJHNjb3BlLCRyb3V0ZSwgQXJjaGl2bywgJHdpbmRvdyl7XG5cbiAgICBBcmNoaXZvLmFsbChmdW5jdGlvbiAoZXJyLGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgc3dhbCgnRXJyb3InLGVyciwnZXJyb3InKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzY29wZS5hcmNoaXZvcyA9IGRhdGE7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuc2F2ZUFyY2hpdm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zb2xlLmxvZygnR3VhcmRhbmRvJyk7XG4gICAgICBBcmNoaXZvLmNyZWF0ZSgkc2NvcGUuRm9ybUFyY2hpdm8sZnVuY3Rpb24gKGVycixkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBzd2FsKCdFcnJvcicsZXJyLCdlcnJvcicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzY29wZS5yZWdpc3Ryb3MucHVzaCgkc2NvcGUuRm9ybUFyY2hpdm8pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmRlbGV0ZUFyY2hpdm8gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHZhciBzaSA9IGNvbmZpcm0oJ8K/UmVhbG1lbnRlIGRlc2VhcyBlbGltaW5hciBlc3RlIEFyY2hpdm8/Jyk7XG4gICAgICBpZiAoc2kpIHtcbiAgICAgICAgQXJjaGl2by5kZWxldGUoJHNjb3BlLkFyY2hpdm9faWQsZnVuY3Rpb24gKGVycixkYXRhKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgc3dhbCgnRXJyb3InLGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbiA9JyMvQXJjaGl2b3MnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICB9XSk7XG4iLCJcbi8qIE1vZGVsbyBwYWdvcyAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnYXJjaGl2by5tb2RlbCcsICBbJ25nUm91dGUnXSlcbiAgICAgICAgLy9lc3RvIHNlIHF1ZWRhLCBwZXJvIHNvbG8gY29tbyBhZG9ybm8gcGFyYSBmdXR1cmFzIHJlZmVyZW5jaWFzXG4gICAgICAgIC5mYWN0b3J5ICgnQXJjaGl2bycsIFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNyZWF0ZTpmdW5jdGlvbiAoZGF0b3MsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kICA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL2FyY2hpdm9zLydcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycixudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uIChpZCxkYXRvcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRvcyxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kICA6ICdQVVQnLFxuICAgICAgICAgICAgICAgICAgICB1cmwgICAgIDogJy9hcGkvc2VndXJvcy8nK2lkXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLGRhdGEpO1xuICAgICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLG51bGwpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXRhaWw6ZnVuY3Rpb24gKGlkLGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9zZWd1cm9zLycraWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCxkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlbGV0ZTpmdW5jdGlvbiAoaWQsY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICRodHRwLmRlbGV0ZSgnL2FwaS9zZWd1cm9zLycraWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCxkYXRhKTtcbiAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWxsOmZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2FyY2hpdm9zLycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCxkYXRhKTtcbiAgICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpbmQ6ZnVuY3Rpb24gKHVpZCxjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL2FyY2hpdm9zLz9yZWY9Jyt1aWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCxkYXRhKTtcbiAgICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlcGFydGFtZW50b3M6ZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvZGVwYXJ0YW1lbnRvcy8nKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsZGF0YSk7XG4gICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJhbW9zOmZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3JhbW9zLycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCxkYXRhKTtcbiAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbn1dKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5kb2N1bWVudCcsW1xuICAgICAgJ2FwcC5kb2N1bWVudC5zZXJ2aWNlJyxcbiAgICAgICdhcHAuZG9jdW1lbnQuZGV0YWlsJyxcbiAgICAgICdhcHAuZG9jdW1lbnQuZGlyZWN0aXZlcycsXG4gICAgICAnYXBwLmRvY3VtZW50LnVwbG9hZCcsXG4gICAgICAnYXBwLmRvY3VtZW50LnNlYXJjaCdcbiAgICBdKS5jb250cm9sbGVyKCdEb2N1bWVudHNDdHJsJyxbJyRzY29wZScsJ0RvY3VtZW50JyxmdW5jdGlvbiAoJHNjb3BlLERvY3VtZW50KSB7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICBEb2N1bWVudC5saXN0KClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB2bS5kb2N1bWVudHMgPSBkYXRhO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5kb2N1bWVudC5kaXJlY3RpdmVzJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ2RvY3VtZW50JyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6J3NjcmlwdHMvZG9jdW1lbnRzL2RpcmVjdGl2ZS5odG1sJ1xuICAgICAgICB9O1xuICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmRvY3VtZW50LnNlcnZpY2UnLFsncmVzdGFuZ3VsYXInXSlcbiAgICAgIC5mYWN0b3J5ICgnRG9jdW1lbnQnLCBbJyRodHRwJywnUmVzdGFuZ3VsYXInLGZ1bmN0aW9uICgkaHR0cCxSZXN0YW5ndWxhcikge1xuXG4gICAgICAgIHJldHVybiB7XG5cbiAgICAgICAgICBsaXN0OmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoJ2FwaS9kb2N1bWVudHMnKS5nZXRMaXN0KCk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIHVwbG9hZDpmdW5jdGlvbiAoZmQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2RvY3VtZW50cy8nLCBmZCwge1xuICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBzaG93OmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9kb2N1bWVudHMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICAgICAgICB1cmw6Jy9hcGkvZG9jdW1lbnRzLycgKyBkYXRhLmlkLFxuICAgICAgICAgICAgICBkYXRhOmRhdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VhcmNoOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxuICAgICAgICAgICAgICB1cmw6Jy9hcGkvZG9jdW1lbnRzL3NlYXJjaCcsXG4gICAgICAgICAgICAgIGRhdGE6ZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvY3I6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2RvY3VtZW50cy8nICsgaWQgKyAnL29jcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuZG9jdW1lbnQuZGV0YWlsJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdEb2N1bWVudEVkaXRDdHJsJyxbJ0RvY3VtZW50JywnJHJvdXRlUGFyYW1zJywnbmdOb3RpZnknLGZ1bmN0aW9uIChEb2N1bWVudCwkcm91dGVQYXJhbXMsbmdOb3RpZnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmNoaXBzID0gWydob2xhJywnYmFydG9sYSddO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdFZGl0YXIgZG9jdW1lbnRvJyk7XG4gICAgICAgIERvY3VtZW50LnNob3coJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5kb2N1bWVudCA9IGRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIHZtLmNoaXBzID0gZGF0YS50YWdzO1xuICAgICAgICAgICAgdm0udGFncyA9IGRhdGEub2NyLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICBpZiAoZGF0YS5vY3IubGVuZ3RoPDEpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc2FuZG8gKE9DUiknKTtcbiAgICAgICAgICAgICAgRG9jdW1lbnQub2NyKCRyb3V0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAob2NyKSB7XG4gICAgICAgICAgICAgICAgICB2bS5kb2N1bWVudC5vY3IgPSBvY3I7XG5cbiAgICAgICAgICAgICAgICAgIHZtLnRhZ3MgPSBvY3Iuc3BsaXQoJyAnKTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIGFsZXJ0KGVycik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdm0uYWRkVGFnID0gZnVuY3Rpb24gKHRhZykge1xuICAgICAgICAgIGlmICghXy5pbmNsdWRlcyh2bS5jaGlwcyx0YWcpKSB7XG4gICAgICAgICAgICB2bS5jaGlwcy5wdXNoKHRhZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmVkaXREb2N1bWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRWRpdGFuZG8gZG9jdW1lbnRvJyk7XG4gICAgICAgICAgdm0uZG9jdW1lbnQudGFncyA9IHZtLmNoaXBzO1xuICAgICAgICAgIERvY3VtZW50LnVwZGF0ZSh2bS5kb2N1bWVudClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICB9XSlcbiAgICAgIC5jb250cm9sbGVyKCdEb2N1bWVudEN0cmwnLFsnJHNjb3BlJywnRG9jdW1lbnQnLCckcm91dGVQYXJhbXMnLGZ1bmN0aW9uICgkc2NvcGUsRG9jdW1lbnQsJHJvdXRlUGFyYW1zKSB7XG5cbiAgICAgICAgRG9jdW1lbnQuc2hvdygkcm91dGVQYXJhbXMuaWQpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5kb2N1bWVudCA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIGFsZXJ0KGVycik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuZG9jdW1lbnQuc2VhcmNoJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdEb2N1bWVudFNlYXJjaEN0cmwnLFsnRG9jdW1lbnQnLCckd2luZG93JywnbmdOb3RpZnknLCckc2NvcGUnLGZ1bmN0aW9uIChEb2N1bWVudCwkd2luZG93LG5nTm90aWZ5LCRzY29wZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5zdHJpbmcgPSAnJztcbiAgICAgICAgdm0uZW5jb250cmFkb3MgPSBbXTtcblxuICAgICAgICB2bS5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0J1c2NhbmRvIGRvY3VtZW50b3MgKE9DUiknKTtcbiAgICAgICAgICB2YXIgc3RyID0gdm0uc3RyaW5nLnRvU3RyaW5nKCk7XG4gICAgICAgICAgLy8gc3RyID0gc3RyLnNwbGl0KCcsJyk7XG4gICAgICAgICAgRG9jdW1lbnQuc2VhcmNoKHtzdHJpbmc6c3RyfSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICB2bS5lbmNvbnRyYWRvcyA9IGRhdGE7XG4gICAgICAgICAgICAgICRzY29wZS5lbmNvbnRyYWRvcyA9IGRhdGE7XG4gICAgICAgICAgICAgICQoJyNCdXNxdWVkYU9DUicpLmh0bWwoJycpO1xuICAgICAgICAgICAgICB2bS5lbmNvbnRyYWRvcy5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSW5zZXJ0YWRvIExJJyk7XG4gICAgICAgICAgICAgICAgJChcIiNCdXNxdWVkYU9DUlwiKS5hcHBlbmQoJzxsaT48YSBocmVmPVwiIy9kb2N1bWVudG8vJyArIGQuaWQgKydcIj4gJyAgKyBkLm5hbWUgKyAnPC9hPjwvbGk+Jyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlUmlnaHQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uc2VhcmNoVGFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICR3aW5kb3cubG9jYXRpb24gPSAnIy9ldGlxdWV0YS8nICsgdm0uc3RyaW5nO1xuICAgICAgICB9O1xuXG5cblxuICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuZG9jdW1lbnQudXBsb2FkJyxbXSlcbiAgICAuY29udHJvbGxlcignU3ViaXJDdHJsJyxbJyRzY29wZScsJ1VwbG9hZCcsJyRtZERpYWxvZycsZnVuY3Rpb24gKCRzY29wZSxVcGxvYWQsJG1kRGlhbG9nKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3ViaXIgYXJjaGl2bycpO1xuICAgICAgJHNjb3BlLnByb2dyZXNzID0gZmFsc2U7XG5cblxuXG4gICAgICAkc2NvcGUudXBsb2FkID0gZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWJpZW5kbycpO1xuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgdXBsb2FkKCRzY29wZS5maWxlcywgZXZlbnQpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHVwbG9hZCA9IGZ1bmN0aW9uIChmaWxlcywgZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQXJjaGl2byAnICsgaSk7XG4gICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IGZpbGVzW2ldO1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZSk7XG4gICAgICAgICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL2RvY3VtZW50cy8nLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IGZpbGVzLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBcImZpbGVcIlxuICAgICAgICAgICAgICAgICAgfSkucHJvZ3Jlc3MoZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3NQZXJjZW50YWdlID0gcGFyc2VJbnQoMTAwLjAgKiBldnQubG9hZGVkIC8gZXZ0LnRvdGFsKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncHJvZ3Jlc3M6ICcgKyBwcm9ncmVzc1BlcmNlbnRhZ2UgKyAnJSAnICsgZXZ0LmNvbmZpZy5maWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmFsZXJ0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRpdGxlKCdUZXh0IFNjYW5uZWQgZnJvbSBNdWxraXlhJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb250ZW50KGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXJpYUxhYmVsKCdBbGVydCBEaWFsb2cnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9rKCdHb3QgaXQhJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YXJnZXRFdmVudChldmVudClcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaWxlICcgKyBjb25maWcuZmlsZS5uYW1lICsgJ3VwbG9hZGVkLiBSZXNwb25zZTogJyArIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmFsZXJ0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFyZW50KGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGl0bGUoJ1RleHQgU2Nhbm5lZCBmcm9tIE11bGtpeWEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb250ZW50KGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFyaWFMYWJlbCgnQWxlcnQgRGlhbG9nJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub2soJ0dvdCBpdCEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50YXJnZXRFdmVudChldmVudClcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH1dKTtcbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbXSlcbiAgLmRpcmVjdGl2ZSgnbW9uZXknLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgTlVNQkVSX1JFR0VYUCA9IC9eXFxzKihcXC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpXFxzKiQvO1xuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWwsIGF0dHJzLCBuZ01vZGVsQ3RybCkge1xuICAgICAgdmFyIG1pbiA9IHBhcnNlRmxvYXQoYXR0cnMubWluIHx8IDApO1xuICAgICAgdmFyIHByZWNpc2lvbiA9IHBhcnNlRmxvYXQoYXR0cnMucHJlY2lzaW9uIHx8IDIpO1xuICAgICAgdmFyIGxhc3RWYWxpZFZhbHVlO1xuXG4gICAgICBmdW5jdGlvbiByb3VuZChudW0pIHtcbiAgICAgICAgdmFyIGQgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogZCkgLyBkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmb3JtYXRQcmVjaXNpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpLnRvRml4ZWQocHJlY2lzaW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9ybWF0Vmlld1ZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSkgPyAnJyA6ICcnICsgdmFsdWU7XG4gICAgICB9XG5cblxuICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBsZWFkaW5nIGRlY2ltYWwgcG9pbnQsIGxpa2UgXCIuNVwiXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCcuJykgPT09IDApIHtcbiAgICAgICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWxsb3cgXCItXCIgaW5wdXRzIG9ubHkgd2hlbiBtaW4gPCAwXG4gICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCctJykgPT09IDApIHtcbiAgICAgICAgICBpZiAobWluID49IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoJycpO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICctJykge1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZW1wdHkgPSBuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSk7XG4gICAgICAgIGlmIChlbXB0eSB8fCBOVU1CRVJfUkVHRVhQLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgbGFzdFZhbGlkVmFsdWUgPSAodmFsdWUgPT09ICcnKVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogKGVtcHR5ID8gdmFsdWUgOiBwYXJzZUZsb2F0KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVuZGVyIHRoZSBsYXN0IHZhbGlkIGlucHV0IGluIHRoZSBmaWVsZFxuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoZm9ybWF0Vmlld1ZhbHVlKGxhc3RWYWxpZFZhbHVlKSk7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdudW1iZXInLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGxhc3RWYWxpZFZhbHVlO1xuICAgICAgfSk7XG4gICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZvcm1hdFZpZXdWYWx1ZSk7XG5cbiAgICAgIHZhciBtaW5WYWxpZGF0b3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoIW5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSAmJiB2YWx1ZSA8IG1pbikge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWluJywgZmFsc2UpO1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtaW4nLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKG1pblZhbGlkYXRvcik7XG4gICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKG1pblZhbGlkYXRvcik7XG5cbiAgICAgIGlmIChhdHRycy5tYXgpIHtcbiAgICAgICAgdmFyIG1heCA9IHBhcnNlRmxvYXQoYXR0cnMubWF4KTtcbiAgICAgICAgdmFyIG1heFZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSkgJiYgdmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWF4JywgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtYXgnLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChtYXhWYWxpZGF0b3IpO1xuICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKG1heFZhbGlkYXRvcik7XG4gICAgICB9XG5cbiAgICAgIC8vIFJvdW5kIG9mZlxuICAgICAgaWYgKHByZWNpc2lvbiA+IC0xKSB7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gcm91bmQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBuZ01vZGVsQ3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZSA/IGZvcm1hdFByZWNpc2lvbih2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGVsLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlID0gZm9ybWF0UHJlY2lzaW9uKHZhbHVlKTtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgbGluazogbGlua1xuICAgIH07XG4gIH0pLmRpcmVjdGl2ZSgnbnVtYmVyc09ubHknLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBtb2RlbEN0cmwpIHtcbiAgICAgICAgbW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24gKGlucHV0VmFsdWUpIHtcbiAgICAgICAgICAvLyB0aGlzIG5leHQgaWYgaXMgbmVjZXNzYXJ5IGZvciB3aGVuIHVzaW5nIG5nLXJlcXVpcmVkIG9uIHlvdXIgaW5wdXQuXG4gICAgICAgICAgLy8gSW4gc3VjaCBjYXNlcywgd2hlbiBhIGxldHRlciBpcyB0eXBlZCBmaXJzdCwgdGhpcyBwYXJzZXIgd2lsbCBiZSBjYWxsZWRcbiAgICAgICAgICAvLyBhZ2FpbiwgYW5kIHRoZSAybmQgdGltZSwgdGhlIHZhbHVlIHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgaWYgKGlucHV0VmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgICAgICAgIHZhciB0cmFuc2Zvcm1lZElucHV0ID0gaW5wdXRWYWx1ZS5yZXBsYWNlKC9bXjAtOSsuXS9nLCAnJyk7XG4gICAgICAgICAgaWYgKHRyYW5zZm9ybWVkSW5wdXQhPWlucHV0VmFsdWUpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHRyYW5zZm9ybWVkSW5wdXQpO1xuICAgICAgICAgICAgbW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRJbnB1dDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnLFtdKVxuICAuZmlsdGVyKCdkaW5lcm8nLFxuICBbICckZmlsdGVyJywgJyRsb2NhbGUnLCBmdW5jdGlvbihmaWx0ZXIsIGxvY2FsZSkge1xuICAgIHZhciBjdXJyZW5jeUZpbHRlciA9IGZpbHRlcignY3VycmVuY3knKTtcbiAgICB2YXIgZm9ybWF0cyA9IGxvY2FsZS5OVU1CRVJfRk9STUFUUztcbiAgICByZXR1cm4gZnVuY3Rpb24oYW1vdW50LCBudW0sIGN1cnJlbmN5U3ltYm9sKSB7XG4gICAgICBpZiAobnVtPT09MCkgbnVtID0gLTE7XG4gICAgICB2YXIgdmFsdWUgPSBjdXJyZW5jeUZpbHRlcihhbW91bnQsIGN1cnJlbmN5U3ltYm9sKTtcbiAgICAgIHZhciBzZXAgPSB2YWx1ZS5pbmRleE9mKGZvcm1hdHMuREVDSU1BTF9TRVApKzE7XG4gICAgICB2YXIgc3ltYm9sID0gJyc7XG4gICAgICBpZiAoc2VwPHZhbHVlLmluZGV4T2YoZm9ybWF0cy5DVVJSRU5DWV9TWU0pKSBzeW1ib2wgPSAnICcrZm9ybWF0cy5DVVJSRU5DWV9TWU07XG4gICAgICByZXR1cm4gdmFsdWUuc3Vic3RyaW5nKDAsIHNlcCtudW0pK3N5bWJvbDtcbiAgICB9O1xuICB9IF0pO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwLm1haW4nLCBbXG4gICAgJ2FwcC5kaXJlY3RpdmVzJyxcbiAgICAnYXBwLmZpbHRlcnMnXG4gIF0pXG4gICAgLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLFsnJHNjb3BlJywnJGh0dHAnLCdVc2VyJywnJHdpbmRvdycsJyR0aW1lb3V0JywnJG1kU2lkZW5hdicsJyRtZFV0aWwnLCckbG9nJywnRG9jdW1lbnQnLGZ1bmN0aW9uICgkc2NvcGUsJGh0dHAsVXNlciwkd2luZG93LCR0aW1lb3V0LCRtZFNpZGVuYXYsICRtZFV0aWwsICRsb2csRG9jdW1lbnQpIHtcblxuICAgICAgVXNlci5vbmUoJ3Byb2ZpbGUnKS5nZXQoKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAgKGRhdGEpIHtcbiAgICAgICAgICAkc2NvcGUudXNlciA9IGRhdGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAgKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5kYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLnN1YmlyID0gZnVuY3Rpb24oZmlsZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnU3ViaWVuZG8gYXJjaGl2bycpO1xuICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgIC8vVGFrZSB0aGUgZmlyc3Qgc2VsZWN0ZWQgZmlsZVxuXG4gICAgICAgICAgaWYgKGZpbGVzWzBdKSB7XG4gICAgICAgICAgICBmZC5hcHBlbmQoXCJmaWxlXCIsIGZpbGVzWzBdKTtcblxuICAgICAgICAgICAgRG9jdW1lbnQudXBsb2FkKGZkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWJpZG8gY29ycmVjdGFtZW50ZScpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24gPSAnIy9kb2N1bWVudG8vJyArIGRhdGEgKyAnL2VkaXQnO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAkc2NvcGUuZGVtby5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBzZSBzZWxlY2Npb27DsyBuaW5nw7puIGFyY2hpdm8nKTtcbiAgICAgICAgICB9XG5cblxuICAgICAgICB9O1xuXG4gICAgICAkc2NvcGUudG9nZ2xlTGVmdCA9IGJ1aWxkVG9nZ2xlcignbGVmdCcpO1xuICAgICAgJHNjb3BlLnRvZ2dsZVJpZ2h0ID0gYnVpbGRUb2dnbGVyKCdyaWdodCcpO1xuICAgICAgLyoqXG4gICAgICAgKiBCdWlsZCBoYW5kbGVyIHRvIG9wZW4vY2xvc2UgYSBTaWRlTmF2OyB3aGVuIGFuaW1hdGlvbiBmaW5pc2hlc1xuICAgICAgICogcmVwb3J0IGNvbXBsZXRpb24gaW4gY29uc29sZVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBidWlsZFRvZ2dsZXIobmF2SUQpIHtcbiAgICAgICAgdmFyIGRlYm91bmNlRm4gPSAgJG1kVXRpbC5kZWJvdW5jZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAkbWRTaWRlbmF2KG5hdklEKVxuICAgICAgICAgICAgICAgIC50b2dnbGUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICRsb2cuZGVidWcoXCJ0b2dnbGUgXCIgKyBuYXZJRCArIFwiIGlzIGRvbmVcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LDMwMCk7XG4gICAgICAgIHJldHVybiBkZWJvdW5jZUZuO1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuZGVtbyA9IHtcbiAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgc2VsZWN0ZWREaXJlY3Rpb246ICd1cCcsXG4gICAgICAgIHNlbGVjdGVkTW9kZTonbWQtZmxpbmcnXG4gICAgICB9O1xuXG4gICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ0Rhc2hDdHJsJyxbJyRzY29wZScsZnVuY3Rpb24gKCRzY29wZSkge1xuXG5cblxuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdMZWZ0Q3RybCcsIFsnJHNjb3BlJywnJHRpbWVvdXQnLCckbWRTaWRlbmF2JywnJGxvZycsZnVuY3Rpb24gKCRzY29wZSwgJHRpbWVvdXQsICRtZFNpZGVuYXYsICRsb2cpIHtcbiAgICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1kU2lkZW5hdignbGVmdCcpLmNsb3NlKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbG9nLmRlYnVnKFwiY2xvc2UgTEVGVCBpcyBkb25lXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignUmlnaHRDdHJsJywgWyckc2NvcGUnLCckdGltZW91dCcsJyRtZFNpZGVuYXYnLCckbG9nJyxmdW5jdGlvbiAoJHNjb3BlLCAkdGltZW91dCwgJG1kU2lkZW5hdiwgJGxvZykge1xuICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbWRTaWRlbmF2KCdyaWdodCcpLmNsb3NlKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbG9nLmRlYnVnKFwiY2xvc2UgUklHSFQgaXMgZG9uZVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC50YWdzLnRhZycsW10pXG4gICAgICAuY29udHJvbGxlcignVGFnQ3RybCcsWydUYWcnLCduZ05vdGlmeScsJyRyb3V0ZVBhcmFtcycsZnVuY3Rpb24gKFRhZyxuZ05vdGlmeSwkcm91dGVQYXJhbXMpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS50YWcgPSAkcm91dGVQYXJhbXMudGFnO1xuICAgICAgICBjb25zb2xlLmxvZygnQ2FyZ2FuZG8gZG9jdW1lbnRvcyBkZSBsYSBldGlxdWV0YSAnICsgJHJvdXRlUGFyYW1zLnRhZyk7XG5cbiAgICAgICAgVGFnLmZpbmQoJHJvdXRlUGFyYW1zLnRhZylcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0uZG9jdW1lbnRzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnRhZ3MnLFtcbiAgICAgICdhcHAudGFncy5zZXJ2aWNlJyxcbiAgICAgICdhcHAudGFncy50YWcnXG4gICAgXSlcbiAgICAgIC5jb250cm9sbGVyKCdUYWdzQ3RybCcsWydUYWcnLCduZ05vdGlmeScsZnVuY3Rpb24gKFRhZyxuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uc2VsZWN0VGFncyA9IHt9O1xuXG4gICAgICAgIFRhZy5saXN0KClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0udGFncyA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB2bS5idXNhckRvY3VtZW50b3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codm0uc2VsZWN0VGFncyk7XG4gICAgICAgICAgdmFyIHNUYWdzID0gW107XG5cbiAgICAgICAgICBfLmVhY2godm0uc2VsZWN0VGFncyxmdW5jdGlvbiAodCxrKSB7XG4gICAgICAgICAgICBpZiAodD09PXRydWUpIHtcbiAgICAgICAgICAgICAgc1RhZ3MucHVzaChrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKHNUYWdzKTtcblxuICAgICAgICAgIFRhZy5zZWFyY2goc1RhZ3MpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICB2bS5kb2N1bWVudHMgPSBkYXRhO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnRhZ3Muc2VydmljZScsW10pXG4gICAgICAuZmFjdG9yeSAoJ1RhZycsIFsnJGh0dHAnLGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGlzdDpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3RhZ3MvJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmaW5kOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS90YWdzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWFyY2g6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXG4gICAgICAgICAgICAgIHVybDonL2FwaS90YWdzLycsXG4gICAgICAgICAgICAgIGRhdGE6ZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VycycsIFsnYXBwLnVzZXJzLnNlcnZpY2UnXSlcbiAgICAuY29udHJvbGxlcignVXNlckN0cmwnLFsnJHNjb3BlJywnVXNlcicsZnVuY3Rpb24oJHNjb3BlLFVzZXIpe1xuXG4gICAgICBVc2VyLm9uZSgncHJvZmlsZScpLmdldCgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICAoZGF0YSkge1xuICAgICAgICAgICRzY29wZS5Gb3JtVXNlciA9IGRhdGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAgKGVycikge1xuICAgICAgICAgIGFsZXJ0KGVyci5kYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICRzY29wZS51cGRhdGVQcm9maWxlID0gZnVuY3Rpb24gICgpIHtcbiAgICAgICAgJHNjb3BlLkZvcm1Vc2VyLnB1dCgpXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgICBhbGVydChlcnIuZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC51c2Vycy5zZXJ2aWNlJywgIFsncmVzdGFuZ3VsYXInXSlcblxuICAgICAgLmZhY3RvcnkgKCdVc2VyJywgWydSZXN0YW5ndWxhcicsZnVuY3Rpb24gKFJlc3Rhbmd1bGFyKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhbGw6UmVzdGFuZ3VsYXIuYWxsKCdhcGkvdXNlcnMnKSxcbiAgICAgICAgICBvbmU6ZnVuY3Rpb24gIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZSgnYXBpL3VzZXJzJyxpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfV0pO1xuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9