!function(){"use strict";angular.module("app",["ngRoute","ngNotify","ui.bootstrap","mobile-angular-ui","angular-loading-bar","mobile-angular-ui.gestures","app.socket","app.necesidad","app.admin","app.home","app.main","app.user"]).run(["$transform",function(e){window.$transform=e}]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"scripts/home/scroll.html",reloadOnSearch:!1,controller:"HomeCtrl",controllerAs:"HomeCtrl"}).when("/busqueda",{template:"<busqueda></busqueda>"}).when("/necesidad/:id",{templateUrl:"scripts/necesidad/views/detalle.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/necesidad/:id/editar",{templateUrl:"scripts/necesidad/views/editar.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/categoria/:categoria",{templateUrl:"scripts/necesidad/views/categoria.html",reloadOnSearch:!1,controller:"CategoriaCtrl",controllerAs:"CategoriaCtrl"}).when("/perfil",{templateUrl:"scripts/users/config.html",reloadOnSearch:!1,controller:"ConfigCtrl",controllerAs:"ConfigCtrl"}).when("/usuario/:id",{template:"<user-profile></user-profile>"}).when("/contacto",{templateUrl:"scripts/shared/contacto.html"}).when("/privacidad",{templateUrl:"scripts/shared/privacidad.html"}).when("/admin",{template:"<admin-dashboard></admin-dashboard>"}).when("/admin/usuarios",{template:"<users-list></users-list>"}).when("/admin/necesidades",{template:"<necesidades-list></necesidades-list>"}).when("/admin/comentarios",{template:"<comentarios-list></comentarios-list>"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("app.home",[]).controller("HomeCtrl",["Necesidad","ngNotify",function(e,r){var t=this;e.load().success(function(e){t.necesidades=e}).error(function(e){r.set(e,"error")})}])}(),function(){"use strict";angular.module("app.admin",["app.admin.users","app.admin.necesidades","app.admin.comentarios","app.admin.dashboard","app.admin.service"])}(),function(){"use strict";angular.module("app.admin.service",[]).factory("Admin",["$http",function(e){return{dash:function(){return e.get("/api/admin/dash")},user:function(r){return e.get("/api/admin/users/"+r)},users:function(){return e.get("api/admin/users")},necesidad:function(r){return e.get("/api/admin/necesidades/"+r)},necesidades:function(){return e.get("api/admin/necesidades")}}}])}(),function(){"use strict";angular.module("app.admin.comentarios",[]).directive("comentariosList",function(){return{restrict:"E",templateUrl:"scripts/admin/comentarios.html",controller:"AdminComentariosCtrl",controllerAs:"ctrl"}}).controller("AdminComentariosCtrl",["Comentario","ngNotify","$route",function(e,r,t){var n=this;e.all().success(function(e){n.comentarios=e}).error(function(e){r.set(e,"error")}),n["delete"]=function(n){var s=confirm("¿Realmente deseas borrar este comentario?");s&&e["delete"](n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})},n.update=function(n){var s=prompt("Remplaza el texto",n.texto);n.texto=s,e.update(n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.dashboard",[]).directive("adminDashboard",function(){return{restrict:"E",templateUrl:"scripts/admin/dashboard.html",controller:"AdminDashCtrl",controllerAs:"ctrl"}}).controller("AdminDashCtrl",["Admin","ngNotify",function(e,r){var t=this;e.dash().success(function(e){t.dash=e}).error(function(e){r.set(e,"error")})}])}(),function(){"use strict";angular.module("app.admin.necesidades",[]).directive("necesidadesList",function(){return{restrict:"E",templateUrl:"scripts/admin/necesidades.html",controller:"AdminNecesidadesCtrl",controllerAs:"ctrl"}}).controller("AdminNecesidadesCtrl",["Necesidad","ngNotify","$route",function(e,r,t){var n=this;e.load().success(function(e){n.necesidades=e}).error(function(e){r.set(e,"error")}),n["delete"]=function(n){var s=confirm("¿Realmente deseas borrar esta necesidad?");s&&e["delete"](n).success(function(e){r.set(e,"success"),t.reload()}).error(function(e){r.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.users",[]).directive("usersList",function(){return{restrict:"E",templateUrl:"scripts/admin/users.html",controller:"AdminUsersCtrl",controllerAs:"ctrl"}}).controller("AdminUsersCtrl",["User","ngNotify",function(e,r){var t=this;e.all().success(function(e){t.users=e}).error(function(e){r.set(e,"error")})}])}(),angular.module("app.directives",[]).directive("money",function(){function e(e,t,n,s){function i(e){var r=Math.pow(10,d);return Math.round(e*r)/r}function o(e){return parseFloat(e).toFixed(d)}function a(e){return s.$isEmpty(e)?"":""+e}var c,u=parseFloat(n.min||0),d=parseFloat(n.precision||2);s.$parsers.push(function(e){angular.isUndefined(e)&&(e=""),0===e.indexOf(".")&&(e="0"+e),0===e.indexOf("-")&&(u>=0?(e=null,s.$setViewValue(""),s.$render()):"-"===e&&(e=""));var t=s.$isEmpty(e);return t||r.test(e)?c=""===e?null:t?e:parseFloat(e):(s.$setViewValue(a(c)),s.$render()),s.$setValidity("number",!0),c}),s.$formatters.push(a);var l=function(e){return!s.$isEmpty(e)&&u>e?void s.$setValidity("min",!1):(s.$setValidity("min",!0),e)};if(s.$parsers.push(l),s.$formatters.push(l),n.max){var p=parseFloat(n.max),f=function(e){return!s.$isEmpty(e)&&e>p?void s.$setValidity("max",!1):(s.$setValidity("max",!0),e)};s.$parsers.push(f),s.$formatters.push(f)}d>-1&&(s.$parsers.push(function(e){return e?i(e):e}),s.$formatters.push(function(e){return e?o(e):e})),t.bind("blur",function(){var e=s.$modelValue;e&&(s.$viewValue=o(e),s.$render())})}var r=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:e}}).directive("numbersOnly",function(){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){n.$parsers.push(function(e){if(void 0===e)return"";var r=e.replace(/[^0-9+.]/g,"");return r!==e&&(n.$setViewValue(r),n.$render()),r})}}}),angular.module("app.filters",[]).filter("dinero",["$filter","$locale",function(e,r){var t=e("currency"),n=r.NUMBER_FORMATS;return function(e,r,s){0===r&&(r=-1);var i=t(e,s),o=i.indexOf(n.DECIMAL_SEP)+1,a="";return o<i.indexOf(n.CURRENCY_SYM)&&(a=" "+n.CURRENCY_SYM),i.substring(0,o+r)+a}}]),function(){"use strict";angular.module("app.main",["app.directives","app.filters"]).controller("MainController",["$rootScope","$scope","User","ngNotify","socket",function(e,r,t,n,s){var i=this;i.buscar=function(e){e.length<3||(s.emit("necesidades:buscar",e),s.on("necesidades:resultado",function(e){i.resultados=e}))},t.me().success(function(e){i.user=e,console.log(e),t.show(e.id).success(function(e){i.user.necesidades=e.necesidades})}).error(function(e){console.log(e)}),i.palabrasClave=function(){swal({title:"Suscribirte",text:"Escribe palabras separadas por una coma para recibir notificaciones a tu correo:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Ej: gimnasios, estéticas, computación, etc"},function(e){return e?void t.subscribe({words:e}).success(function(e){swal("Suscrito correctamente",e,"success")}).error(function(e){n.set(e,"error")}):!1})},r.userAgent=navigator.userAgent,e.$on("$routeChangeStart",function(){e.loading=!0}),e.$on("$routeChangeSuccess",function(){e.loading=!1}),r.bottomReached=function(){},r.notices=[];for(var o=0;10>o;o++)r.notices.push({icon:"envelope",message:"Notice "+(o+1)});r.deleteNotice=function(e){var t=r.notices.indexOf(e);t>-1&&r.notices.splice(t,1)}}])}(),function(){"use strict";angular.module("app.socket",[]).factory("socket",function(){var e=io();return e})}(),function(){"use strict";angular.module("app.necesidad.busqueda",[]).directive("busqueda",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/busqueda.html"}})}(),function(){"use strict";angular.module("app.necesidad.categoria",[]).controller("CategoriaCtrl",["Necesidad","$routeParams",function(e,r){var t=this;e.categoria(r.categoria).success(function(e){t.necesidades=e.necesidades,t.categoria=e.categoria}).error(function(e){console.error(e)})}])}(),function(){"use strict";angular.module("app.necesidad.comentario",[]).directive("comentario",function(){return{restrict:"E",templateUrl:"scripts/necesidad/comentario.html",scope:{comentario:"="}}})}(),function(){"use strict";angular.module("app.comentario.service",[]).factory("Comentario",["$http",function(e){return{"delete":function(r){return e["delete"]("/api/comentarios/"+r)},util:function(r){return e.patch("/api/comentarios/"+r)},all:function(){return e.get("/api/comentarios/")},create:function(r){return e({data:r,method:"POST",url:"/api/necesidades/"+r.necesidadId+"/comentarios"})},update:function(r){return e({data:r,method:"PUT",url:"/api/comentarios/"+r.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.detalle",[]).controller("NecesidadDetalleCtrl",["Necesidad","ngNotify","$routeParams","$window","Comentario","$scope",function(e,r,t,n,s,i){var o=this;o.necesidad={},o.Comentario={},t.id&&e.show(t.id).success(function(e){o.necesidad=e}).error(function(e){r.set(e,"error")}),o.save=function(){e.update(o.necesidad).success(function(e){r.set(e,"success")}).error(function(e){r.set(e,"error")})},o.comentar=function(){o.ComentarioForm.necesidadId=o.necesidad.id,s.create(o.ComentarioForm).success(function(e){r.set(e,"success"),o.Comentario.createdAt=new Date,o.necesidad.comentarios.push(o.Comentario),o.Comentario={}}).error(function(e){r.set(e,"error")})},o["delete"]=function(){var t=confirm("Realmente deseas eliminar esta publicación?");t&&e["delete"](o.necesidad.id).success(function(e){r.set(e,"success"),n.location="#/"}).error(function(e){r.set(e,"error")})},o.util=function(e){s.util(e.id).success(function(t){e.util=!0,r.set(t,"success")}).error(function(e){r.set(e,"error")})},i.upload=function(n){console.log("Subiendo archivo");var s=new FormData;n[0]&&(s.append("file",n[0]),e.upload(s,t.id).success(function(e){r.set(e,"success"),console.log(e)}).error(function(e){console.log(e),r.set(e,"error")}))}}])}(),function(){"use strict";angular.module("app.necesidad.item",[]).directive("necesidadItem",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/item.html",scope:{necesidad:"="}}})}(),function(){"use strict";angular.module("app.necesidad",["app.necesidad.service","app.necesidad.nueva","app.necesidad.item","app.necesidad.detalle","app.necesidad.categoria","app.necesidad.comentario","app.necesidad.busqueda","app.comentario.service"]).controller("NecesidadesCtrl",["Necesidad","ngNotify",function(e,r){var t=this;e.load().success(function(e){t.necesidades=e}).error(function(e){r.set(e,"error")})}]).directive("categoria",function(){return{restrict:"E",templateUrl:"scripts/necesidad/cate.html",scope:{id:"@"}}})}(),function(){"use strict";angular.module("app.necesidad.service",[]).factory("Necesidad",["$http",function(e){return{load:function(r){return e.get("/api/necesidades")},show:function(r){return e.get("/api/necesidades/"+r)},categoria:function(r){return e.get("/api/categorias/"+r)},"delete":function(r){return e["delete"]("/api/necesidades/"+r)},create:function(r){return e({data:r,method:"POST",url:"/api/necesidades"})},upload:function(r,t){return e.post("/api/necesidades/"+t+"/upload",r,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},update:function(r){return e({data:r,method:"PUT",url:"/api/necesidades/"+r.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.nueva",[]).directive("nuevaNecesidad",["Necesidad","ngNotify","$window",function(e,r,t){return{restrict:"E",templateUrl:"scripts/necesidad/nueva.html",scope:{user:"="},controllerAs:"NuevaNecesidadCtrl",bindToController:!0,controller:"NuevaNecesidadCtrl"}}]).controller("NuevaNecesidadCtrl",["Necesidad","ngNotify","$window",function(e,r,t){var n=this;n.NecesidadForm={},n.create=function(){e.create(n.NecesidadForm).success(function(e){r.set("Necesidad agregada correctamente :)","success"),t.location="#/necesidad/"+e+"/editar"}).error(function(e){r.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.user.config",[]).controller("ConfigCtrl",["ngNotify","User","$scope",function(e,r,t){var n=this;n.user={},r.me().success(function(e){n.user=e}).error(function(r){e.set(r,"error")}),n.save=function(){r.update(n.user).success(function(r){e.set(r,"success")}).error(function(r){e.set(r,"error")})},t.upload=function(t){console.log("Subiendo archivo");var s=new FormData;t[0]&&(s.append("file",t[0]),r.upload(s).success(function(r){e.set("Imagen guardada correctamente","success"),n.user.picture=r}).error(function(r){console.log(r),e.set(r,"error")}))}}])}(),function(){"use strict";angular.module("app.user",["app.user.service","app.user.profile","app.user.config"]).controller("UserCtrl",["ngNotify","User","$routeParams",function(e,r,t){var n=this;console.log("Cargando"),r.show(t.id).success(function(e){n.user=e,console.log("no"),console.log(e)}).error(function(r){e.set(r,"error")})}])}(),function(){"use strict";angular.module("app.user.service",[]).factory("User",["$http",function(e){return{me:function(){return e.get("/api/users/profile")},update:function(r){return e({method:"PUT",data:r,url:"/api/users/profile"})},upload:function(r){return e.post("/api/users/upload",r,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},subscribe:function(r){return e({method:"POST",data:r,url:"/api/users/subscribe"})},show:function(r){return e.get("/api/users/"+r)},all:function(){return e.get("api/admin/users")}}}])}(),function(){"use strict";angular.module("app.user.profile",[]).directive("userProfile",function(){return{restrict:"E",templateUrl:"scripts/users/profile.html",controller:"UserCtrl",controllerAs:"ctrl"}}).controller("UserCtrl",["User","ngNotify",function(e,r){var t=this;e.all().success(function(e){t.users=e}).error(function(e){r.set(e,"error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiYWRtaW4vYWRtaW4uY29udHJvbGxlci5qcyIsImFkbWluL2FkbWluLnNlcnZpY2UuanMiLCJhZG1pbi9jb21lbnRhcmlvcy5kaXJlY3RpdmUuanMiLCJhZG1pbi9kYXNoYm9hcmQuZGlyZWN0aXZlLmpzIiwiYWRtaW4vbmVjZXNpZGFkZXMuZGlyZWN0aXZlLmpzIiwiYWRtaW4vdXNlcnMuZGlyZWN0aXZlLmpzIiwic2hhcmVkL2RpcmVjdGl2ZXMuanMiLCJzaGFyZWQvZmlsdGVycy5qcyIsInNoYXJlZC9tYWluLmpzIiwic2hhcmVkL3NvY2tldC5qcyIsIm5lY2VzaWRhZC9idXNxdWVkYS5kaXJlY3RpdmUuanMiLCJuZWNlc2lkYWQvY2F0ZWdvcmlhLmNvbnRyb2xsZXIuanMiLCJuZWNlc2lkYWQvY29tZW50YXJpby5kaXJlY3RpdmUuanMiLCJuZWNlc2lkYWQvY29tZW50YXJpby5zZXJ2aWNlLmpzIiwibmVjZXNpZGFkL2RldGFsbGUuY29udHJvbGxlci5qcyIsIm5lY2VzaWRhZC9pdGVtLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9uZWNlc2lkYWQuY29udHJvbGxlci5qcyIsIm5lY2VzaWRhZC9uZWNlc2lkYWQuc2VydmljZS5qcyIsIm5lY2VzaWRhZC9udWV2YS5jb250cm9sbGVyLmpzIiwidXNlcnMvY29uZmlnLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy9jb250cm9sbGVyLmpzIiwidXNlcnMvc2VydmljZS5qcyIsInVzZXJzL3VzZXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdHJhbnNmb3JtIiwid2luZG93IiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJyZWxvYWRPblNlYXJjaCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJOZWNlc2lkYWQiLCJuZ05vdGlmeSIsInZtIiwidGhpcyIsImxvYWQiLCJzdWNjZXNzIiwiZGF0YSIsIm5lY2VzaWRhZGVzIiwiZXJyb3IiLCJlcnIiLCJzZXQiLCJmYWN0b3J5IiwiJGh0dHAiLCJkYXNoIiwiZ2V0IiwidXNlciIsImlkIiwidXNlcnMiLCJuZWNlc2lkYWQiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsIkNvbWVudGFyaW8iLCIkcm91dGUiLCJhbGwiLCJjb21lbnRhcmlvcyIsInN1cmUiLCJjb25maXJtIiwicmVsb2FkIiwidXBkYXRlIiwiY29tZW50YXJpbyIsInRleHRvIiwicHJvbXB0IiwiQWRtaW4iLCJVc2VyIiwibGluayIsInNjb3BlIiwiZWwiLCJhdHRycyIsIm5nTW9kZWxDdHJsIiwicm91bmQiLCJudW0iLCJkIiwiTWF0aCIsInBvdyIsInByZWNpc2lvbiIsImZvcm1hdFByZWNpc2lvbiIsInZhbHVlIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJmb3JtYXRWaWV3VmFsdWUiLCIkaXNFbXB0eSIsImxhc3RWYWxpZFZhbHVlIiwibWluIiwiJHBhcnNlcnMiLCJwdXNoIiwiaXNVbmRlZmluZWQiLCJpbmRleE9mIiwiJHNldFZpZXdWYWx1ZSIsIiRyZW5kZXIiLCJlbXB0eSIsIk5VTUJFUl9SRUdFWFAiLCJ0ZXN0IiwiJHNldFZhbGlkaXR5IiwiJGZvcm1hdHRlcnMiLCJtaW5WYWxpZGF0b3IiLCJtYXgiLCJtYXhWYWxpZGF0b3IiLCJiaW5kIiwiJG1vZGVsVmFsdWUiLCIkdmlld1ZhbHVlIiwicmVxdWlyZSIsImVsZW1lbnQiLCJtb2RlbEN0cmwiLCJpbnB1dFZhbHVlIiwidW5kZWZpbmVkIiwidHJhbnNmb3JtZWRJbnB1dCIsInJlcGxhY2UiLCJmaWx0ZXIiLCJsb2NhbGUiLCJjdXJyZW5jeUZpbHRlciIsImZvcm1hdHMiLCJOVU1CRVJfRk9STUFUUyIsImFtb3VudCIsImN1cnJlbmN5U3ltYm9sIiwic2VwIiwiREVDSU1BTF9TRVAiLCJzeW1ib2wiLCJDVVJSRU5DWV9TWU0iLCJzdWJzdHJpbmciLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwic29ja2V0IiwiYnVzY2FyIiwibGVuZ3RoIiwiZW1pdCIsIm9uIiwicmVzdWx0YWRvcyIsIm1lIiwiY29uc29sZSIsImxvZyIsInNob3ciLCJwYWxhYnJhc0NsYXZlIiwic3dhbCIsInRpdGxlIiwidGV4dCIsInR5cGUiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY2xvc2VPbkNvbmZpcm0iLCJhbmltYXRpb24iLCJpbnB1dFBsYWNlaG9sZGVyIiwic3Vic2NyaWJlIiwid29yZHMiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCIkb24iLCJsb2FkaW5nIiwiYm90dG9tUmVhY2hlZCIsIm5vdGljZXMiLCJqIiwiaWNvbiIsIm1lc3NhZ2UiLCJkZWxldGVOb3RpY2UiLCJub3RpY2UiLCJpbmRleCIsInNwbGljZSIsImlvIiwiJHJvdXRlUGFyYW1zIiwiY2F0ZWdvcmlhIiwiZGVsZXRlIiwidXRpbCIsInBhdGNoIiwiY3JlYXRlIiwibWV0aG9kIiwidXJsIiwibmVjZXNpZGFkSWQiLCIkd2luZG93Iiwic2F2ZSIsImNvbWVudGFyIiwiQ29tZW50YXJpb0Zvcm0iLCJjcmVhdGVkQXQiLCJEYXRlIiwibG9jYXRpb24iLCJ1cGxvYWQiLCJmaWxlcyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJjYWxsYmFjayIsImNsYXZlIiwicG9zdCIsIndpdGhDcmVkZW50aWFscyIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJiaW5kVG9Db250cm9sbGVyIiwiTmVjZXNpZGFkRm9ybSIsInBpY3R1cmUiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxPQUNBLFVBQ0EsV0FDQSxlQUNBLG9CQUNBLHNCQUNBLDZCQUNBLGFBQ0EsZ0JBQ0EsWUFDQSxXQUNBLFdBQ0EsYUFFQUMsS0FBQSxhQUFBLFNBQUFDLEdBQ0FDLE9BQUFELFdBQUFBLEtBRUFFLFFBQUEsaUJBQUEsU0FBQUMs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QXlJLEtBQUEsb0JBQUFMLEdBQ0FNLGlCQUFBLEVBQ0FDLFNBQUFDLGVBQUE5RSxRQUNBK0UsaUJBQUF4SyxRQUFBeUssWUFHQTVDLFVBQUEsU0FBQXhHLEdBQ0EsTUFBQU0sSUFDQXdILE9BQUEsT0FDQTlILEtBQUFBLEVBQ0ErSCxJQUFBLDBCQUdBakMsS0FBQSxTQUFBcEYsR0FDQSxNQUFBSixHQUFBRSxJQUFBLGNBQUFFLElBRUFPLElBQUEsV0FDQSxNQUFBWCxHQUFBRSxJQUFBLDJCQ3BDQSxXQUNBLFlBQ0E3QixTQUNBQyxPQUFBLHVCQUNBaUMsVUFBQSxjQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBM0IsWUFBQSw2QkFDQUUsV0FBQSxXQUNBQyxhQUFBLFVBR0FELFdBQUEsWUFBQSxPQUFBLFdBQUEsU0FBQXNDLEVBQUFoQyxHQUVBLEdBQUFDLEdBQUFDLElBRUE4QixHQUFBVixNQUNBbEIsUUFBQSxTQUFBQyxHQUNBSixFQUFBZSxNQUFBWCxJQUVBRSxNQUFBLFNBQUFDLEdBQ0FSLEVBQUFTLElBQUFELEVBQUEiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICduZ1JvdXRlJyxcbiAgICAgICduZ05vdGlmeScsXG4gICAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAgICdtb2JpbGUtYW5ndWxhci11aScsXG4gICAgICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXG4gICAgICAnbW9iaWxlLWFuZ3VsYXItdWkuZ2VzdHVyZXMnLFxuICAgICAgJ2FwcC5zb2NrZXQnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQnLFxuICAgICAgJ2FwcC5hZG1pbicsXG4gICAgICAnYXBwLmhvbWUnLFxuICAgICAgJ2FwcC5tYWluJyxcbiAgICAgICdhcHAudXNlcidcbiAgICBdKVxuICAgIC5ydW4oWyckdHJhbnNmb3JtJyxmdW5jdGlvbigkdHJhbnNmb3JtKSB7XG4gICAgICB3aW5kb3cuJHRyYW5zZm9ybSA9ICR0cmFuc2Zvcm07XG4gICAgfV0pXG4gICAgLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9ob21lL3Njcm9sbC5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonSG9tZUN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonSG9tZUN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYnVzcXVlZGEnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8YnVzcXVlZGE+PC9idXNxdWVkYT4nLCAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9uZWNlc2lkYWQvOmlkJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvZGV0YWxsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOidOZWNlc2lkYWREZXRhbGxlQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidEZXRhbGxlQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9uZWNlc2lkYWQvOmlkL2VkaXRhcicsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2VkaXRhci5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOidOZWNlc2lkYWREZXRhbGxlQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidEZXRhbGxlQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9jYXRlZ29yaWEvOmNhdGVnb3JpYScsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2NhdGVnb3JpYS5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonQ2F0ZWdvcmlhQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidDYXRlZ29yaWFDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3BlcmZpbCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvdXNlcnMvY29uZmlnLmh0bWwnLFxuICAgICAgICAgIHJlbG9hZE9uU2VhcmNoOiBmYWxzZSxcbiAgICAgICAgICBjb250cm9sbGVyOidDb25maWdDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0NvbmZpZ0N0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvdXN1YXJpby86aWQnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8dXNlci1wcm9maWxlPjwvdXNlci1wcm9maWxlPidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9jb250YWN0bycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvc2hhcmVkL2NvbnRhY3RvLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcHJpdmFjaWRhZCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvc2hhcmVkL3ByaXZhY2lkYWQuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbicsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxhZG1pbi1kYXNoYm9hcmQ+PC9hZG1pbi1kYXNoYm9hcmQ+J1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FkbWluL3VzdWFyaW9zJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPHVzZXJzLWxpc3Q+PC91c2Vycy1saXN0PidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbi9uZWNlc2lkYWRlcycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzxuZWNlc2lkYWRlcy1saXN0PjwvbmVjZXNpZGFkZXMtbGlzdD4nXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWRtaW4vY29tZW50YXJpb3MnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8Y29tZW50YXJpb3MtbGlzdD48L2NvbWVudGFyaW9zLWxpc3Q+J1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgICAgfSk7XG4gICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmhvbWUnLFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBOZWNlc2lkYWQubG9hZCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsICdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluJyxbXG4gICAgICAnYXBwLmFkbWluLnVzZXJzJyxcbiAgICAgICdhcHAuYWRtaW4ubmVjZXNpZGFkZXMnLFxuICAgICAgJ2FwcC5hZG1pbi5jb21lbnRhcmlvcycsXG4gICAgICAnYXBwLmFkbWluLmRhc2hib2FyZCcsXG4gICAgICAnYXBwLmFkbWluLnNlcnZpY2UnXG4gICAgXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLnNlcnZpY2UnLCAgW10pXG5cbiAgICAgIC5mYWN0b3J5ICgnQWRtaW4nLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRhc2g6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hZG1pbi9kYXNoJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VyOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hZG1pbi91c2Vycy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXNlcnM6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluL3VzZXJzJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuZWNlc2lkYWQ6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2FkbWluL25lY2VzaWRhZGVzLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBuZWNlc2lkYWRlczpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdhcGkvYWRtaW4vbmVjZXNpZGFkZXMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4uY29tZW50YXJpb3MnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnY29tZW50YXJpb3NMaXN0JyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2FkbWluL2NvbWVudGFyaW9zLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5Db21lbnRhcmlvc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ0FkbWluQ29tZW50YXJpb3NDdHJsJyxbJ0NvbWVudGFyaW8nLCduZ05vdGlmeScsJyRyb3V0ZScsZnVuY3Rpb24gKENvbWVudGFyaW8sbmdOb3RpZnksJHJvdXRlKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBDb21lbnRhcmlvLmFsbCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLmNvbWVudGFyaW9zID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZtLmRlbGV0ZSA9IGZ1bmN0aW9uIG5hbWUoaWQpIHtcblxuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnwr9SZWFsbWVudGUgZGVzZWFzIGJvcnJhciBlc3RlIGNvbWVudGFyaW8/Jyk7XG5cbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgQ29tZW50YXJpby5kZWxldGUoaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnVwZGF0ZSA9IGZ1bmN0aW9uIChjb21lbnRhcmlvKSB7XG4gICAgICAgICAgdmFyIHRleHRvID0gcHJvbXB0KCdSZW1wbGF6YSBlbCB0ZXh0bycsY29tZW50YXJpby50ZXh0bylcblxuICAgICAgICAgIGNvbWVudGFyaW8udGV4dG8gPSB0ZXh0bztcbiAgICAgICAgICBDb21lbnRhcmlvLnVwZGF0ZShjb21lbnRhcmlvKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi5kYXNoYm9hcmQnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnYWRtaW5EYXNoYm9hcmQnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvYWRtaW4vZGFzaGJvYXJkLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5EYXNoQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignQWRtaW5EYXNoQ3RybCcsWydBZG1pbicsJ25nTm90aWZ5JyxmdW5jdGlvbiAoQWRtaW4sbmdOb3RpZnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIEFkbWluLmRhc2goKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5kYXNoID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLm5lY2VzaWRhZGVzJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ25lY2VzaWRhZGVzTGlzdCcsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9hZG1pbi9uZWNlc2lkYWRlcy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J0FkbWluTmVjZXNpZGFkZXNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczonY3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdBZG1pbk5lY2VzaWRhZGVzQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyRyb3V0ZScsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSwkcm91dGUpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIE5lY2VzaWRhZC5sb2FkKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdm0uZGVsZXRlID0gZnVuY3Rpb24gbmFtZShpZCkge1xuXG4gICAgICAgICAgdmFyIHN1cmUgPSBjb25maXJtKCfCv1JlYWxtZW50ZSBkZXNlYXMgYm9ycmFyIGVzdGEgbmVjZXNpZGFkPycpO1xuXG4gICAgICAgICAgaWYgKHN1cmUpIHtcbiAgICAgICAgICAgIE5lY2VzaWRhZC5kZWxldGUoaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLnVzZXJzJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ3VzZXJzTGlzdCcsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9hZG1pbi91c2Vycy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J0FkbWluVXNlcnNDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczonY3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdBZG1pblVzZXJzQ3RybCcsWydVc2VyJywnbmdOb3RpZnknLGZ1bmN0aW9uIChVc2VyLG5nTm90aWZ5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBVc2VyLmFsbCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLnVzZXJzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJywgW10pXG4gIC5kaXJlY3RpdmUoJ21vbmV5JywgZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIE5VTUJFUl9SRUdFWFAgPSAvXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKVxccyokLztcblxuICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsLCBhdHRycywgbmdNb2RlbEN0cmwpIHtcbiAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KGF0dHJzLm1pbiB8fCAwKTtcbiAgICAgIHZhciBwcmVjaXNpb24gPSBwYXJzZUZsb2F0KGF0dHJzLnByZWNpc2lvbiB8fCAyKTtcbiAgICAgIHZhciBsYXN0VmFsaWRWYWx1ZTtcblxuICAgICAgZnVuY3Rpb24gcm91bmQobnVtKSB7XG4gICAgICAgIHZhciBkID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIGQpIC8gZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9ybWF0UHJlY2lzaW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKS50b0ZpeGVkKHByZWNpc2lvbik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZvcm1hdFZpZXdWYWx1ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmdNb2RlbEN0cmwuJGlzRW1wdHkodmFsdWUpID8gJycgOiAnJyArIHZhbHVlO1xuICAgICAgfVxuXG5cbiAgICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgbGVhZGluZyBkZWNpbWFsIHBvaW50LCBsaWtlIFwiLjVcIlxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignLicpID09PSAwKSB7XG4gICAgICAgICAgdmFsdWUgPSAnMCcgKyB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFsbG93IFwiLVwiIGlucHV0cyBvbmx5IHdoZW4gbWluIDwgMFxuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignLScpID09PSAwKSB7XG4gICAgICAgICAgaWYgKG1pbiA+PSAwKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKCcnKTtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnLScpIHtcbiAgICAgICAgICAgIHZhbHVlID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVtcHR5ID0gbmdNb2RlbEN0cmwuJGlzRW1wdHkodmFsdWUpO1xuICAgICAgICBpZiAoZW1wdHkgfHwgTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIGxhc3RWYWxpZFZhbHVlID0gKHZhbHVlID09PSAnJylcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6IChlbXB0eSA/IHZhbHVlIDogcGFyc2VGbG9hdCh2YWx1ZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlbmRlciB0aGUgbGFzdCB2YWxpZCBpbnB1dCBpbiB0aGUgZmllbGRcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGZvcm1hdFZpZXdWYWx1ZShsYXN0VmFsaWRWYWx1ZSkpO1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbnVtYmVyJywgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBsYXN0VmFsaWRWYWx1ZTtcbiAgICAgIH0pO1xuICAgICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChmb3JtYXRWaWV3VmFsdWUpO1xuXG4gICAgICB2YXIgbWluVmFsaWRhdG9yID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKCFuZ01vZGVsQ3RybC4kaXNFbXB0eSh2YWx1ZSkgJiYgdmFsdWUgPCBtaW4pIHtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ21pbicsIGZhbHNlKTtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWluJywgdHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChtaW5WYWxpZGF0b3IpO1xuICAgICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChtaW5WYWxpZGF0b3IpO1xuXG4gICAgICBpZiAoYXR0cnMubWF4KSB7XG4gICAgICAgIHZhciBtYXggPSBwYXJzZUZsb2F0KGF0dHJzLm1heCk7XG4gICAgICAgIHZhciBtYXhWYWxpZGF0b3IgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmICghbmdNb2RlbEN0cmwuJGlzRW1wdHkodmFsdWUpICYmIHZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ21heCcsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnbWF4JywgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2gobWF4VmFsaWRhdG9yKTtcbiAgICAgICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChtYXhWYWxpZGF0b3IpO1xuICAgICAgfVxuXG4gICAgICAvLyBSb3VuZCBvZmZcbiAgICAgIGlmIChwcmVjaXNpb24gPiAtMSkge1xuICAgICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZSA/IHJvdW5kKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgbmdNb2RlbEN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUgPyBmb3JtYXRQcmVjaXNpb24odmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBlbC5iaW5kKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSA9IGZvcm1hdFByZWNpc2lvbih2YWx1ZSk7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgIGxpbms6IGxpbmtcbiAgICB9O1xuICB9KS5kaXJlY3RpdmUoJ251bWJlcnNPbmx5JywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbW9kZWxDdHJsKSB7XG4gICAgICAgIG1vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uIChpbnB1dFZhbHVlKSB7XG4gICAgICAgICAgLy8gdGhpcyBuZXh0IGlmIGlzIG5lY2Vzc2FyeSBmb3Igd2hlbiB1c2luZyBuZy1yZXF1aXJlZCBvbiB5b3VyIGlucHV0LlxuICAgICAgICAgIC8vIEluIHN1Y2ggY2FzZXMsIHdoZW4gYSBsZXR0ZXIgaXMgdHlwZWQgZmlyc3QsIHRoaXMgcGFyc2VyIHdpbGwgYmUgY2FsbGVkXG4gICAgICAgICAgLy8gYWdhaW4sIGFuZCB0aGUgMm5kIHRpbWUsIHRoZSB2YWx1ZSB3aWxsIGJlIHVuZGVmaW5lZFxuICAgICAgICAgIGlmIChpbnB1dFZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICAgICAgICB2YXIgdHJhbnNmb3JtZWRJbnB1dCA9IGlucHV0VmFsdWUucmVwbGFjZSgvW14wLTkrLl0vZywgJycpO1xuICAgICAgICAgIGlmICh0cmFuc2Zvcm1lZElucHV0IT09aW5wdXRWYWx1ZSkge1xuICAgICAgICAgICAgbW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUodHJhbnNmb3JtZWRJbnB1dCk7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZElucHV0O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAuZmlsdGVycycsW10pXG4gIC5maWx0ZXIoJ2RpbmVybycsXG4gIFsgJyRmaWx0ZXInLCAnJGxvY2FsZScsIGZ1bmN0aW9uKGZpbHRlciwgbG9jYWxlKSB7XG4gICAgdmFyIGN1cnJlbmN5RmlsdGVyID0gZmlsdGVyKCdjdXJyZW5jeScpO1xuICAgIHZhciBmb3JtYXRzID0gbG9jYWxlLk5VTUJFUl9GT1JNQVRTO1xuICAgIHJldHVybiBmdW5jdGlvbihhbW91bnQsIG51bSwgY3VycmVuY3lTeW1ib2wpIHtcbiAgICAgIGlmIChudW09PT0wKSBudW0gPSAtMTtcbiAgICAgIHZhciB2YWx1ZSA9IGN1cnJlbmN5RmlsdGVyKGFtb3VudCwgY3VycmVuY3lTeW1ib2wpO1xuICAgICAgdmFyIHNlcCA9IHZhbHVlLmluZGV4T2YoZm9ybWF0cy5ERUNJTUFMX1NFUCkrMTtcbiAgICAgIHZhciBzeW1ib2wgPSAnJztcbiAgICAgIGlmIChzZXA8dmFsdWUuaW5kZXhPZihmb3JtYXRzLkNVUlJFTkNZX1NZTSkpIHN5bWJvbCA9ICcgJytmb3JtYXRzLkNVUlJFTkNZX1NZTTtcbiAgICAgIHJldHVybiB2YWx1ZS5zdWJzdHJpbmcoMCwgc2VwK251bSkrc3ltYm9sO1xuICAgIH07XG4gIH0gXSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gICAgYW5ndWxhclxuICAgICAgLm1vZHVsZSgnYXBwLm1haW4nLCBbXG4gICAgICAnYXBwLmRpcmVjdGl2ZXMnLFxuICAgICAgJ2FwcC5maWx0ZXJzJ1xuICAgIF0pXG4gICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJyxbJyRyb290U2NvcGUnLCckc2NvcGUnLCdVc2VyJywnbmdOb3RpZnknLCdzb2NrZXQnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIFVzZXIsIG5nTm90aWZ5LHNvY2tldCl7XG5cbiAgICAgIHZhciB2bSA9IHRoaXM7XG5cblxuICAgICAgdm0uYnVzY2FyID0gZnVuY3Rpb24gKGJ1c2Nhcikge1xuICAgICAgICBpZiAoYnVzY2FyLmxlbmd0aDwzKSB7XG4gICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgfVxuICAgICAgICBzb2NrZXQuZW1pdCgnbmVjZXNpZGFkZXM6YnVzY2FyJyxidXNjYXIpO1xuICAgICAgICBzb2NrZXQub24oJ25lY2VzaWRhZGVzOnJlc3VsdGFkbycsZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB2bS5yZXN1bHRhZG9zID0gZGF0YTsgICAgICAgICAgXG4gICAgICAgIH0pO1xuXG4gICAgICB9O1xuXG5cblxuICAgICAgVXNlci5tZSgpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdm0udXNlciA9IGRhdGE7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcblxuICAgICAgICAgIFVzZXIuc2hvdyhkYXRhLmlkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0udXNlci5uZWNlc2lkYWRlcyA9IGRhdGEubmVjZXNpZGFkZXM7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgIHZtLnBhbGFicmFzQ2xhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3YWwoe1xuICAgICAgICAgIHRpdGxlOiBcIlN1c2NyaWJpcnRlXCIsXG4gICAgICAgICAgdGV4dDogXCJFc2NyaWJlIHBhbGFicmFzIHNlcGFyYWRhcyBwb3IgdW5hIGNvbWEgcGFyYSByZWNpYmlyIG5vdGlmaWNhY2lvbmVzIGEgdHUgY29ycmVvOlwiLFxuICAgICAgICAgIHR5cGU6IFwiaW5wdXRcIixcbiAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSxcbiAgICAgICAgICBhbmltYXRpb246IFwic2xpZGUtZnJvbS10b3BcIixcbiAgICAgICAgICBpbnB1dFBsYWNlaG9sZGVyOiBcIkVqOiBnaW1uYXNpb3MsIGVzdMOpdGljYXMsIGNvbXB1dGFjacOzbiwgZXRjXCJcbiAgICAgICAgfSwgZnVuY3Rpb24oaW5wdXRWYWx1ZSl7XG4gICAgICAgICAgaWYgKGlucHV0VmFsdWUpIHtcblxuICAgICAgICAgICAgVXNlci5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICB3b3JkczppbnB1dFZhbHVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3dhbCgnU3VzY3JpdG8gY29ycmVjdGFtZW50ZScsIGRhdGEsIFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuXG4gICAgICAvLyBVc2VyIGFnZW50IGRpc3BsYXllZCBpbiBob21lIHBhZ2VcbiAgICAgICRzY29wZS51c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gICAgICAvLyBOZWVkZWQgZm9yIHRoZSBsb2FkaW5nIHNjcmVlblxuICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24oKXtcbiAgICAgICAgJHJvb3RTY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICRyb290U2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgfSk7XG5cblxuXG4gICAgICAkc2NvcGUuYm90dG9tUmVhY2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvKiBnbG9iYWwgYWxlcnQ6IGZhbHNlOyAqL1xuICAgICAgICAvLyBhbGVydCgnQ29uZ3JhdHMgeW91IHNjcm9sbGVkIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3QhJyk7XG4gICAgICB9O1xuXG5cbiAgICAgIC8vXG4gICAgICAvLyAnRHJhZycgc2NyZWVuXG4gICAgICAvL1xuICAgICAgJHNjb3BlLm5vdGljZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgICRzY29wZS5ub3RpY2VzLnB1c2goe2ljb246ICdlbnZlbG9wZScsIG1lc3NhZ2U6ICdOb3RpY2UgJyArIChqICsgMSkgfSk7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS5kZWxldGVOb3RpY2UgPSBmdW5jdGlvbihub3RpY2UpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLm5vdGljZXMuaW5kZXhPZihub3RpY2UpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICRzY29wZS5ub3RpY2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5zb2NrZXQnLFtdKVxuICAgICAgLmZhY3RvcnkoJ3NvY2tldCcsZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc29ja2V0ID0gaW8oKTtcbiAgICAgICAgcmV0dXJuIHNvY2tldDtcbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuYnVzcXVlZGEnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnYnVzcXVlZGEnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2J1c3F1ZWRhLmh0bWwnLFxuICAgICAgICAgICAgLy8gc2NvcGU6IHtcbiAgICAgICAgICAgIC8vICAgcmVzdWx0YWRvczogJz0nXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICAgIH07XG4gICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLmNhdGVnb3JpYScsW10pXG4gICAgICAuY29udHJvbGxlcignQ2F0ZWdvcmlhQ3RybCcsWydOZWNlc2lkYWQnLCckcm91dGVQYXJhbXMnLGZ1bmN0aW9uIChOZWNlc2lkYWQsJHJvdXRlUGFyYW1zKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuXG5cbiAgICAgICAgTmVjZXNpZGFkLmNhdGVnb3JpYSgkcm91dGVQYXJhbXMuY2F0ZWdvcmlhKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5uZWNlc2lkYWRlcyA9IGRhdGEubmVjZXNpZGFkZXM7XG4gICAgICAgICAgICB2bS5jYXRlZ29yaWEgPSBkYXRhLmNhdGVnb3JpYTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLmNvbWVudGFyaW8nLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnY29tZW50YXJpbycsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvY29tZW50YXJpby5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgIGNvbWVudGFyaW86ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmNvbWVudGFyaW8uc2VydmljZScsW10pXG4gICAgICAuZmFjdG9yeSgnQ29tZW50YXJpbycsWyckaHR0cCcsZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkZWxldGU6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NvbWVudGFyaW9zLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1dGlsOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBhdGNoKCcvYXBpL2NvbWVudGFyaW9zLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGw6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21lbnRhcmlvcy8nKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyZWF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRhLFxuICAgICAgICAgICAgICBtZXRob2QgIDogJ1BPU1QnLFxuICAgICAgICAgICAgICB1cmwgICAgIDogJy9hcGkvbmVjZXNpZGFkZXMvJyArIGRhdGEubmVjZXNpZGFkSWQgKyAnL2NvbWVudGFyaW9zJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGRhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQVVQnLFxuICAgICAgICAgICAgICB1cmwgICAgIDogJy9hcGkvY29tZW50YXJpb3MvJyArIGRhdGEuaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB9XSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLmRldGFsbGUnLFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ05lY2VzaWRhZERldGFsbGVDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JywnJHJvdXRlUGFyYW1zJywnJHdpbmRvdycsJ0NvbWVudGFyaW8nLCckc2NvcGUnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHJvdXRlUGFyYW1zLCR3aW5kb3csQ29tZW50YXJpbywkc2NvcGUpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5uZWNlc2lkYWQgPSB7fTtcbiAgICAgICAgdm0uQ29tZW50YXJpbyA9IHt9O1xuXG4gICAgICAgIGlmICgkcm91dGVQYXJhbXMuaWQpIHtcbiAgICAgICAgICBOZWNlc2lkYWQuc2hvdygkcm91dGVQYXJhbXMuaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICB2bS5uZWNlc2lkYWQgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgTmVjZXNpZGFkLnVwZGF0ZSh2bS5uZWNlc2lkYWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5jb21lbnRhciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgIHZtLkNvbWVudGFyaW9Gb3JtLm5lY2VzaWRhZElkID0gdm0ubmVjZXNpZGFkLmlkO1xuXG4gICAgICAgICAgQ29tZW50YXJpby5jcmVhdGUodm0uQ29tZW50YXJpb0Zvcm0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICB2bS5Db21lbnRhcmlvLmNyZWF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgIHZtLm5lY2VzaWRhZC5jb21lbnRhcmlvcy5wdXNoKHZtLkNvbWVudGFyaW8pO1xuICAgICAgICAgICAgICB2bS5Db21lbnRhcmlvID0ge307XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ1JlYWxtZW50ZSBkZXNlYXMgZWxpbWluYXIgZXN0YSBwdWJsaWNhY2nDs24/Jyk7XG4gICAgICAgICAgaWYgKHN1cmUpIHtcbiAgICAgICAgICAgIE5lY2VzaWRhZC5kZWxldGUodm0ubmVjZXNpZGFkLmlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbiA9ICcjLyc7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnV0aWwgPSBmdW5jdGlvbiAoY29tZW50YXJpbykge1xuXG4gICAgICAgICAgQ29tZW50YXJpby51dGlsKGNvbWVudGFyaW8uaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBjb21lbnRhcmlvLnV0aWwgPSB0cnVlO1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudXBsb2FkID0gZnVuY3Rpb24oZmlsZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnU3ViaWVuZG8gYXJjaGl2bycpO1xuICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpOyAgICAgICAgICBcblxuICAgICAgICAgIGlmIChmaWxlc1swXSkge1xuICAgICAgICAgICAgZmQuYXBwZW5kKFwiZmlsZVwiLCBmaWxlc1swXSk7XG5cbiAgICAgICAgICAgIE5lY2VzaWRhZC51cGxvYWQoZmQsJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuaXRlbScsW10pXG4gICAgICAuZGlyZWN0aXZlKCduZWNlc2lkYWRJdGVtJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC92aWV3cy9pdGVtLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgbmVjZXNpZGFkOiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQnLFtcbiAgICAgICdhcHAubmVjZXNpZGFkLnNlcnZpY2UnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQubnVldmEnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuaXRlbScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5kZXRhbGxlJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLmNhdGVnb3JpYScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5jb21lbnRhcmlvJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLmJ1c3F1ZWRhJyxcbiAgICAgICdhcHAuY29tZW50YXJpby5zZXJ2aWNlJ1xuICAgIF0pXG4gICAgICAuY29udHJvbGxlcignTmVjZXNpZGFkZXNDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICBOZWNlc2lkYWQubG9hZCgpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgdm0ubmVjZXNpZGFkZXMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsICdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9XSlcbiAgICAgIC5kaXJlY3RpdmUoJ2NhdGVnb3JpYScsZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC9jYXRlLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6e1xuICAgICAgICAgICAgICBpZDonQCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLnNlcnZpY2UnLFtdKVxuICAgICAgLmZhY3RvcnkoJ05lY2VzaWRhZCcsWyckaHR0cCcsZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsb2FkOmZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9uZWNlc2lkYWRlcycpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2hvdzpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbmVjZXNpZGFkZXMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNhdGVnb3JpYTpmdW5jdGlvbiAoY2xhdmUpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2F0ZWdvcmlhcy8nICsgY2xhdmUpO1xuICAgICAgICAgIH0sICAgICAgICAgIFxuICAgICAgICAgIGRlbGV0ZTpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvbmVjZXNpZGFkZXMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyZWF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRhLFxuICAgICAgICAgICAgICBtZXRob2QgIDogJ1BPU1QnLFxuICAgICAgICAgICAgICB1cmwgICAgIDogJy9hcGkvbmVjZXNpZGFkZXMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwbG9hZDpmdW5jdGlvbiAoZmQsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL25lY2VzaWRhZGVzLycgKyBpZCArICcvdXBsb2FkJywgZmQsIHtcbiAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwZGF0ZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgZGF0YSAgICA6ICBkYXRhLFxuICAgICAgICAgICAgICBtZXRob2QgIDogJ1BVVCcsXG4gICAgICAgICAgICAgIHVybCAgICAgOiAnL2FwaS9uZWNlc2lkYWRlcy8nICsgZGF0YS5pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH1dKVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQubnVldmEnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnbnVldmFOZWNlc2lkYWQnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLCckd2luZG93JyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5LCR3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL251ZXZhLmh0bWwnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgdXNlcjogJz0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcIk51ZXZhTmVjZXNpZGFkQ3RybFwiLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOdWV2YU5lY2VzaWRhZEN0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH1dKVxuICAgICAgLmNvbnRyb2xsZXIoJ051ZXZhTmVjZXNpZGFkQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyR3aW5kb3cnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHdpbmRvd1xuICAgICAgKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uTmVjZXNpZGFkRm9ybSA9IHt9O1xuXG4gICAgICAgIHZtLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBOZWNlc2lkYWQuY3JlYXRlKHZtLk5lY2VzaWRhZEZvcm0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoJ05lY2VzaWRhZCBhZ3JlZ2FkYSBjb3JyZWN0YW1lbnRlIDopJywnc3VjY2VzcycpOyAkd2luZG93LmxvY2F0aW9uID0gJyMvbmVjZXNpZGFkLycgKyBkYXRhICsgJy9lZGl0YXInO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyLmNvbmZpZycsIFtdKVxuICAgIC5jb250cm9sbGVyKCdDb25maWdDdHJsJyxbJ25nTm90aWZ5JywnVXNlcicsJyRzY29wZScsZnVuY3Rpb24obmdOb3RpZnksVXNlciwkc2NvcGUpe1xuXG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0udXNlciA9IHt9O1xuXG4gICAgICBVc2VyLm1lKClcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gIChkYXRhKSB7XG4gICAgICAgICAgdm0udXNlciA9IGRhdGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbiAgKGVycikge1xuICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICB2bS5zYXZlID0gZnVuY3Rpb24gICgpIHtcbiAgICAgICAgVXNlci51cGRhdGUodm0udXNlcilcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAgKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS51cGxvYWQgPSBmdW5jdGlvbihmaWxlcykge1xuICAgICAgICBjb25zb2xlLmxvZygnU3ViaWVuZG8gYXJjaGl2bycpO1xuICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgLy9UYWtlIHRoZSBmaXJzdCBzZWxlY3RlZCBmaWxlXG5cbiAgICAgICAgaWYgKGZpbGVzWzBdKSB7XG4gICAgICAgICAgZmQuYXBwZW5kKFwiZmlsZVwiLCBmaWxlc1swXSk7XG5cbiAgICAgICAgICBVc2VyLnVwbG9hZChmZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldCgnSW1hZ2VuIGd1YXJkYWRhIGNvcnJlY3RhbWVudGUnLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgIHZtLnVzZXIucGljdHVyZSA9IGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG5cbiAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAudXNlcicsIFtcbiAgICAnYXBwLnVzZXIuc2VydmljZScsXG4gICAgJ2FwcC51c2VyLnByb2ZpbGUnLFxuICAgICdhcHAudXNlci5jb25maWcnIC8vIGVkaXRhciBwZXJmaWwgZGVsIHVzdWFyaW8geSBzdSBjb25maWd1cmFjacOzblxuICBdKVxuICAgIC5jb250cm9sbGVyKCdVc2VyQ3RybCcsWyduZ05vdGlmeScsJ1VzZXInLCckcm91dGVQYXJhbXMnLGZ1bmN0aW9uKG5nTm90aWZ5LFVzZXIsJHJvdXRlUGFyYW1zKXtcblxuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIGNvbnNvbGUubG9nKCdDYXJnYW5kbycpO1xuXG4gICAgICBVc2VyLnNob3coJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAgKGRhdGEpIHtcbiAgICAgICAgICAgIHZtLnVzZXIgPSBkYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ25vJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAudXNlci5zZXJ2aWNlJywgIFtdKVxuXG4gICAgICAuZmFjdG9yeSAoJ1VzZXInLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1lOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvcHJvZmlsZScpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgICAgICAgIGRhdGE6ZGF0YSxcbiAgICAgICAgICAgICAgdXJsOicvYXBpL3VzZXJzL3Byb2ZpbGUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVwbG9hZDpmdW5jdGlvbiAoZmQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzL3VwbG9hZCcsIGZkLCB7XG4gICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWJzY3JpYmU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXG4gICAgICAgICAgICAgIGRhdGE6ZGF0YSxcbiAgICAgICAgICAgICAgdXJsOicvYXBpL3VzZXJzL3N1YnNjcmliZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2hvdzpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsbDpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdhcGkvYWRtaW4vdXNlcnMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAudXNlci5wcm9maWxlJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ3VzZXJQcm9maWxlJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL3VzZXJzL3Byb2ZpbGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOidVc2VyQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6J2N0cmwnXG4gICAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignVXNlckN0cmwnLFsnVXNlcicsJ25nTm90aWZ5JyxmdW5jdGlvbiAoVXNlcixuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgVXNlci5hbGwoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS51c2VycyA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pO1xufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
