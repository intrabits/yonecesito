!function(){"use strict";angular.module("app",["ngRoute","ngNotify","ui.bootstrap","mobile-angular-ui","angular-loading-bar","mobile-angular-ui.gestures","app.socket","app.necesidad","app.admin","app.home","app.main","app.user"]).run(["$transform",function(e){window.$transform=e}]).run(["$rootScope",function(e){e.$on("$routeChangeSuccess",function(e,t,r){})}]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"scripts/home/scroll.html",reloadOnSearch:!1,controller:"HomeCtrl",controllerAs:"HomeCtrl"}).when("/busqueda",{template:"<busqueda></busqueda>"}).when("/necesidad/:id",{templateUrl:"scripts/necesidad/views/detalle.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/necesidad/:id/comentario/:comentarioId",{templateUrl:"scripts/necesidad/views/detalle.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/necesidad/:id/editar",{templateUrl:"scripts/necesidad/views/editar.html",controller:"NecesidadDetalleCtrl",controllerAs:"DetalleCtrl"}).when("/categoria/:categoria",{templateUrl:"scripts/necesidad/views/categoria.html",reloadOnSearch:!1,controller:"CategoriaCtrl",controllerAs:"CategoriaCtrl"}).when("/perfil",{title:"Configuración de la cuenta",templateUrl:"scripts/users/config.html",reloadOnSearch:!1,controller:"ConfigCtrl",controllerAs:"ConfigCtrl"}).when("/usuario/:id",{template:"<user-profile></user-profile>"}).when("/contacto",{templateUrl:"scripts/shared/contacto.html"}).when("/privacidad",{templateUrl:"scripts/shared/privacidad.html"}).when("/admin",{template:"<admin-dashboard></admin-dashboard>"}).when("/admin/usuarios",{template:"<users-list></users-list>"}).when("/admin/necesidades",{template:"<necesidades-list></necesidades-list>"}).when("/admin/comentarios",{template:"<comentarios-list></comentarios-list>"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("app.admin",["app.admin.users","app.admin.necesidades","app.admin.comentarios","app.admin.dashboard","app.admin.service"])}(),function(){"use strict";angular.module("app.admin.service",[]).factory("Admin",["$http",function(e){return{dash:function(){return e.get("/api/admin/dash")},user:function(t){return e.get("/api/admin/users/"+t)},users:function(){return e.get("api/admin/users")},necesidad:function(t){return e.get("/api/admin/necesidades/"+t)},necesidades:function(){return e.get("api/admin/necesidades")}}}])}(),function(){"use strict";angular.module("app.admin.comentarios",[]).directive("comentariosList",function(){return{restrict:"E",templateUrl:"scripts/admin/comentarios.html",controller:"AdminComentariosCtrl",controllerAs:"ctrl"}}).controller("AdminComentariosCtrl",["Comentario","ngNotify","$route",function(e,t,r){var n=this;e.all().success(function(e){n.comentarios=e}).error(function(e){t.set(e,"error")}),n["delete"]=function(n){var o=confirm("¿Realmente deseas borrar este comentario?");o&&e["delete"](n).success(function(e){t.set(e,"success"),r.reload()}).error(function(e){t.set(e,"error")})},n.update=function(n){var o=prompt("Remplaza el texto",n.texto);n.texto=o,e.update(n).success(function(e){t.set(e,"success"),r.reload()}).error(function(e){t.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.dashboard",[]).directive("adminDashboard",function(){return{restrict:"E",templateUrl:"scripts/admin/dashboard.html",controller:"AdminDashCtrl",controllerAs:"ctrl"}}).controller("AdminDashCtrl",["Admin","ngNotify","socket",function(e,t,r){var n=this;n.logs=[],e.dash().success(function(e){n.dash=e}).error(function(e){t.set(e,"error")}),r.on("users:logs",function(e){t.set(e.log,"success"),n.logs.push(e)})}])}(),function(){"use strict";angular.module("app.admin.necesidades",[]).directive("necesidadesList",function(){return{restrict:"E",templateUrl:"scripts/admin/necesidades.html",controller:"AdminNecesidadesCtrl",controllerAs:"ctrl"}}).controller("AdminNecesidadesCtrl",["Necesidad","ngNotify","$route",function(e,t,r){var n=this;e.load().success(function(e){n.necesidades=e}).error(function(e){t.set(e,"error")}),n["delete"]=function(n){var o=confirm("¿Realmente deseas borrar esta necesidad?");o&&e["delete"](n).success(function(e){t.set(e,"success"),r.reload()}).error(function(e){t.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.admin.users",[]).directive("usersList",function(){return{restrict:"E",templateUrl:"scripts/admin/users.html",controller:"AdminUsersCtrl",controllerAs:"ctrl"}}).controller("AdminUsersCtrl",["User","ngNotify",function(e,t){var r=this;e.all().success(function(e){r.users=e}).error(function(e){t.set(e,"error")}),r.ban=function(r){var n="banned"===r.type?"permitir":"bloquear",o=confirm("Realmente quieres "+n+" el acceso a "+r.name+"?");o&&e.ban(r.id).success(function(e){"banned"===r.type?r.type="usuario":r.type="banned",t.set(e,"success")}).error(function(e){t.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.home",[]).controller("HomeCtrl",["Necesidad","ngNotify",function(e,t){var r=this;e.load().success(function(e){r.necesidades=e}).error(function(e){t.set(e,"error")})}])}(),angular.module("app.directives",[]).directive("money",function(){function e(e,r,n,o){function i(e){var t=Math.pow(10,d);return Math.round(e*t)/t}function s(e){return parseFloat(e).toFixed(d)}function a(e){return o.$isEmpty(e)?"":""+e}var c,u=parseFloat(n.min||0),d=parseFloat(n.precision||2);o.$parsers.push(function(e){angular.isUndefined(e)&&(e=""),0===e.indexOf(".")&&(e="0"+e),0===e.indexOf("-")&&(u>=0?(e=null,o.$setViewValue(""),o.$render()):"-"===e&&(e=""));var r=o.$isEmpty(e);return r||t.test(e)?c=""===e?null:r?e:parseFloat(e):(o.$setViewValue(a(c)),o.$render()),o.$setValidity("number",!0),c}),o.$formatters.push(a);var l=function(e){return!o.$isEmpty(e)&&u>e?void o.$setValidity("min",!1):(o.$setValidity("min",!0),e)};if(o.$parsers.push(l),o.$formatters.push(l),n.max){var p=parseFloat(n.max),m=function(e){return!o.$isEmpty(e)&&e>p?void o.$setValidity("max",!1):(o.$setValidity("max",!0),e)};o.$parsers.push(m),o.$formatters.push(m)}d>-1&&(o.$parsers.push(function(e){return e?i(e):e}),o.$formatters.push(function(e){return e?s(e):e})),r.bind("blur",function(){var e=o.$modelValue;e&&(o.$viewValue=s(e),o.$render())})}var t=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:e}}).directive("numbersOnly",function(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){n.$parsers.push(function(e){if(void 0===e)return"";var t=e.replace(/[^0-9+.]/g,"");return t!==e&&(n.$setViewValue(t),n.$render()),t})}}}),angular.module("app.filters",[]).filter("dinero",["$filter","$locale",function(e,t){var r=e("currency"),n=t.NUMBER_FORMATS;return function(e,t,o){0===t&&(t=-1);var i=r(e,o),s=i.indexOf(n.DECIMAL_SEP)+1,a="";return s<i.indexOf(n.CURRENCY_SYM)&&(a=" "+n.CURRENCY_SYM),i.substring(0,s+t)+a}}]),function(){"use strict";angular.module("app.main",["app.directives","app.filters"]).controller("MainController",["$rootScope","$scope","User","ngNotify","socket",function(e,t,r,n,o){var i=this;i.buscar=function(e){e.length<1||(o.emit("necesidades:buscar",e),o.on("necesidades:resultado",function(e){i.resultados=e}))},i.login=function(){var e='<a href="/auth/facebook" class="btn btn-primary form-control">Facebook</a>';e+='<a href="/auth/facebook" class="btn btn-info form-control">Twitter</a>',e+='<a href="/auth/facebook" class="btn btn-danger form-control">Google</a>',swal({title:"Iniciar sesión",text:e,html:!0})},r.me().success(function(e){i.user=e,e&&(r.current=e,r.show(e.id).success(function(e){i.user.necesidades=e.necesidades,o.emit("necesidades:notificaciones",r.current),o.on("necesidades:notificaciones",function(e){i.user.unread=e,console.log("Notiicaciones encontradas: ",e.length)})}),setInterval(function(){o.emit("necesidades:notificaciones",r.current)},5e3))}).error(function(e){console.log(e)}),i.palabrasClave=function(){swal({title:"Suscribirte",text:"Escribe palabras separadas por una coma para recibir notificaciones a tu correo:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Ej: gimnasios, estéticas, computación, etc"},function(e){return e?void r.subscribe({words:e}).success(function(e){swal("Suscrito correctamente",e,"success")}).error(function(e){n.set(e,"error")}):!1})},t.userAgent=navigator.userAgent,e.$on("$routeChangeStart",function(){e.loading=!0}),e.$on("$routeChangeSuccess",function(){e.loading=!1}),t.bottomReached=function(){},t.notices=[];for(var s=0;10>s;s++)t.notices.push({icon:"envelope",message:"Notice "+(s+1)});t.deleteNotice=function(e){var r=t.notices.indexOf(e);r>-1&&t.notices.splice(r,1)}}])}(),function(){"use strict";angular.module("app.socket",[]).factory("socket",["User",function(e){var t=io();return t.log=function(r){t.emit("users:logs",{log:r,date:new Date,user:e.current})},t}])}(),function(){"use strict";angular.module("app.necesidad.busqueda",[]).directive("busqueda",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/busqueda.html"}})}(),function(){"use strict";angular.module("app.necesidad.categoria",[]).controller("CategoriaCtrl",["Necesidad","$routeParams",function(e,t){var r=this;e.categoria(t.categoria).success(function(e){r.necesidades=e.necesidades,r.categoria=e.categoria}).error(function(e){console.error(e)})}])}(),function(){"use strict";angular.module("app.necesidad.comentario",[]).directive("comentario",function(){return{restrict:"E",templateUrl:"scripts/necesidad/comentario.html",scope:{comentario:"=",externo:"="}}})}(),function(){"use strict";angular.module("app.comentario.service",[]).factory("Comentario",["$http",function(e){return{"delete":function(t){return e["delete"]("/api/comentarios/"+t)},util:function(t){return e.patch("/api/comentarios/"+t)},show:function(t){return e.get("/api/comentarios/"+t)},all:function(){return e.get("/api/comentarios/")},create:function(t){return e({data:t,method:"POST",url:"/api/necesidades/"+t.necesidadId+"/comentarios"})},update:function(t){return e({data:t,method:"PUT",url:"/api/comentarios/"+t.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.detalle",[]).controller("NecesidadDetalleCtrl",["Necesidad","ngNotify","$routeParams","$window","Comentario","$scope","socket","$rootScope","$location","$anchorScroll",function(e,t,r,n,o,i,s,a,c,u){var d=this;d.necesidad={},d.Comentario={},s.log("Viendo una necesidad"),e.show(r.id).success(function(e){return d.necesidad=e,a.title=e.titulo,r.comentarioId?(c.hash("comentario-"+r.comentarioId),u(),d.comentarioId=r.comentarioId,o.show(r.comentarioId)):void 0}).success(function(e){console.log("coment"),console.log(e)}).error(function(e){t.set(e,"error")}),d.save=function(){s.log("editando una necesidad"),e.update(d.necesidad).success(function(e){t.set(e,"success")}).error(function(e){t.set(e,"error")})},d.comentar=function(){d.ComentarioForm.necesidadId=d.necesidad.id,s.log("comentando una necesidad"),o.create(d.ComentarioForm).success(function(e){t.set("Comentario agregado","success"),console.log(e),d.necesidad.comentarios.push(e),d.ComentarioForm=null,d.ComentarioForm={}}).error(function(e){t.set(e,"error")})},d["delete"]=function(){s.log("eliminando una necesidad");var r=confirm("Realmente deseas eliminar esta publicación?");r&&e["delete"](d.necesidad.id).success(function(e){t.set(e,"success"),n.location="#/"}).error(function(e){t.set(e,"error")})},d.deleteComentario=function(e){var r=confirm("Realmente deseas eliminar este comentario?");r&&o["delete"](e).success(function(r){t.set(r,"success");var n=document.getElementById("comentario-"+e);angular.element(n).remove()}).error(function(e){t.set(e,"error")})},d.util=function(e){s.log('marcando un comentario como "útil"'),o.util(e.id).success(function(r){e.util=!0,t.set(r,"success")}).error(function(e){t.set(e,"error")})},i.upload=function(n){s.log("agregando foto a una necesidad");var o=new FormData;n[0]&&(o.append("file",n[0]),e.upload(o,r.id).success(function(e){t.set(e,"success")}).error(function(e){t.set(e,"error")}))}}])}(),function(){"use strict";angular.module("app.necesidad.item",[]).directive("necesidadItem",function(){return{restrict:"E",templateUrl:"scripts/necesidad/views/item.html",scope:{necesidad:"="}}})}(),function(){"use strict";angular.module("app.necesidad",["app.necesidad.service","app.necesidad.nueva","app.necesidad.item","app.necesidad.detalle","app.necesidad.categoria","app.necesidad.comentario","app.necesidad.busqueda","app.comentario.service"]).controller("NecesidadesCtrl",["Necesidad","ngNotify",function(e,t){var r=this;e.load().success(function(e){r.necesidades=e}).error(function(e){t.set(e,"error")})}]).directive("categoria",function(){return{restrict:"E",templateUrl:"scripts/necesidad/cate.html",scope:{id:"@"}}})}(),function(){"use strict";angular.module("app.necesidad.service",[]).factory("Necesidad",["$http",function(e){return{load:function(t){return e.get("/api/necesidades")},show:function(t){return e.get("/api/necesidades/"+t)},categoria:function(t){return e.get("/api/categorias/"+t)},"delete":function(t){return e["delete"]("/api/necesidades/"+t)},create:function(t){return e({data:t,method:"POST",url:"/api/necesidades"})},upload:function(t,r){return e.post("/api/necesidades/"+r+"/upload",t,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},update:function(t){return e({data:t,method:"PUT",url:"/api/necesidades/"+t.id})}}}])}(),function(){"use strict";angular.module("app.necesidad.nueva",[]).directive("nuevaNecesidad",["Necesidad","ngNotify","$window",function(e,t,r){return{restrict:"E",templateUrl:"scripts/necesidad/nueva.html",scope:{user:"="},controllerAs:"NuevaNecesidadCtrl",bindToController:!0,controller:"NuevaNecesidadCtrl"}}]).controller("NuevaNecesidadCtrl",["Necesidad","ngNotify","$window",function(e,t,r){var n=this;n.NecesidadForm={},n.create=function(){e.create(n.NecesidadForm).success(function(e){t.set("Necesidad agregada correctamente :)","success"),r.location="#/necesidad/"+e+"/editar"}).error(function(e){t.set(e,"error")})}}])}(),function(){"use strict";angular.module("app.user.config",[]).controller("ConfigCtrl",["ngNotify","User","$scope",function(e,t,r){var n=this;n.user={},t.me().success(function(e){n.user=e}).error(function(t){e.set(t,"error")}),n.save=function(){t.update(n.user).success(function(t){e.set(t,"success")}).error(function(t){e.set(t,"error")})},r.upload=function(r){console.log("Subiendo archivo");var o=new FormData;r[0]&&(o.append("file",r[0]),t.upload(o).success(function(t){e.set("Imagen guardada correctamente","success"),n.user.picture=t}).error(function(t){console.log(t),e.set(t,"error")}))}}])}(),function(){"use strict";angular.module("app.user",["app.user.service","app.user.profile","app.user.config"])}(),function(){"use strict";angular.module("app.user.service",[]).factory("User",["$http",function(e){return{current:{},me:function(){return e.get("/api/users/profile")},update:function(t){return e({method:"PUT",data:t,url:"/api/users/profile"})},upload:function(t){return e.post("/api/users/upload",t,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity})},subscribe:function(t){return e({method:"POST",data:t,url:"/api/users/subscribe"})},show:function(t){return e.get("/api/users/"+t)},ban:function(t){return e["delete"]("/api/users/"+t)},all:function(){return e.get("api/admin/users")}}}])}(),function(){"use strict";angular.module("app.user.profile",[]).directive("userProfile",function(){return{restrict:"E",templateUrl:"scripts/users/profile.html",controller:"UserCtrl",controllerAs:"ctrl"}}).controller("UserCtrl",["User","ngNotify","$routeParams",function(e,t,r){var n=this;e.show(r.id).success(function(e){n.user=e,n.user.aceptadas=_.where(e.comentarios,{util:1}),n.user.reputacion=10*e.necesidades.length+e.comentarios.length+20*n.user.aceptadas.length,n.user.visitas=_.sum(e.necesidades,"visitas")}).error(function(e){t.set(e,"error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFkbWluL2FkbWluLmNvbnRyb2xsZXIuanMiLCJhZG1pbi9hZG1pbi5zZXJ2aWNlLmpzIiwiYWRtaW4vY29tZW50YXJpb3MuZGlyZWN0aXZlLmpzIiwiYWRtaW4vZGFzaGJvYXJkLmRpcmVjdGl2ZS5qcyIsImFkbWluL25lY2VzaWRhZGVzLmRpcmVjdGl2ZS5qcyIsImFkbWluL3VzZXJzLmRpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwic2hhcmVkL2RpcmVjdGl2ZXMuanMiLCJzaGFyZWQvZmlsdGVycy5qcyIsInNoYXJlZC9tYWluLmpzIiwic2hhcmVkL3NvY2tldC5qcyIsIm5lY2VzaWRhZC9idXNxdWVkYS5kaXJlY3RpdmUuanMiLCJuZWNlc2lkYWQvY2F0ZWdvcmlhLmNvbnRyb2xsZXIuanMiLCJuZWNlc2lkYWQvY29tZW50YXJpby5kaXJlY3RpdmUuanMiLCJuZWNlc2lkYWQvY29tZW50YXJpby5zZXJ2aWNlLmpzIiwibmVjZXNpZGFkL2RldGFsbGUuY29udHJvbGxlci5qcyIsIm5lY2VzaWRhZC9pdGVtLmRpcmVjdGl2ZS5qcyIsIm5lY2VzaWRhZC9uZWNlc2lkYWQuY29udHJvbGxlci5qcyIsIm5lY2VzaWRhZC9uZWNlc2lkYWQuc2VydmljZS5qcyIsIm5lY2VzaWRhZC9udWV2YS5jb250cm9sbGVyLmpzIiwidXNlcnMvY29uZmlnLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy9jb250cm9sbGVyLmpzIiwidXNlcnMvc2VydmljZS5qcyIsInVzZXJzL3VzZXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkdHJhbnNmb3JtIiwid2luZG93IiwiJHJvb3RTY29wZSIsIiRvbiIsImV2ZW50IiwiY3VycmVudCIsInByZXZpb3VzIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsInJlbG9hZE9uU2VhcmNoIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlIiwidGl0bGUiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmFjdG9yeSIsIiRodHRwIiwiZGFzaCIsImdldCIsInVzZXIiLCJpZCIsInVzZXJzIiwibmVjZXNpZGFkIiwibmVjZXNpZGFkZXMiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsIkNvbWVudGFyaW8iLCJuZ05vdGlmeSIsIiRyb3V0ZSIsInZtIiwidGhpcyIsImFsbCIsInN1Y2Nlc3MiLCJkYXRhIiwiY29tZW50YXJpb3MiLCJlcnJvciIsImVyciIsInNldCIsInN1cmUiLCJjb25maXJtIiwicmVsb2FkIiwidXBkYXRlIiwiY29tZW50YXJpbyIsInRleHRvIiwicHJvbXB0IiwiQWRtaW4iLCJzb2NrZXQiLCJsb2dzIiwib24iLCJsb2ciLCJwdXNoIiwiTmVjZXNpZGFkIiwibG9hZCIsIlVzZXIiLCJiYW4iLCJwYWxhYnJhIiwidHlwZSIsIm5hbWUiLCJsaW5rIiwic2NvcGUiLCJlbCIsImF0dHJzIiwibmdNb2RlbEN0cmwiLCJyb3VuZCIsIm51bSIsImQiLCJNYXRoIiwicG93IiwicHJlY2lzaW9uIiwiZm9ybWF0UHJlY2lzaW9uIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImZvcm1hdFZpZXdWYWx1ZSIsIiRpc0VtcHR5IiwibGFzdFZhbGlkVmFsdWUiLCJtaW4iLCIkcGFyc2VycyIsImlzVW5kZWZpbmVkIiwiaW5kZXhPZiIsIiRzZXRWaWV3VmFsdWUiLCIkcmVuZGVyIiwiZW1wdHkiLCJOVU1CRVJfUkVHRVhQIiwidGVzdCIsIiRzZXRWYWxpZGl0eSIsIiRmb3JtYXR0ZXJzIiwibWluVmFsaWRhdG9yIiwibWF4IiwibWF4VmFsaWRhdG9yIiwiYmluZCIsIiRtb2RlbFZhbHVlIiwiJHZpZXdWYWx1ZSIsInJlcXVpcmUiLCJlbGVtZW50IiwibW9kZWxDdHJsIiwiaW5wdXRWYWx1ZSIsInVuZGVmaW5lZCIsInRyYW5zZm9ybWVkSW5wdXQiLCJyZXBsYWNlIiwiZmlsdGVyIiwibG9jYWxlIiwiY3VycmVuY3lGaWx0ZXIiLCJmb3JtYXRzIiwiTlVNQkVSX0ZPUk1BVFMiLCJhbW91bnQiLCJjdXJyZW5jeVN5bWJvbCIsInNlcCIsIkRFQ0lNQUxfU0VQIiwic3ltYm9sIiwiQ1VSUkVOQ1lfU1lNIiwic3Vic3RyaW5nIiwiJHNjb3BlIiwiYnVzY2FyIiwibGVuZ3RoIiwiZW1pdCIsInJlc3VsdGFkb3MiLCJsb2dpbiIsImh0bWwiLCJzd2FsIiwidGV4dCIsIm1lIiwic2hvdyIsInVucmVhZCIsImNvbnNvbGUiLCJzZXRJbnRlcnZhbCIsInBhbGFicmFzQ2xhdmUiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY2xvc2VPbkNvbmZpcm0iLCJhbmltYXRpb24iLCJpbnB1dFBsYWNlaG9sZGVyIiwic3Vic2NyaWJlIiwid29yZHMiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJsb2FkaW5nIiwiYm90dG9tUmVhY2hlZCIsIm5vdGljZXMiLCJqIiwiaWNvbiIsIm1lc3NhZ2UiLCJkZWxldGVOb3RpY2UiLCJub3RpY2UiLCJpbmRleCIsInNwbGljZSIsImlvIiwiZGF0ZSIsIkRhdGUiLCIkcm91dGVQYXJhbXMiLCJjYXRlZ29yaWEiLCJleHRlcm5vIiwiZGVsZXRlIiwidXRpbCIsInBhdGNoIiwiY3JlYXRlIiwibWV0aG9kIiwidXJsIiwibmVjZXNpZGFkSWQiLCIkd2luZG93IiwiJGxvY2F0aW9uIiwiJGFuY2hvclNjcm9sbCIsInRpdHVsbyIsImNvbWVudGFyaW9JZCIsImhhc2giLCJjb20iLCJzYXZlIiwiY29tZW50YXIiLCJDb21lbnRhcmlvRm9ybSIsImxvY2F0aW9uIiwiZGVsZXRlQ29tZW50YXJpbyIsImNvbWVudERpdiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmUiLCJ1cGxvYWQiLCJmaWxlcyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJjYWxsYmFjayIsImNsYXZlIiwicG9zdCIsIndpdGhDcmVkZW50aWFscyIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJiaW5kVG9Db250cm9sbGVyIiwiTmVjZXNpZGFkRm9ybSIsInBpY3R1cmUiLCJhY2VwdGFkYXMiLCJfIiwid2hlcmUiLCJyZXB1dGFjaW9uIiwidmlzaXRhcyIsInN1bSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUNBQyxPQUFBLE9BQ0EsVUFDQSxXQUNBLGVBQ0Esb0JBQ0Esc0JBQ0EsNkJBQ0EsYUFDQSxnQkFDQSxZQUNBLFdBQ0EsV0FDQSxhQUVBQyxLQUFBLGFBQUEsU0FBQUMsR0FDQUMsT0FBQUQsV0FBQUEsS0FFQUQsS0FBQSxhQUFBLFNBQUFHLEdBRUFBLEVBQUFDLElBQUEsc0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsU0FTQUMsUUFBQSxpQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxHQUNBRCxFQUNBRSxLQUFBLEtBQ0FDLFlBQUEsMkJBQ0FDLGdCQUFBLEVBQ0FDLFdBQUEsV0FDQUMsYUFBQSxhQUVBSixLQUFBLGFBQ0FLLFNBQUEsMEJBRUFMLEtBQUEsa0JBQ0FDLFlBQUEsdUNBQ0FFLFdBQUEsdUJBQ0FDLGFBQUEsZ0JBRUFKLEtBQUEsMkNBQ0FDLFlBQUEsdUNBQ0FFLFdBQUEsdUJBQ0FDLGFBQUEsZ0JBRUFKLEtBQUEseUJBQ0FDLFlBQUEsc0NBQ0FFLFdBQUEsdUJBQ0FDLGFBQUEsZ0JBRUFKLEtBQUEseUJBQ0FDLFlBQUEseUNBQ0FDLGdCQUFBLEVBQ0FDLFdBQUEsZ0JBQ0FDLGFBQUEsa0JBRUFKLEtBQUEsV0FDQU0sTUFBQSw2QkFDQUwsWUFBQSw0QkFDQUMsZ0JBQUEsRUFDQUMsV0FBQSxhQUNBQyxhQUFBLGVBRUFKLEtBQUEsZ0JBQ0FLLFNBQUEsa0NBRUFMLEtBQUEsYUFDQUMsWUFBQSxpQ0FFQUQsS0FBQSxlQUNBQyxZQUFBLG1DQUVBRCxLQUFBLFVBQ0FLLFNBQUEsd0NBRUFMLEtBQUEsbUJBQ0FLLFNBQUEsOEJBRUFMLEtBQUEsc0JBQ0FLLFNBQUEsMENBRUFMLEtBQUEsc0JBQ0FL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TUFBQUosR0FBQUEsVUFBQSxjQUFBSSxJQUVBVyxJQUFBLFdBQ0EsTUFBQWYsR0FBQUUsSUFBQSwyQkN4Q0EsV0FDQSxZQUNBekIsU0FDQUMsT0FBQSx1QkFDQThCLFVBQUEsY0FBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQWxCLFlBQUEsNkJBQ0FFLFdBQUEsV0FDQUMsYUFBQSxVQUdBRCxXQUFBLFlBQUEsT0FBQSxXQUFBLGVBQUEsU0FBQTRDLEVBQUExQixFQUFBeUgsR0FDQSxHQUFBdkgsR0FBQUMsSUFFQXVCLEdBQUFxRSxLQUFBMEIsRUFBQWhJLElBQ0FZLFFBQUEsU0FBQUMsR0FDQUosRUFBQVYsS0FBQWMsRUFDQUosRUFBQVYsS0FBQTJLLFVBQUFDLEVBQUFDLE1BQUEvSixFQUFBQyxhQUFBc0gsS0FBQSxJQUNBM0gsRUFBQVYsS0FBQThLLFdBQUEsR0FBQWhLLEVBQUFWLFlBQUEyRixPQUFBakYsRUFBQUMsWUFBQWdGLE9BQUEsR0FBQXJGLEVBQUFWLEtBQUEySyxVQUFBNUUsT0FFQXJGLEVBQUFWLEtBQUErSyxRQUFBSCxFQUFBSSxJQUFBbEssRUFBQVYsWUFBQSxhQUVBWSxNQUFBLFNBQUFDLEdBQ0FULEVBQUFVLElBQUFELEVBQUEiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICduZ1JvdXRlJyxcbiAgICAgICduZ05vdGlmeScsXG4gICAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAgICdtb2JpbGUtYW5ndWxhci11aScsXG4gICAgICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXG4gICAgICAnbW9iaWxlLWFuZ3VsYXItdWkuZ2VzdHVyZXMnLFxuICAgICAgJ2FwcC5zb2NrZXQnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQnLFxuICAgICAgJ2FwcC5hZG1pbicsXG4gICAgICAnYXBwLmhvbWUnLFxuICAgICAgJ2FwcC5tYWluJyxcbiAgICAgICdhcHAudXNlcidcbiAgICBdKVxuICAgIC5ydW4oWyckdHJhbnNmb3JtJyxmdW5jdGlvbigkdHJhbnNmb3JtKSB7XG4gICAgICB3aW5kb3cuJHRyYW5zZm9ybSA9ICR0cmFuc2Zvcm07XG4gICAgfV0pXG4gICAgLnJ1bihbJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50LCBwcmV2aW91cykge1xuXG4gICAgICAgIC8vIGlmIChjdXJyZW50LiQkcm91dGUgJiYgY3VycmVudCkge1xuICAgICAgICAvLyAgICRyb290U2NvcGUudGl0bGUgPSBjdXJyZW50LiQkcm91dGUudGl0bGU7XG4gICAgICAgIC8vIH1cblxuICAgICAgfSk7XG5cbiAgICB9XSlcbiAgICAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCckbG9jYXRpb25Qcm92aWRlcicsZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAud2hlbignLycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvaG9tZS9zY3JvbGwuaHRtbCcsXG4gICAgICAgICAgcmVsb2FkT25TZWFyY2g6IGZhbHNlLFxuICAgICAgICAgIGNvbnRyb2xsZXI6J0hvbWVDdHJsJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6J0hvbWVDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2J1c3F1ZWRhJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPGJ1c3F1ZWRhPjwvYnVzcXVlZGE+JyxcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9uZWNlc2lkYWQvOmlkJywge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvdmlld3MvZGV0YWxsZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOidOZWNlc2lkYWREZXRhbGxlQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidEZXRhbGxlQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9uZWNlc2lkYWQvOmlkL2NvbWVudGFyaW8vOmNvbWVudGFyaW9JZCcsIHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2RldGFsbGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjonTmVjZXNpZGFkRGV0YWxsZUN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonRGV0YWxsZUN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvbmVjZXNpZGFkLzppZC9lZGl0YXInLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC92aWV3cy9lZGl0YXIuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjonTmVjZXNpZGFkRGV0YWxsZUN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonRGV0YWxsZUN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvY2F0ZWdvcmlhLzpjYXRlZ29yaWEnLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC92aWV3cy9jYXRlZ29yaWEuaHRtbCcsXG4gICAgICAgICAgcmVsb2FkT25TZWFyY2g6IGZhbHNlLFxuICAgICAgICAgIGNvbnRyb2xsZXI6J0NhdGVnb3JpYUN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczonQ2F0ZWdvcmlhQ3RybCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9wZXJmaWwnLCB7XG4gICAgICAgICAgdGl0bGU6J0NvbmZpZ3VyYWNpw7NuIGRlIGxhIGN1ZW50YScsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL3VzZXJzL2NvbmZpZy5odG1sJyxcbiAgICAgICAgICByZWxvYWRPblNlYXJjaDogZmFsc2UsXG4gICAgICAgICAgY29udHJvbGxlcjonQ29uZmlnQ3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOidDb25maWdDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3VzdWFyaW8vOmlkJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPHVzZXItcHJvZmlsZT48L3VzZXItcHJvZmlsZT4nXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvY29udGFjdG8nLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL3NoYXJlZC9jb250YWN0by5odG1sJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3ByaXZhY2lkYWQnLCB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL3NoYXJlZC9wcml2YWNpZGFkLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWRtaW4nLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8YWRtaW4tZGFzaGJvYXJkPjwvYWRtaW4tZGFzaGJvYXJkPidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hZG1pbi91c3VhcmlvcycsIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogJzx1c2Vycy1saXN0PjwvdXNlcnMtbGlzdD4nXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWRtaW4vbmVjZXNpZGFkZXMnLCB7XG4gICAgICAgICAgdGVtcGxhdGU6ICc8bmVjZXNpZGFkZXMtbGlzdD48L25lY2VzaWRhZGVzLWxpc3Q+J1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FkbWluL2NvbWVudGFyaW9zJywge1xuICAgICAgICAgIHRlbXBsYXRlOiAnPGNvbWVudGFyaW9zLWxpc3Q+PC9jb21lbnRhcmlvcy1saXN0PidcbiAgICAgICAgfSlcbiAgICAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbicsW1xuICAgICAgJ2FwcC5hZG1pbi51c2VycycsXG4gICAgICAnYXBwLmFkbWluLm5lY2VzaWRhZGVzJyxcbiAgICAgICdhcHAuYWRtaW4uY29tZW50YXJpb3MnLFxuICAgICAgJ2FwcC5hZG1pbi5kYXNoYm9hcmQnLFxuICAgICAgJ2FwcC5hZG1pbi5zZXJ2aWNlJ1xuICAgIF0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5hZG1pbi5zZXJ2aWNlJywgIFtdKVxuXG4gICAgICAuZmFjdG9yeSAoJ0FkbWluJywgWyckaHR0cCcsZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXNoOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYWRtaW4vZGFzaCcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXNlcjpmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYWRtaW4vdXNlcnMvJyArIGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVzZXJzOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9hZG1pbi91c2VycycpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbmVjZXNpZGFkOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9hZG1pbi9uZWNlc2lkYWRlcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbmVjZXNpZGFkZXM6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL2FkbWluL25lY2VzaWRhZGVzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmFkbWluLmNvbWVudGFyaW9zJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ2NvbWVudGFyaW9zTGlzdCcsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9hZG1pbi9jb21lbnRhcmlvcy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J0FkbWluQ29tZW50YXJpb3NDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczonY3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdBZG1pbkNvbWVudGFyaW9zQ3RybCcsWydDb21lbnRhcmlvJywnbmdOb3RpZnknLCckcm91dGUnLGZ1bmN0aW9uIChDb21lbnRhcmlvLG5nTm90aWZ5LCRyb3V0ZSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgQ29tZW50YXJpby5hbGwoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5jb21lbnRhcmlvcyA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB2bS5kZWxldGUgPSBmdW5jdGlvbiBuYW1lKGlkKSB7XG5cbiAgICAgICAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ8K/UmVhbG1lbnRlIGRlc2VhcyBib3JyYXIgZXN0ZSBjb21lbnRhcmlvPycpO1xuXG4gICAgICAgICAgaWYgKHN1cmUpIHtcbiAgICAgICAgICAgIENvbWVudGFyaW8uZGVsZXRlKGlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2bS51cGRhdGUgPSBmdW5jdGlvbiAoY29tZW50YXJpbykge1xuICAgICAgICAgIHZhciB0ZXh0byA9IHByb21wdCgnUmVtcGxhemEgZWwgdGV4dG8nLGNvbWVudGFyaW8udGV4dG8pXG5cbiAgICAgICAgICBjb21lbnRhcmlvLnRleHRvID0gdGV4dG87XG4gICAgICAgICAgQ29tZW50YXJpby51cGRhdGUoY29tZW50YXJpbylcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4uZGFzaGJvYXJkJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ2FkbWluRGFzaGJvYXJkJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2FkbWluL2Rhc2hib2FyZC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J0FkbWluRGFzaEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ0FkbWluRGFzaEN0cmwnLFsnQWRtaW4nLCduZ05vdGlmeScsJ3NvY2tldCcsZnVuY3Rpb24gKEFkbWluLG5nTm90aWZ5LHNvY2tldCkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmxvZ3MgPSBbXTtcblxuICAgICAgICBBZG1pbi5kYXNoKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0uZGFzaCA9IGRhdGE7XG5cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldC5vbigndXNlcnM6bG9ncycsZnVuY3Rpb24gKGRhdGEpIHsgICAgICAgICAgXG4gICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEubG9nLCdzdWNjZXNzJyk7XG4gICAgICAgICAgdm0ubG9ncy5wdXNoKGRhdGEpO1xuICAgICAgICB9KTtcblxuXG5cblxuXG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4ubmVjZXNpZGFkZXMnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnbmVjZXNpZGFkZXNMaXN0JyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2FkbWluL25lY2VzaWRhZGVzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5OZWNlc2lkYWRlc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ0FkbWluTmVjZXNpZGFkZXNDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JywnJHJvdXRlJyxmdW5jdGlvbiAoTmVjZXNpZGFkLG5nTm90aWZ5LCRyb3V0ZSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgTmVjZXNpZGFkLmxvYWQoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5uZWNlc2lkYWRlcyA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB2bS5kZWxldGUgPSBmdW5jdGlvbiBuYW1lKGlkKSB7XG5cbiAgICAgICAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ8K/UmVhbG1lbnRlIGRlc2VhcyBib3JyYXIgZXN0YSBuZWNlc2lkYWQ/Jyk7XG5cbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgTmVjZXNpZGFkLmRlbGV0ZShpZClcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuYWRtaW4udXNlcnMnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgndXNlcnNMaXN0JyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL2FkbWluL3VzZXJzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjonQWRtaW5Vc2Vyc0N0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOidjdHJsJ1xuICAgICAgICAgIH07XG4gICAgICB9KVxuICAgICAgLmNvbnRyb2xsZXIoJ0FkbWluVXNlcnNDdHJsJyxbJ1VzZXInLCduZ05vdGlmeScsZnVuY3Rpb24gKFVzZXIsbmdOb3RpZnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIFVzZXIuYWxsKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdm0udXNlcnMgPSBkYXRhO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cblxuICAgICAgICB2bS5iYW4gPSBmdW5jdGlvbiAodXNlcikge1xuXG4gICAgICAgICAgdmFyIHBhbGFicmEgPSB1c2VyLnR5cGU9PT0nYmFubmVkJz8ncGVybWl0aXInOidibG9xdWVhcic7XG5cbiAgICAgICAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ1JlYWxtZW50ZSBxdWllcmVzICcgKyBwYWxhYnJhICsgJyBlbCBhY2Nlc28gYSAnICsgdXNlci5uYW1lICsgJz8nKTtcbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgVXNlci5iYW4odXNlci5pZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIGlmICh1c2VyLnR5cGUgPT09ICdiYW5uZWQnKSB7XG4gICAgICAgICAgICAgICAgdXNlci50eXBlID0gJ3VzdWFyaW8nO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVzZXIudHlwZSA9ICdiYW5uZWQnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5ob21lJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdIb21lQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgTmVjZXNpZGFkLmxvYWQoKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHZtLm5lY2VzaWRhZGVzID0gZGF0YTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCAnZXJyb3InKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfV0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcbmFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycsIFtdKVxuICAuZGlyZWN0aXZlKCdtb25leScsIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBOVU1CRVJfUkVHRVhQID0gL15cXHMqKFxcLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSlcXHMqJC87XG5cbiAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbCwgYXR0cnMsIG5nTW9kZWxDdHJsKSB7XG4gICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChhdHRycy5taW4gfHwgMCk7XG4gICAgICB2YXIgcHJlY2lzaW9uID0gcGFyc2VGbG9hdChhdHRycy5wcmVjaXNpb24gfHwgMik7XG4gICAgICB2YXIgbGFzdFZhbGlkVmFsdWU7XG5cbiAgICAgIGZ1bmN0aW9uIHJvdW5kKG51bSkge1xuICAgICAgICB2YXIgZCA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiBkKSAvIGQ7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZvcm1hdFByZWNpc2lvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkudG9GaXhlZChwcmVjaXNpb24pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmb3JtYXRWaWV3VmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSA/ICcnIDogJycgKyB2YWx1ZTtcbiAgICAgIH1cblxuXG4gICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIGxlYWRpbmcgZGVjaW1hbCBwb2ludCwgbGlrZSBcIi41XCJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJy4nKSA9PT0gMCkge1xuICAgICAgICAgIHZhbHVlID0gJzAnICsgdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbGxvdyBcIi1cIiBpbnB1dHMgb25seSB3aGVuIG1pbiA8IDBcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJy0nKSA9PT0gMCkge1xuICAgICAgICAgIGlmIChtaW4gPj0gMCkge1xuICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSgnJyk7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJy0nKSB7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlbXB0eSA9IG5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKTtcbiAgICAgICAgaWYgKGVtcHR5IHx8IE5VTUJFUl9SRUdFWFAudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICBsYXN0VmFsaWRWYWx1ZSA9ICh2YWx1ZSA9PT0gJycpXG4gICAgICAgICAgPyBudWxsXG4gICAgICAgICAgOiAoZW1wdHkgPyB2YWx1ZSA6IHBhcnNlRmxvYXQodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZW5kZXIgdGhlIGxhc3QgdmFsaWQgaW5wdXQgaW4gdGhlIGZpZWxkXG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShmb3JtYXRWaWV3VmFsdWUobGFzdFZhbGlkVmFsdWUpKTtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ251bWJlcicsIHRydWUpO1xuICAgICAgICByZXR1cm4gbGFzdFZhbGlkVmFsdWU7XG4gICAgICB9KTtcbiAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2goZm9ybWF0Vmlld1ZhbHVlKTtcblxuICAgICAgdmFyIG1pblZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICghbmdNb2RlbEN0cmwuJGlzRW1wdHkodmFsdWUpICYmIHZhbHVlIDwgbWluKSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtaW4nLCBmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ21pbicsIHRydWUpO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2gobWluVmFsaWRhdG9yKTtcbiAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2gobWluVmFsaWRhdG9yKTtcblxuICAgICAgaWYgKGF0dHJzLm1heCkge1xuICAgICAgICB2YXIgbWF4ID0gcGFyc2VGbG9hdChhdHRycy5tYXgpO1xuICAgICAgICB2YXIgbWF4VmFsaWRhdG9yID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIW5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSAmJiB2YWx1ZSA+IG1heCkge1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdtYXgnLCBmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ21heCcsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKG1heFZhbGlkYXRvcik7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2gobWF4VmFsaWRhdG9yKTtcbiAgICAgIH1cblxuICAgICAgLy8gUm91bmQgb2ZmXG4gICAgICBpZiAocHJlY2lzaW9uID4gLTEpIHtcbiAgICAgICAgbmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUgPyByb3VuZCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIG5nTW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gZm9ybWF0UHJlY2lzaW9uKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZWwuYmluZCgnYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbmdNb2RlbEN0cmwuJG1vZGVsVmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgPSBmb3JtYXRQcmVjaXNpb24odmFsdWUpO1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICBsaW5rOiBsaW5rXG4gICAgfTtcbiAgfSkuZGlyZWN0aXZlKCdudW1iZXJzT25seScsIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG1vZGVsQ3RybCkge1xuICAgICAgICBtb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbiAoaW5wdXRWYWx1ZSkge1xuICAgICAgICAgIC8vIHRoaXMgbmV4dCBpZiBpcyBuZWNlc3NhcnkgZm9yIHdoZW4gdXNpbmcgbmctcmVxdWlyZWQgb24geW91ciBpbnB1dC5cbiAgICAgICAgICAvLyBJbiBzdWNoIGNhc2VzLCB3aGVuIGEgbGV0dGVyIGlzIHR5cGVkIGZpcnN0LCB0aGlzIHBhcnNlciB3aWxsIGJlIGNhbGxlZFxuICAgICAgICAgIC8vIGFnYWluLCBhbmQgdGhlIDJuZCB0aW1lLCB0aGUgdmFsdWUgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJyc7XG4gICAgICAgICAgdmFyIHRyYW5zZm9ybWVkSW5wdXQgPSBpbnB1dFZhbHVlLnJlcGxhY2UoL1teMC05Ky5dL2csICcnKTtcbiAgICAgICAgICBpZiAodHJhbnNmb3JtZWRJbnB1dCE9PWlucHV0VmFsdWUpIHtcbiAgICAgICAgICAgIG1vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHRyYW5zZm9ybWVkSW5wdXQpO1xuICAgICAgICAgICAgbW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRJbnB1dDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnLFtdKVxuICAuZmlsdGVyKCdkaW5lcm8nLFxuICBbICckZmlsdGVyJywgJyRsb2NhbGUnLCBmdW5jdGlvbihmaWx0ZXIsIGxvY2FsZSkge1xuICAgIHZhciBjdXJyZW5jeUZpbHRlciA9IGZpbHRlcignY3VycmVuY3knKTtcbiAgICB2YXIgZm9ybWF0cyA9IGxvY2FsZS5OVU1CRVJfRk9STUFUUztcbiAgICByZXR1cm4gZnVuY3Rpb24oYW1vdW50LCBudW0sIGN1cnJlbmN5U3ltYm9sKSB7XG4gICAgICBpZiAobnVtPT09MCkgbnVtID0gLTE7XG4gICAgICB2YXIgdmFsdWUgPSBjdXJyZW5jeUZpbHRlcihhbW91bnQsIGN1cnJlbmN5U3ltYm9sKTtcbiAgICAgIHZhciBzZXAgPSB2YWx1ZS5pbmRleE9mKGZvcm1hdHMuREVDSU1BTF9TRVApKzE7XG4gICAgICB2YXIgc3ltYm9sID0gJyc7XG4gICAgICBpZiAoc2VwPHZhbHVlLmluZGV4T2YoZm9ybWF0cy5DVVJSRU5DWV9TWU0pKSBzeW1ib2wgPSAnICcrZm9ybWF0cy5DVVJSRU5DWV9TWU07XG4gICAgICByZXR1cm4gdmFsdWUuc3Vic3RyaW5nKDAsIHNlcCtudW0pK3N5bWJvbDtcbiAgICB9O1xuICB9IF0pO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAgIGFuZ3VsYXJcbiAgICAgIC5tb2R1bGUoJ2FwcC5tYWluJywgW1xuICAgICAgJ2FwcC5kaXJlY3RpdmVzJyxcbiAgICAgICdhcHAuZmlsdGVycydcbiAgICBdKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsWyckcm9vdFNjb3BlJywnJHNjb3BlJywnVXNlcicsJ25nTm90aWZ5Jywnc29ja2V0JywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBVc2VyLCBuZ05vdGlmeSxzb2NrZXQpe1xuXG4gICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAvLyBjYWphIGRlIHRleHRvIHBhcmEgaGFjZXIgYsO6c3F1ZWRhcyBxdWUgZXN0w6EgZW4gZWwgbWVuw7ogc3VwZXJpb3JcbiAgICAgIHZtLmJ1c2NhciA9IGZ1bmN0aW9uIChidXNjYXIpIHtcbiAgICAgICAgaWYgKGJ1c2Nhci5sZW5ndGg8MSkge1xuICAgICAgICAgIHJldHVybiA7XG4gICAgICAgIH1cbiAgICAgICAgc29ja2V0LmVtaXQoJ25lY2VzaWRhZGVzOmJ1c2NhcicsYnVzY2FyKTtcbiAgICAgICAgc29ja2V0Lm9uKCduZWNlc2lkYWRlczpyZXN1bHRhZG8nLGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdm0ucmVzdWx0YWRvcyA9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICB9O1xuXG4gICAgICB2bS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGh0bWwgPSAnPGEgaHJlZj1cIi9hdXRoL2ZhY2Vib29rXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgZm9ybS1jb250cm9sXCI+RmFjZWJvb2s8L2E+JztcbiAgICAgICAgaHRtbCArPSAnPGEgaHJlZj1cIi9hdXRoL2ZhY2Vib29rXCIgY2xhc3M9XCJidG4gYnRuLWluZm8gZm9ybS1jb250cm9sXCI+VHdpdHRlcjwvYT4nXG4gICAgICAgIGh0bWwgKz0gJzxhIGhyZWY9XCIvYXV0aC9mYWNlYm9va1wiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1jb250cm9sXCI+R29vZ2xlPC9hPidcbiAgICAgICAgc3dhbCh7XG4gICAgICAgICAgdGl0bGU6J0luaWNpYXIgc2VzacOzbicsXG4gICAgICAgICAgdGV4dDpodG1sLFxuICAgICAgICAgIGh0bWw6dHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuXG4gICAgICBVc2VyLm1lKClcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB2bS51c2VyID0gZGF0YTtcbiAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgVXNlci5jdXJyZW50ID0gZGF0YTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBVc2VyLnNob3coZGF0YS5pZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHZtLnVzZXIubmVjZXNpZGFkZXMgPSBkYXRhLm5lY2VzaWRhZGVzO1xuICAgICAgICAgICAgICBzb2NrZXQuZW1pdCgnbmVjZXNpZGFkZXM6bm90aWZpY2FjaW9uZXMnLFVzZXIuY3VycmVudCk7XG4gICAgICAgICAgICAgIHNvY2tldC5vbignbmVjZXNpZGFkZXM6bm90aWZpY2FjaW9uZXMnLGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdm0udXNlci51bnJlYWQgPSBkYXRhO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3RpaWNhY2lvbmVzIGVuY29udHJhZGFzOiAnLGRhdGEubGVuZ3RoKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ25lY2VzaWRhZGVzOm5vdGlmaWNhY2lvbmVzJyxVc2VyLmN1cnJlbnQpO1xuICAgICAgICAgIH0sNTAwMCk7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuXG4gICAgICB2bS5wYWxhYnJhc0NsYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2FsKHtcbiAgICAgICAgICB0aXRsZTogXCJTdXNjcmliaXJ0ZVwiLFxuICAgICAgICAgIHRleHQ6IFwiRXNjcmliZSBwYWxhYnJhcyBzZXBhcmFkYXMgcG9yIHVuYSBjb21hIHBhcmEgcmVjaWJpciBub3RpZmljYWNpb25lcyBhIHR1IGNvcnJlbzpcIixcbiAgICAgICAgICB0eXBlOiBcImlucHV0XCIsXG4gICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UsXG4gICAgICAgICAgYW5pbWF0aW9uOiBcInNsaWRlLWZyb20tdG9wXCIsXG4gICAgICAgICAgaW5wdXRQbGFjZWhvbGRlcjogXCJFajogZ2ltbmFzaW9zLCBlc3TDqXRpY2FzLCBjb21wdXRhY2nDs24sIGV0Y1wiXG4gICAgICAgIH0sIGZ1bmN0aW9uKGlucHV0VmFsdWUpe1xuICAgICAgICAgIGlmIChpbnB1dFZhbHVlKSB7XG5cbiAgICAgICAgICAgIFVzZXIuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgd29yZHM6aW5wdXRWYWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHN3YWwoJ1N1c2NyaXRvIGNvcnJlY3RhbWVudGUnLCBkYXRhLCBcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cblxuICAgICAgLy8gVXNlciBhZ2VudCBkaXNwbGF5ZWQgaW4gaG9tZSBwYWdlXG4gICAgICAkc2NvcGUudXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuICAgICAgLy8gTmVlZGVkIGZvciB0aGUgbG9hZGluZyBzY3JlZW5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICRyb290U2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICB9KTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpe1xuICAgICAgICAkcm9vdFNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuXG5cblxuICAgICAgJHNjb3BlLmJvdHRvbVJlYWNoZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLyogZ2xvYmFsIGFsZXJ0OiBmYWxzZTsgKi9cbiAgICAgICAgLy8gYWxlcnQoJ0NvbmdyYXRzIHlvdSBzY3JvbGxlZCB0byB0aGUgZW5kIG9mIHRoZSBsaXN0IScpO1xuICAgICAgfTtcblxuXG4gICAgICAvL1xuICAgICAgLy8gJ0RyYWcnIHNjcmVlblxuICAgICAgLy9cbiAgICAgICRzY29wZS5ub3RpY2VzID0gW107XG5cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICAkc2NvcGUubm90aWNlcy5wdXNoKHtpY29uOiAnZW52ZWxvcGUnLCBtZXNzYWdlOiAnTm90aWNlICcgKyAoaiArIDEpIH0pO1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuZGVsZXRlTm90aWNlID0gZnVuY3Rpb24obm90aWNlKSB7XG4gICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5ub3RpY2VzLmluZGV4T2Yobm90aWNlKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAkc2NvcGUubm90aWNlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuc29ja2V0JyxbXSlcbiAgICAgIC5mYWN0b3J5KCdzb2NrZXQnLFsnVXNlcicsZnVuY3Rpb24gKFVzZXIpIHtcblxuICAgICAgICB2YXIgc29ja2V0ID0gaW8oKTtcbiAgICAgICAgc29ja2V0LmxvZyA9IGZ1bmN0aW9uICh0ZXh0bykge1xuICAgICAgICAgIHNvY2tldC5lbWl0KCd1c2Vyczpsb2dzJyx7XG4gICAgICAgICAgICBsb2c6dGV4dG8sXG4gICAgICAgICAgICBkYXRlOm5ldyBEYXRlKCksXG4gICAgICAgICAgICB1c2VyOlVzZXIuY3VycmVudFxuICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNvY2tldDtcbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLmJ1c3F1ZWRhJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ2J1c3F1ZWRhJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzY3JpcHRzL25lY2VzaWRhZC92aWV3cy9idXNxdWVkYS5odG1sJyAgICAgICAgICAgIFxuICAgICAgICAgIH07XG4gICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLmNhdGVnb3JpYScsW10pXG4gICAgICAuY29udHJvbGxlcignQ2F0ZWdvcmlhQ3RybCcsWydOZWNlc2lkYWQnLCckcm91dGVQYXJhbXMnLGZ1bmN0aW9uIChOZWNlc2lkYWQsJHJvdXRlUGFyYW1zKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuXG5cbiAgICAgICAgTmVjZXNpZGFkLmNhdGVnb3JpYSgkcm91dGVQYXJhbXMuY2F0ZWdvcmlhKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5uZWNlc2lkYWRlcyA9IGRhdGEubmVjZXNpZGFkZXM7XG4gICAgICAgICAgICB2bS5jYXRlZ29yaWEgPSBkYXRhLmNhdGVnb3JpYTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubmVjZXNpZGFkLmNvbWVudGFyaW8nLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnY29tZW50YXJpbycsZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvY29tZW50YXJpby5odG1sJyxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgIGNvbWVudGFyaW86ICc9JyxcbiAgICAgICAgICAgICAgLy8gcG9uZW1vcyB0cnVlIGN1YW5kbyBlc3RhbW9zIHZpZW5kbyBlc3RlIGNvbWVudGFyaW8gZGVzZGUgdW4gbHVnYXIgcXVlIG5vIHNlYSBsYSBuZWNlc2lkYWQgY29tbyB0YWwsIHBvciBlamVtcGxvIGVsIHBlcmZpbCBkZSB1biB1c3VhcmlvXG4gICAgICAgICAgICAgIGV4dGVybm86ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmNvbWVudGFyaW8uc2VydmljZScsW10pXG4gICAgICAuZmFjdG9yeSgnQ29tZW50YXJpbycsWyckaHR0cCcsZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkZWxldGU6ZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL2NvbWVudGFyaW9zLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1dGlsOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBhdGNoKCcvYXBpL2NvbWVudGFyaW9zLycgKyBpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaG93OmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jb21lbnRhcmlvcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY29tZW50YXJpb3MvJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjcmVhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIGRhdGEgICAgOiAgZGF0YSxcbiAgICAgICAgICAgICAgbWV0aG9kICA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL25lY2VzaWRhZGVzLycgKyBkYXRhLm5lY2VzaWRhZElkICsgJy9jb21lbnRhcmlvcydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBkYXRhICAgIDogIGRhdGEsXG4gICAgICAgICAgICAgIG1ldGhvZCAgOiAnUFVUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL2NvbWVudGFyaW9zLycgKyBkYXRhLmlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfV0pXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5kZXRhbGxlJyxbXSlcbiAgICAgIC5jb250cm9sbGVyKCdOZWNlc2lkYWREZXRhbGxlQ3RybCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyRyb3V0ZVBhcmFtcycsJyR3aW5kb3cnLCdDb21lbnRhcmlvJywnJHNjb3BlJywnc29ja2V0JywnJHJvb3RTY29wZScsJyRsb2NhdGlvbicsJyRhbmNob3JTY3JvbGwnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHJvdXRlUGFyYW1zLCR3aW5kb3csQ29tZW50YXJpbywkc2NvcGUsc29ja2V0LCRyb290U2NvcGUsJGxvY2F0aW9uLCRhbmNob3JTY3JvbGwpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5uZWNlc2lkYWQgPSB7fTtcbiAgICAgICAgdm0uQ29tZW50YXJpbyA9IHt9O1xuXG5cbiAgICAgICAgc29ja2V0LmxvZygnVmllbmRvIHVuYSBuZWNlc2lkYWQnKTtcbiAgICAgICAgTmVjZXNpZGFkLnNob3coJHJvdXRlUGFyYW1zLmlkKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2bS5uZWNlc2lkYWQgPSBkYXRhO1xuICAgICAgICAgICAgJHJvb3RTY29wZS50aXRsZSA9IGRhdGEudGl0dWxvO1xuICAgICAgICAgICAgaWYgKCRyb3V0ZVBhcmFtcy5jb21lbnRhcmlvSWQpIHtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2NvbWVudGFyaW8tJyArICRyb3V0ZVBhcmFtcy5jb21lbnRhcmlvSWQpO1xuICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICAgIHZtLmNvbWVudGFyaW9JZCA9ICRyb3V0ZVBhcmFtcy5jb21lbnRhcmlvSWQ7XG5cbiAgICAgICAgICAgICAgLy8gbWFyY2FyIGVsIGNvbWVudGFyaW8gY29tbyBsZcOtZG9cbiAgICAgICAgICAgICAgcmV0dXJuIENvbWVudGFyaW8uc2hvdygkcm91dGVQYXJhbXMuY29tZW50YXJpb0lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChjb20pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb21lbnQnKVxuICAgICAgICAgICAgY29uc29sZS5sb2coY29tKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cblxuICAgICAgICB2bS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNvY2tldC5sb2coJ2VkaXRhbmRvIHVuYSBuZWNlc2lkYWQnKTtcbiAgICAgICAgICBOZWNlc2lkYWQudXBkYXRlKHZtLm5lY2VzaWRhZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmNvbWVudGFyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgdm0uQ29tZW50YXJpb0Zvcm0ubmVjZXNpZGFkSWQgPSB2bS5uZWNlc2lkYWQuaWQ7XG4gICAgICAgICAgc29ja2V0LmxvZygnY29tZW50YW5kbyB1bmEgbmVjZXNpZGFkJyk7XG4gICAgICAgICAgQ29tZW50YXJpby5jcmVhdGUodm0uQ29tZW50YXJpb0Zvcm0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoJ0NvbWVudGFyaW8gYWdyZWdhZG8nLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICAgICAgICAgIHZtLm5lY2VzaWRhZC5jb21lbnRhcmlvcy5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICB2bS5Db21lbnRhcmlvRm9ybSA9IG51bGxcbiAgICAgICAgICAgICAgdm0uQ29tZW50YXJpb0Zvcm0gPSB7fTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNvY2tldC5sb2coJ2VsaW1pbmFuZG8gdW5hIG5lY2VzaWRhZCcpO1xuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnUmVhbG1lbnRlIGRlc2VhcyBlbGltaW5hciBlc3RhIHB1YmxpY2FjacOzbj8nKTtcbiAgICAgICAgICBpZiAoc3VyZSkge1xuICAgICAgICAgICAgTmVjZXNpZGFkLmRlbGV0ZSh2bS5uZWNlc2lkYWQuaWQpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGRhdGEsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uID0gJyMvJztcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uZGVsZXRlQ29tZW50YXJpbyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgIHZhciBzdXJlID0gY29uZmlybSgnUmVhbG1lbnRlIGRlc2VhcyBlbGltaW5hciBlc3RlIGNvbWVudGFyaW8/Jyk7XG4gICAgICAgICAgaWYgKHN1cmUpIHtcbiAgICAgICAgICAgIENvbWVudGFyaW8uZGVsZXRlKGlkKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbWVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21lbnRhcmlvLScgKyBpZCk7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGNvbWVudERpdikucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZtLnV0aWwgPSBmdW5jdGlvbiAoY29tZW50YXJpbykge1xuICAgICAgICAgIHNvY2tldC5sb2coJ21hcmNhbmRvIHVuIGNvbWVudGFyaW8gY29tbyBcIsO6dGlsXCInKTtcbiAgICAgICAgICBDb21lbnRhcmlvLnV0aWwoY29tZW50YXJpby5pZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIGNvbWVudGFyaW8udXRpbCA9IHRydWU7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldChkYXRhLCdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS51cGxvYWQgPSBmdW5jdGlvbihmaWxlcykge1xuICAgICAgICAgIHNvY2tldC5sb2coJ2FncmVnYW5kbyBmb3RvIGEgdW5hIG5lY2VzaWRhZCcpO1xuICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgIGlmIChmaWxlc1swXSkge1xuICAgICAgICAgICAgZmQuYXBwZW5kKFwiZmlsZVwiLCBmaWxlc1swXSk7XG4gICAgICAgICAgICBOZWNlc2lkYWQudXBsb2FkKGZkLCRyb3V0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5pdGVtJyxbXSlcbiAgICAgIC5kaXJlY3RpdmUoJ25lY2VzaWRhZEl0ZW0nLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL3ZpZXdzL2l0ZW0uaHRtbCcsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICBuZWNlc2lkYWQ6ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZCcsW1xuICAgICAgJ2FwcC5uZWNlc2lkYWQuc2VydmljZScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5udWV2YScsXG4gICAgICAnYXBwLm5lY2VzaWRhZC5pdGVtJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLmRldGFsbGUnLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuY2F0ZWdvcmlhJyxcbiAgICAgICdhcHAubmVjZXNpZGFkLmNvbWVudGFyaW8nLFxuICAgICAgJ2FwcC5uZWNlc2lkYWQuYnVzcXVlZGEnLFxuICAgICAgJ2FwcC5jb21lbnRhcmlvLnNlcnZpY2UnXG4gICAgXSlcbiAgICAgIC5jb250cm9sbGVyKCdOZWNlc2lkYWRlc0N0cmwnLFsnTmVjZXNpZGFkJywnbmdOb3RpZnknLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIE5lY2VzaWRhZC5sb2FkKClcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICB2bS5uZWNlc2lkYWRlcyA9IGRhdGE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwgJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIH1dKVxuICAgICAgLmRpcmVjdGl2ZSgnY2F0ZWdvcmlhJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvbmVjZXNpZGFkL2NhdGUuaHRtbCcsXG4gICAgICAgICAgICBzY29wZTp7XG4gICAgICAgICAgICAgIGlkOidAJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5uZWNlc2lkYWQuc2VydmljZScsW10pXG4gICAgICAuZmFjdG9yeSgnTmVjZXNpZGFkJyxbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxvYWQ6ZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL25lY2VzaWRhZGVzJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaG93OmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9uZWNlc2lkYWRlcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2F0ZWdvcmlhOmZ1bmN0aW9uIChjbGF2ZSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXRlZ29yaWFzLycgKyBjbGF2ZSk7XG4gICAgICAgICAgfSwgICAgICAgICAgXG4gICAgICAgICAgZGVsZXRlOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9uZWNlc2lkYWRlcy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY3JlYXRlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBkYXRhICAgIDogIGRhdGEsXG4gICAgICAgICAgICAgIG1ldGhvZCAgOiAnUE9TVCcsXG4gICAgICAgICAgICAgIHVybCAgICAgOiAnL2FwaS9uZWNlc2lkYWRlcydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBsb2FkOmZ1bmN0aW9uIChmZCxpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvbmVjZXNpZGFkZXMvJyArIGlkICsgJy91cGxvYWQnLCBmZCwge1xuICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBkYXRlOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBkYXRhICAgIDogIGRhdGEsXG4gICAgICAgICAgICAgIG1ldGhvZCAgOiAnUFVUJyxcbiAgICAgICAgICAgICAgdXJsICAgICA6ICcvYXBpL25lY2VzaWRhZGVzLycgKyBkYXRhLmlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfV0pXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLm5lY2VzaWRhZC5udWV2YScsW10pXG4gICAgICAuZGlyZWN0aXZlKCdudWV2YU5lY2VzaWRhZCcsWydOZWNlc2lkYWQnLCduZ05vdGlmeScsJyR3aW5kb3cnLGZ1bmN0aW9uIChOZWNlc2lkYWQsbmdOb3RpZnksJHdpbmRvdykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2NyaXB0cy9uZWNlc2lkYWQvbnVldmEuaHRtbCcsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICB1c2VyOiAnPSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwiTnVldmFOZWNlc2lkYWRDdHJsXCIsXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ051ZXZhTmVjZXNpZGFkQ3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfV0pXG4gICAgICAuY29udHJvbGxlcignTnVldmFOZWNlc2lkYWRDdHJsJyxbJ05lY2VzaWRhZCcsJ25nTm90aWZ5JywnJHdpbmRvdycsZnVuY3Rpb24gKE5lY2VzaWRhZCxuZ05vdGlmeSwkd2luZG93XG4gICAgICApIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5OZWNlc2lkYWRGb3JtID0ge307XG5cbiAgICAgICAgdm0uY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIE5lY2VzaWRhZC5jcmVhdGUodm0uTmVjZXNpZGFkRm9ybSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIG5nTm90aWZ5LnNldCgnTmVjZXNpZGFkIGFncmVnYWRhIGNvcnJlY3RhbWVudGUgOiknLCdzdWNjZXNzJyk7ICR3aW5kb3cubG9jYXRpb24gPSAnIy9uZWNlc2lkYWQvJyArIGRhdGEgKyAnL2VkaXRhcic7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICB9XSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVzZXIuY29uZmlnJywgW10pXG4gICAgLmNvbnRyb2xsZXIoJ0NvbmZpZ0N0cmwnLFsnbmdOb3RpZnknLCdVc2VyJywnJHNjb3BlJyxmdW5jdGlvbihuZ05vdGlmeSxVc2VyLCRzY29wZSl7XG5cbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS51c2VyID0ge307XG5cbiAgICAgIFVzZXIubWUoKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAgKGRhdGEpIHtcbiAgICAgICAgICB2bS51c2VyID0gZGF0YTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgbmdOb3RpZnkuc2V0KGVyciwnZXJyb3InKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHZtLnNhdmUgPSBmdW5jdGlvbiAgKCkge1xuICAgICAgICBVc2VyLnVwZGF0ZSh2bS51c2VyKVxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZGF0YSwnc3VjY2VzcycpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uICAoZXJyKSB7XG4gICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnVwbG9hZCA9IGZ1bmN0aW9uKGZpbGVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTdWJpZW5kbyBhcmNoaXZvJyk7XG4gICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAvL1Rha2UgdGhlIGZpcnN0IHNlbGVjdGVkIGZpbGVcblxuICAgICAgICBpZiAoZmlsZXNbMF0pIHtcbiAgICAgICAgICBmZC5hcHBlbmQoXCJmaWxlXCIsIGZpbGVzWzBdKTtcblxuICAgICAgICAgIFVzZXIudXBsb2FkKGZkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgbmdOb3RpZnkuc2V0KCdJbWFnZW4gZ3VhcmRhZGEgY29ycmVjdGFtZW50ZScsJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgdm0udXNlci5waWN0dXJlID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICBuZ05vdGlmeS5zZXQoZXJyLCdlcnJvcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cblxuICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC51c2VyJywgW1xuICAgICdhcHAudXNlci5zZXJ2aWNlJyxcbiAgICAnYXBwLnVzZXIucHJvZmlsZScsXG4gICAgLy8gJ2FwcC51c2VyLm5vdGlmaWNhY2lvbmVzJyxcbiAgICAnYXBwLnVzZXIuY29uZmlnJyAvLyBlZGl0YXIgcGVyZmlsIGRlbCB1c3VhcmlvIHkgc3UgY29uZmlndXJhY2nDs25cbiAgXSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAudXNlci5zZXJ2aWNlJywgIFtdKVxuXG4gICAgICAuZmFjdG9yeSAoJ1VzZXInLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGN1cnJlbnQ6e30sXG4gICAgICAgICAgbWU6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2Vycy9wcm9maWxlJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGRhdGU6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgICAgICAgZGF0YTpkYXRhLFxuICAgICAgICAgICAgICB1cmw6Jy9hcGkvdXNlcnMvcHJvZmlsZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdXBsb2FkOmZ1bmN0aW9uIChmZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMvdXBsb2FkJywgZmQsIHtcbiAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1YnNjcmliZTpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJyxcbiAgICAgICAgICAgICAgZGF0YTpkYXRhLFxuICAgICAgICAgICAgICB1cmw6Jy9hcGkvdXNlcnMvc3Vic2NyaWJlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaG93OmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2Vycy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYmFuOmZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS91c2Vycy8nICsgaWQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9hZG1pbi91c2VycycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1dKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC51c2VyLnByb2ZpbGUnLFtdKVxuICAgICAgLmRpcmVjdGl2ZSgndXNlclByb2ZpbGUnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NjcmlwdHMvdXNlcnMvcHJvZmlsZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6J1VzZXJDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczonY3RybCdcbiAgICAgICAgICB9O1xuICAgICAgfSlcbiAgICAgIC5jb250cm9sbGVyKCdVc2VyQ3RybCcsWydVc2VyJywnbmdOb3RpZnknLCckcm91dGVQYXJhbXMnLGZ1bmN0aW9uIChVc2VyLG5nTm90aWZ5LCRyb3V0ZVBhcmFtcykge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIFVzZXIuc2hvdygkcm91dGVQYXJhbXMuaWQpXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gIChkYXRhKSB7XG4gICAgICAgICAgICAgIHZtLnVzZXIgPSBkYXRhO1xuICAgICAgICAgICAgICB2bS51c2VyLmFjZXB0YWRhcyA9IF8ud2hlcmUoZGF0YS5jb21lbnRhcmlvcyx7dXRpbDoxfSk7XG4gICAgICAgICAgICAgIHZtLnVzZXIucmVwdXRhY2lvbiA9IChkYXRhLm5lY2VzaWRhZGVzLmxlbmd0aCAqIDEwKSArIGRhdGEuY29tZW50YXJpb3MubGVuZ3RoICsgKHZtLnVzZXIuYWNlcHRhZGFzLmxlbmd0aCAqIDIwKTtcblxuICAgICAgICAgICAgICB2bS51c2VyLnZpc2l0YXMgPSBfLnN1bShkYXRhLm5lY2VzaWRhZGVzLCd2aXNpdGFzJyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gIChlcnIpIHtcbiAgICAgICAgICAgIG5nTm90aWZ5LnNldChlcnIsJ2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIH1dKTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
